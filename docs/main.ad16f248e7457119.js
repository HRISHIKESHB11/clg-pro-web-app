"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[179],{588:(t_,JS,n_)=>{var sl={};function on(n){return"function"==typeof n}function i_(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n_.r(sl),n_.d(sl,{afterMain:()=>tR,afterRead:()=>JI,afterWrite:()=>rR,applyStyles:()=>q0,arrow:()=>hR,auto:()=>wp,basePlacements:()=>Kl,beforeMain:()=>QI,beforeRead:()=>KI,beforeWrite:()=>nR,bottom:()=>Xi,clippingParents:()=>XI,computeStyles:()=>Z0,createPopper:()=>rb,createPopperBase:()=>aj,createPopperLite:()=>uj,detectOverflow:()=>nc,end:()=>Zl,eventListeners:()=>J0,flip:()=>yR,hide:()=>xR,left:()=>gi,main:()=>eR,modifierPhases:()=>sR,offset:()=>ER,placements:()=>W0,popper:()=>Jl,popperGenerator:()=>Dp,popperOffsets:()=>ib,preventOverflow:()=>SR,read:()=>ZI,reference:()=>YI,right:()=>Yi,start:()=>ma,top:()=>mi,variationPlacements:()=>$0,viewport:()=>G0,write:()=>iR});const r_=i_(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function s_(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ar{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(on(i))try{i()}catch(s){e=s instanceof r_?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{tw(s)}catch(o){e=e??[],o instanceof r_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new r_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)tw(e);else{if(e instanceof ar){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&s_(t,e)}remove(e){const{_finalizers:t}=this;t&&s_(t,e),e instanceof ar&&e._removeParent(this)}}ar.EMPTY=(()=>{const n=new ar;return n.closed=!0,n})();const QS=ar.EMPTY;function ew(n){return n instanceof ar||n&&"closed"in n&&on(n.remove)&&on(n.add)&&on(n.unsubscribe)}function tw(n){on(n)?n():n.unsubscribe()}const Zo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Sh={setTimeout(n,e,...t){const{delegate:i}=Sh;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Sh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function nw(n){Sh.setTimeout(()=>{const{onUnhandledError:e}=Zo;if(!e)throw n;e(n)})}function iw(){}const B2=o_("C",void 0,void 0);function o_(n,e,t){return{kind:n,value:e,error:t}}let Jo=null;function wh(n){if(Zo.useDeprecatedSynchronousErrorHandling){const e=!Jo;if(e&&(Jo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Jo;if(Jo=null,t)throw i}}else n()}class a_ extends ar{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ew(e)&&e.add(this)):this.destination=j2}static create(e,t,i){return new lu(e,t,i)}next(e){this.isStopped?c_(function z2(n){return o_("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?c_(function V2(n){return o_("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?c_(B2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const G2=Function.prototype.bind;function l_(n,e){return G2.call(n,e)}class $2{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Mh(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Mh(i)}else Mh(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Mh(t)}}}class lu extends a_{constructor(e,t,i){let r;if(super(),on(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Zo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&l_(e.next,s),error:e.error&&l_(e.error,s),complete:e.complete&&l_(e.complete,s)}):r=e}this.destination=new $2(r)}}function Mh(n){Zo.useDeprecatedSynchronousErrorHandling?function H2(n){Zo.useDeprecatedSynchronousErrorHandling&&Jo&&(Jo.errorThrown=!0,Jo.error=n)}(n):nw(n)}function c_(n,e){const{onStoppedNotification:t}=Zo;t&&Sh.setTimeout(()=>t(n,e))}const j2={closed:!0,next:iw,error:function W2(n){throw n},complete:iw},u_="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qo(n){return n}function rw(n){return 0===n.length?Qo:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let wn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Y2(n){return n&&n instanceof a_||function X2(n){return n&&on(n.next)&&on(n.error)&&on(n.complete)}(n)&&ew(n)}(t)?t:new lu(t,i,r);return wh(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=sw(i))((r,s)=>{const o=new lu({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[u_](){return this}pipe(...t){return rw(t)(this)}toPromise(t){return new(t=sw(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function sw(n){var e;return null!==(e=n??Zo.Promise)&&void 0!==e?e:Promise}const K2=i_(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ms=(()=>{class n extends wn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new ow(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new K2}next(t){wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?QS:(this.currentObservers=null,s.push(t),new ar(()=>{this.currentObservers=null,s_(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new wn;return t.source=this,t}}return n.create=(e,t)=>new ow(e,t),n})();class ow extends ms{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:QS}}function aw(n){return on(n?.lift)}function Un(n){return e=>{if(aw(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Rn(n,e,t,i,r){return new Z2(n,e,t,i,r)}class Z2 extends a_{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Dt(n,e){return Un((t,i)=>{let r=0;t.subscribe(Rn(i,s=>{i.next(n.call(e,s,r++))}))})}function oo(n){return this instanceof oo?(this.v=n,this):new oo(n)}function dw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function p_(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const hw=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function fw(n){return on(n?.then)}function pw(n){return on(n[u_])}function mw(n){return Symbol.asyncIterator&&on(n?.[Symbol.asyncIterator])}function gw(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _w=function wU(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yw(n){return on(n?.[_w])}function vw(n){return function uw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(f){return function(p){return Promise.resolve(p).then(f,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(f,p){i[f]&&(r[f]=function(_){return new Promise(function(g,m){s.push([f,_,g,m])>1||l(f,_)})},p&&(r[f]=p(r[f])))}function l(f,p){try{!function c(f){f.value instanceof oo?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}(i[f](p))}catch(_){h(s[0][3],_)}}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield oo(t.read());if(r)return yield oo(void 0);yield yield oo(i)}}finally{t.releaseLock()}})}function bw(n){return on(n?.getReader)}function lr(n){if(n instanceof wn)return n;if(null!=n){if(pw(n))return function MU(n){return new wn(e=>{const t=n[u_]();if(on(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(hw(n))return function CU(n){return new wn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(fw(n))return function TU(n){return new wn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,nw)})}(n);if(mw(n))return xw(n);if(yw(n))return function AU(n){return new wn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(bw(n))return function DU(n){return xw(vw(n))}(n)}throw gw(n)}function xw(n){return new wn(e=>{(function IU(n,e){var t,i,r,s;return function lw(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=dw(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function gs(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Vn(n,e,t=1/0){return on(e)?Vn((i,r)=>Dt((s,o)=>e(i,s,r,o))(lr(n(i,r))),t):("number"==typeof e&&(t=e),Un((i,r)=>function RU(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=_=>c<i?p(_):l.push(_),p=_=>{s&&e.next(_),c++;let g=!1;lr(t(_,u++)).subscribe(Rn(e,m=>{r?.(m),s?f(m):e.next(m)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const m=l.shift();o?gs(e,o,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(Rn(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function ol(n=1/0){return Vn(Qo,n)}const qr=new wn(n=>n.complete());function g_(n){return n[n.length-1]}function Ew(n){return on(g_(n))?n.pop():void 0}function cu(n){return function NU(n){return n&&on(n.schedule)}(g_(n))?n.pop():void 0}function Sw(n,e=0){return Un((t,i)=>{t.subscribe(Rn(i,r=>gs(i,n,()=>i.next(r),e),()=>gs(i,n,()=>i.complete(),e),r=>gs(i,n,()=>i.error(r),e)))})}function ww(n,e=0){return Un((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Mw(n,e){if(!n)throw new Error("Iterable cannot be null");return new wn(t=>{gs(t,e,()=>{const i=n[Symbol.asyncIterator]();gs(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Mn(n,e){return e?function VU(n,e){if(null!=n){if(pw(n))return function OU(n,e){return lr(n).pipe(ww(e),Sw(e))}(n,e);if(hw(n))return function UU(n,e){return new wn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(fw(n))return function FU(n,e){return lr(n).pipe(ww(e),Sw(e))}(n,e);if(mw(n))return Mw(n,e);if(yw(n))return function kU(n,e){return new wn(t=>{let i;return gs(t,e,()=>{i=n[_w](),gs(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>on(i?.return)&&i.return()})}(n,e);if(bw(n))return function BU(n,e){return Mw(vw(n),e)}(n,e)}throw gw(n)}(n,e):lr(n)}function __(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new lu({next:()=>{i.unsubscribe(),n()}});return lr(e(...t)).subscribe(i)}function Xt(n){for(let e in n)if(n[e]===Xt)return e;throw Error("Could not find renamed property on target object.")}function y_(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Yt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Yt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function v_(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const GU=Xt({__forward_ref__:Xt});function Kt(n){return n.__forward_ref__=Kt,n.toString=function(){return Yt(this())},n}function Ze(n){return b_(n)?n():n}function b_(n){return"function"==typeof n&&n.hasOwnProperty(GU)&&n.__forward_ref__===Kt}function x_(n){return n&&!!n.\u0275providers}class Z extends Error{constructor(e,t){super(Ch(e,t)),this.code=e}}function Ch(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function ct(n){return"string"==typeof n?n:null==n?"":String(n)}function Th(n,e){throw new Z(-201,!1)}function cr(n,e){null==n&&function Vt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ge(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ci(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ah(n){return Tw(n,Dh)||Tw(n,Dw)}function Tw(n,e){return n.hasOwnProperty(e)?n[e]:null}function Aw(n){return n&&(n.hasOwnProperty(E_)||n.hasOwnProperty(ZU))?n[E_]:null}const Dh=Xt({\u0275prov:Xt}),E_=Xt({\u0275inj:Xt}),Dw=Xt({ngInjectableDef:Xt}),ZU=Xt({ngInjectorDef:Xt});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let S_;function ur(n){const e=S_;return S_=n,e}function Iw(n,e,t){const i=Ah(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Je.Optional?null:void 0!==e?e:void Th(Yt(n))}const Qt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),uu={},w_="__NG_DI_FLAG__",Ih="ngTempTokenPath",QU="ngTokenPath",ek=/\n/gm,tk="\u0275",Rw="__source";let du;function al(n){const e=du;return du=n,e}function nk(n,e=Je.Default){if(void 0===du)throw new Z(-203,!1);return null===du?Iw(n,void 0,e):du.get(n,e&Je.Optional?null:void 0,e)}function ze(n,e=Je.Default){return(function JU(){return S_}()||nk)(Ze(n),e)}function It(n,e=Je.Default){return ze(n,Rh(e))}function Rh(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function M_(n){const e=[];for(let t=0;t<n.length;t++){const i=Ze(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Z(900,!1);let r,s=Je.Default;for(let o=0;o<i.length;o++){const a=i[o],l=ik(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ze(r,s))}else e.push(ze(i))}return e}function hu(n,e){return n[w_]=e,n.prototype[w_]=e,n}function ik(n){return n[w_]}function _s(n){return{toString:n}.toString()}var Xr=(()=>((Xr=Xr||{})[Xr.OnPush=0]="OnPush",Xr[Xr.Default=1]="Default",Xr))(),Cr=(()=>{return(n=Cr||(Cr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Cr;var n})();const ys={},kt=[],Ph=Xt({\u0275cmp:Xt}),C_=Xt({\u0275dir:Xt}),T_=Xt({\u0275pipe:Xt}),Nw=Xt({\u0275mod:Xt}),vs=Xt({\u0275fac:Xt}),fu=Xt({__NG_ELEMENT_ID__:Xt});let ok=0;function ea(n){return _s(()=>{const e=Ow(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Xr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Cr.Emulated,id:"c"+ok++,styles:n.styles||kt,_:null,schemas:n.schemas||null,tView:null};Fw(t);const i=n.dependencies;return t.directiveDefs=Nh(i,!1),t.pipeDefs=Nh(i,!0),t})}function lk(n){return zt(n)||Yn(n)}function ck(n){return null!==n}function Si(n){return _s(()=>({type:n.type,bootstrap:n.bootstrap||kt,declarations:n.declarations||kt,imports:n.imports||kt,exports:n.exports||kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Lw(n,e){if(null==n)return ys;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function st(n){return _s(()=>{const e=Ow(n);return Fw(e),e})}function wi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function zt(n){return n[Ph]||null}function Yn(n){return n[C_]||null}function Mi(n){return n[T_]||null}function Bi(n,e){const t=n[Nw]||null;if(!t&&!0===e)throw new Error(`Type ${Yt(n)} does not have '\u0275mod' property.`);return t}function Ow(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lw(n.inputs,e),outputs:Lw(n.outputs)}}function Fw(n){n.features?.forEach(e=>e(n))}function Nh(n,e){if(!n)return null;const t=e?Mi:lk;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(ck)}const bs=0,Ce=1,_t=2,fn=3,Tr=4,ta=5,Kn=6,cl=7,vn=8,Lh=9,Oh=10,bt=11,A_=12,pu=13,Uw=14,ul=15,Zn=16,mu=17,dl=18,Yr=19,gu=20,kw=21,en=22,D_=1,Bw=2,Fh=7,Uh=8,hl=9,ui=10;function Vi(n){return Array.isArray(n)&&"object"==typeof n[D_]}function Ar(n){return Array.isArray(n)&&!0===n[D_]}function I_(n){return 0!=(4&n.flags)}function _u(n){return n.componentOffset>-1}function kh(n){return 1==(1&n.flags)}function Dr(n){return!!n.template}function dk(n){return 0!=(256&n[_t])}function na(n,e){return n.hasOwnProperty(vs)?n[vs]:null}class pk{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function zi(){return Hw}function Hw(n){return n.type.prototype.ngOnChanges&&(n.setInput=gk),mk}function mk(){const n=$w(this),e=n?.current;if(e){const t=n.previous;if(t===ys)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function gk(n,e,t,i){const r=this.declaredInputs[t],s=$w(n)||function _k(n,e){return n[Gw]=e}(n,{previous:ys,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new pk(l&&l.currentValue,e,a===ys),n[i]=e}zi.ngInherit=!0;const Gw="__ngSimpleChanges__";function $w(n){return n[Gw]||null}const dr=function(n,e,t){},Ww="svg";function zn(n){for(;Array.isArray(n);)n=n[bs];return n}function Bh(n,e){return zn(e[n])}function Hi(n,e){return zn(e[n.index])}function qw(n,e){return n.data[e]}function fl(n,e){return n[e]}function Ci(n,e){const t=e[n];return Vi(t)?t:t[bs]}function Vh(n){return 64==(64&n[_t])}function lo(n,e){return null==e?null:n[e]}function Xw(n){n[dl]=0}function P_(n,e){n[ta]+=e;let t=n,i=n[fn];for(;null!==i&&(1===e&&1===t[ta]||-1===e&&0===t[ta]);)i[ta]+=e,t=i,i=i[fn]}const ut={lFrame:rM(null),bindingsEnabled:!0};function Kw(){return ut.bindingsEnabled}function re(){return ut.lFrame.lView}function Nt(){return ut.lFrame.tView}function nt(n){return ut.lFrame.contextLView=n,n[vn]}function it(n){return ut.lFrame.contextLView=null,n}function Hn(){let n=Zw();for(;null!==n&&64===n.type;)n=n.parent;return n}function Zw(){return ut.lFrame.currentTNode}function Kr(n,e){const t=ut.lFrame;t.currentTNode=n,t.isParent=e}function N_(){return ut.lFrame.isParent}function L_(){ut.lFrame.isParent=!1}function di(){const n=ut.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function pl(){return ut.lFrame.bindingIndex++}function Es(n){const e=ut.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ik(n,e){const t=ut.lFrame;t.bindingIndex=t.bindingRootIndex=n,O_(e)}function O_(n){ut.lFrame.currentDirectiveIndex=n}function tM(){return ut.lFrame.currentQueryIndex}function U_(n){ut.lFrame.currentQueryIndex=n}function Pk(n){const e=n[Ce];return 2===e.type?e.declTNode:1===e.type?n[Kn]:null}function nM(n,e,t){if(t&Je.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Je.Host||(r=Pk(s),null===r||(s=s[ul],10&r.type))););if(null===r)return!1;e=r,n=s}const i=ut.lFrame=iM();return i.currentTNode=e,i.lView=n,!0}function k_(n){const e=iM(),t=n[Ce];ut.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iM(){const n=ut.lFrame,e=null===n?null:n.child;return null===e?rM(n):e}function rM(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function sM(){const n=ut.lFrame;return ut.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const oM=sM;function B_(){const n=sM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hi(){return ut.lFrame.selectedIndex}function ia(n){ut.lFrame.selectedIndex=n}function an(){const n=ut.lFrame;return qw(n.tView,n.selectedIndex)}function zh(){ut.lFrame.currentNamespace=Ww}function Hh(){!function Fk(){ut.lFrame.currentNamespace=null}()}function Gh(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks??(n.viewHooks=[])).push(t,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(t,u)}}function $h(n,e,t){aM(n,e,3,t)}function Wh(n,e,t,i){(3&n[_t])===t&&aM(n,e,t,i)}function V_(n,e){let t=n[_t];(3&t)===e&&(t&=2047,t+=1,n[_t]=t)}function aM(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[dl]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[dl]+=65536),(a<s||-1==s)&&(Bk(n,t,e,l),n[dl]=(4294901760&n[dl])+l+2),l++}function Bk(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[_t]>>11<n[dl]>>16&&(3&n[_t])===e){n[_t]+=2048,dr(4,a,s);try{s.call(a)}finally{dr(5,a,s)}}}else{dr(4,a,s);try{s.call(a)}finally{dr(5,a,s)}}}const ml=-1;class vu{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function H_(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];cM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function lM(n){return 3===n||4===n||6===n}function cM(n){return 64===n.charCodeAt(0)}function bu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||uM(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function uM(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function dM(n){return n!==ml}function jh(n){return 32767&n}function qh(n,e){let t=function Gk(n){return n>>16}(n),i=e;for(;t>0;)i=i[ul],t--;return i}let G_=!0;function Xh(n){const e=G_;return G_=n,e}const hM=255,fM=5;let $k=0;const Zr={};function Yh(n,e){const t=pM(n,e);if(-1!==t)return t;const i=e[Ce];i.firstCreatePass&&(n.injectorIndex=e.length,$_(i.data,n),$_(e,null),$_(i.blueprint,null));const r=W_(n,e),s=n.injectorIndex;if(dM(r)){const o=jh(r),a=qh(r,e),l=a[Ce].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function $_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pM(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function W_(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=xM(r),null===i)return ml;if(t++,r=r[ul],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ml}function j_(n,e,t){!function Wk(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(fu)&&(i=t[fu]),null==i&&(i=t[fu]=$k++);const r=i&hM;e.data[n+(r>>fM)]|=1<<r}(n,e,t)}function mM(n,e,t){if(t&Je.Optional||void 0!==n)return n;Th()}function gM(n,e,t,i){if(t&Je.Optional&&void 0===i&&(i=null),!(t&(Je.Self|Je.Host))){const r=n[Lh],s=ur(void 0);try{return r?r.get(e,i,t&Je.Optional):Iw(e,i,t&Je.Optional)}finally{ur(s)}}return mM(i,0,t)}function _M(n,e,t,i=Je.Default,r){if(null!==n){if(1024&e[_t]){const o=function Kk(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[_t]&&!(256&o[_t]);){const a=yM(s,o,t,i|Je.Self,Zr);if(a!==Zr)return a;let l=s.parent;if(!l){const c=o[kw];if(c){const u=c.get(t,Zr,i);if(u!==Zr)return u}l=xM(o),o=o[ul]}s=l}return r}(n,e,t,i,Zr);if(o!==Zr)return o}const s=yM(n,e,t,i,Zr);if(s!==Zr)return s}return gM(e,t,i,r)}function yM(n,e,t,i,r){const s=function Xk(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(fu)?n[fu]:void 0;return"number"==typeof e?e>=0?e&hM:Yk:e}(t);if("function"==typeof s){if(!nM(e,n,i))return i&Je.Host?mM(r,0,i):gM(e,t,i,r);try{const o=s(i);if(null!=o||i&Je.Optional)return o;Th()}finally{oM()}}else if("number"==typeof s){let o=null,a=pM(n,e),l=ml,c=i&Je.Host?e[Zn][Kn]:null;for((-1===a||i&Je.SkipSelf)&&(l=-1===a?W_(n,e):e[a+8],l!==ml&&bM(i,!1)?(o=e[Ce],a=jh(l),e=qh(l,e)):a=-1);-1!==a;){const u=e[Ce];if(vM(s,a,u.data)){const d=qk(a,e,t,o,i,c);if(d!==Zr)return d}l=e[a+8],l!==ml&&bM(i,e[Ce].data[a+8]===c)&&vM(s,a,e)?(o=u,a=jh(l),e=qh(l,e)):a=-1}}return r}function qk(n,e,t,i,r,s){const o=e[Ce],a=o.data[n+8],u=Kh(a,o,t,null==i?_u(a)&&G_:i!=o&&0!=(3&a.type),r&Je.Host&&s===a);return null!==u?ra(e,o,u,a):Zr}function Kh(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Dr(f)&&f.type===t)return l}return null}function ra(n,e,t,i){let r=n[t];const s=e.data;if(function Vk(n){return n instanceof vu}(r)){const o=r;o.resolving&&function $U(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Bt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ct(n)}(s[t]));const a=Xh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ur(o.injectImpl):null;nM(n,i,Je.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function kk(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Hw(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&ur(l),Xh(a),o.resolving=!1,oM()}}return r}function vM(n,e,t){return!!(t[e+(n>>fM)]&1<<n)}function bM(n,e){return!(n&Je.Self||n&Je.Host&&e)}class gl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return _M(this._tNode,this._lView,e,Rh(i),t)}}function Yk(){return new gl(Hn(),re())}function Gn(n){return _s(()=>{const e=n.prototype.constructor,t=e[vs]||q_(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[vs]||q_(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function q_(n){return b_(n)?()=>{const e=q_(Ze(n));return e&&e()}:na(n)}function xM(n){const e=n[Ce],t=e.type;return 2===t?e.declTNode:1===t?n[Kn]:null}const yl="__parameters__";function bl(n,e,t){return _s(()=>{const i=function X_(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(yl)?l[yl]:Object.defineProperty(l,yl,{value:[]})[yl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class $e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function sa(n,e){n.forEach(t=>Array.isArray(t)?sa(t,e):e(t))}function SM(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Jh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Gi(n,e,t){let i=xl(n,e);return i>=0?n[1|i]=t:(i=~i,function e3(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function K_(n,e){const t=xl(n,e);if(t>=0)return n[1|t]}function xl(n,e){return function wM(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const wu=hu(bl("Optional"),8),Mu=hu(bl("SkipSelf"),4);var Ti=(()=>((Ti=Ti||{})[Ti.Important=1]="Important",Ti[Ti.DashCase=2]="DashCase",Ti))();const ny=new Map;let E3=0;const ry="__ngContext__";function Jn(n,e){Vi(e)?(n[ry]=e[gu],function w3(n){ny.set(n[gu],n)}(e)):n[ry]=e}let sy;function oy(n,e){return sy(n,e)}function Du(n){const e=n[fn];return Ar(e)?e[fn]:e}function ay(n){return $M(n[pu])}function ly(n){return $M(n[Tr])}function $M(n){for(;null!==n&&!Ar(n);)n=n[Tr];return n}function Sl(n,e,t,i,r){if(null!=i){let s,o=!1;Ar(i)?s=i:Vi(i)&&(o=!0,i=i[bs]);const a=zn(i);0===n&&null!==t?null==r?KM(e,t,a):oa(e,t,a,r||null,!0):1===n&&null!==t?oa(e,t,a,r||null,!0):2===n?function my(n,e,t){const i=nf(n,e);i&&function $3(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function q3(n,e,t,i,r){const s=t[Fh];s!==zn(t)&&Sl(e,n,i,s,r);for(let a=ui;a<t.length;a++){const l=t[a];Iu(l[Ce],l,n,e,i,s)}}(e,n,s,t,r)}}function uy(n,e,t){return n.createElement(e,t)}function jM(n,e){const t=n[hl],i=t.indexOf(e),r=e[fn];512&e[_t]&&(e[_t]&=-513,P_(r,-1)),t.splice(i,1)}function dy(n,e){if(n.length<=ui)return;const t=ui+e,i=n[t];if(i){const r=i[mu];null!==r&&r!==n&&jM(r,i),e>0&&(n[t-1][Tr]=i[Tr]);const s=Jh(n,ui+e);!function F3(n,e){Iu(n,e,e[bt],2,null,null),e[bs]=null,e[Kn]=null}(i[Ce],i);const o=s[Yr];null!==o&&o.detachView(s[Ce]),i[fn]=null,i[Tr]=null,i[_t]&=-65}return i}function qM(n,e){if(!(128&e[_t])){const t=e[bt];t.destroyNode&&Iu(n,e,t,3,null,null),function B3(n){let e=n[pu];if(!e)return hy(n[Ce],n);for(;e;){let t=null;if(Vi(e))t=e[pu];else{const i=e[ui];i&&(t=i)}if(!t){for(;e&&!e[Tr]&&e!==n;)Vi(e)&&hy(e[Ce],e),e=e[fn];null===e&&(e=n),Vi(e)&&hy(e[Ce],e),t=e&&e[Tr]}e=t}}(e)}}function hy(n,e){if(!(128&e[_t])){e[_t]&=-65,e[_t]|=128,function G3(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof vu)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];dr(4,a,l);try{l.call(a)}finally{dr(5,a,l)}}else{dr(4,r,s);try{s.call(r)}finally{dr(5,r,s)}}}}}(n,e),function H3(n,e){const t=n.cleanup,i=e[cl];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[cl]=null}}(n,e),1===e[Ce].type&&e[bt].destroy();const t=e[mu];if(null!==t&&Ar(e[fn])){t!==e[fn]&&jM(t,e);const i=e[Yr];null!==i&&i.detachView(n)}!function M3(n){ny.delete(n[gu])}(e)}}function XM(n,e,t){return function YM(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[bs];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Cr.None||s===Cr.Emulated)return null}return Hi(i,t)}}(n,e.parent,t)}function oa(n,e,t,i,r){n.insertBefore(e,t,i,r)}function KM(n,e,t){n.appendChild(e,t)}function ZM(n,e,t,i,r){null!==i?oa(n,e,t,i,r):KM(n,e,t)}function nf(n,e){return n.parentNode(e)}let fy,yy,eC=function QM(n,e,t){return 40&n.type?Hi(n,t):null};function rf(n,e,t,i){const r=XM(n,i,e),s=e[bt],a=function JM(n,e,t){return eC(n,e,t)}(i.parent||e[Kn],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)ZM(s,r,t[l],a,!1);else ZM(s,r,t,a,!1);void 0!==fy&&fy(s,i,e,t,r)}function sf(n,e){if(null!==e){const t=e.type;if(3&t)return Hi(e,n);if(4&t)return py(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return sf(n,i);{const r=n[e.index];return Ar(r)?py(-1,r):zn(r)}}if(32&t)return oy(e,n)()||zn(n[e.index]);{const i=nC(n,e);return null!==i?Array.isArray(i)?i[0]:sf(Du(n[Zn]),i):sf(n,e.next)}}return null}function nC(n,e){return null!==e?n[Zn][Kn].projection[e.projection]:null}function py(n,e){const t=ui+n+1;if(t<e.length){const i=e[t],r=i[Ce].firstChild;if(null!==r)return sf(i,r)}return e[Fh]}function gy(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Jn(zn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)gy(n,e,t.child,i,r,s,!1),Sl(e,n,r,a,s);else if(32&l){const c=oy(t,i);let u;for(;u=c();)Sl(e,n,r,u,s);Sl(e,n,r,a,s)}else 16&l?iC(n,e,i,t,r,s):Sl(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Iu(n,e,t,i,r,s){gy(t,i,n.firstChild,e,r,s,!1)}function iC(n,e,t,i,r,s){const o=t[Zn],l=o[Kn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Sl(e,n,r,l[c],s);else gy(n,e,l,o[fn],r,s,!0)}function rC(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sC(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&H_(n,e,i),null!==r&&rC(n,e,r),null!==s&&function Y3(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class uC{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function co(n){return n instanceof uC?n.changingThisBreaksApplicationSecurity:n}const uf=new $e("ENVIRONMENT_INITIALIZER"),bC=new $e("INJECTOR",-1),xC=new $e("INJECTOR_DEF_TYPES");class EC{get(e,t=uu){if(t===uu){const i=new Error(`NullInjectorError: No provider for ${Yt(e)}!`);throw i.name="NullInjectorError",i}return t}}function EB(...n){return{\u0275providers:SC(0,n),\u0275fromNgModule:!0}}function SC(n,...e){const t=[],i=new Set;let r;return sa(e,s=>{const o=s;wy(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&wC(r,t),t}function wC(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];My(r,s=>{e.push(s)})}}function wy(n,e,t,i){if(!(n=Ze(n)))return!1;let r=null,s=Aw(n);const o=!s&&zt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Aw(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)wy(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{sa(s.imports,u=>{wy(u,e,t,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&wC(c,e)}if(!a){const c=na(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:kt},{provide:xC,useValue:r,multi:!0},{provide:uf,useValue:()=>ze(r),multi:!0})}const l=s.providers;null==l||a||My(l,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}function My(n,e){for(let t of n)x_(t)&&(t=t.\u0275providers),Array.isArray(t)?My(t,e):e(t)}const SB=Xt({provide:String,useValue:Xt});function Cy(n){return null!==n&&"object"==typeof n&&SB in n}function aa(n){return"function"==typeof n}const Ty=new $e("Set Injector scope."),df={},MB={};let Ay;function hf(){return void 0===Ay&&(Ay=new EC),Ay}class ws{}class TC extends ws{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Iy(e,o=>this.processProvider(o)),this.records.set(bC,Ml(void 0,this)),r.has("environment")&&this.records.set(ws,Ml(void 0,this));const s=this.records.get(Ty);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xC.multi,kt,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=al(this),i=ur(void 0);try{return e()}finally{al(t),ur(i)}}get(e,t=uu,i=Je.Default){this.assertNotDestroyed(),i=Rh(i);const r=al(this),s=ur(void 0);try{if(!(i&Je.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function IB(n){return"function"==typeof n||"object"==typeof n&&n instanceof $e}(e)&&Ah(e);a=l&&this.injectableDefInScope(l)?Ml(Dy(e),df):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Je.Self?hf():this.parent).get(e,t=i&Je.Optional&&t===uu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Ih]=o[Ih]||[]).unshift(Yt(e)),r)throw o;return function rk(n,e,t,i){const r=n[Ih];throw e[Rw]&&r.unshift(e[Rw]),n.message=function sk(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==tk?n.slice(2):n;let r=Yt(e);if(Array.isArray(e))r=e.map(Yt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Yt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ek,"\n  ")}`}("\n"+n.message,r,t,i),n[QU]=r,n[Ih]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{ur(s),al(r)}}resolveInjectorInitializers(){const e=al(this),t=ur(void 0);try{const i=this.get(uf.multi,kt,Je.Self);for(const r of i)r()}finally{al(e),ur(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Yt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){let t=aa(e=Ze(e))?e:Ze(e&&e.provide);const i=function TB(n){return Cy(n)?Ml(void 0,n.useValue):Ml(AC(n),df)}(e);if(aa(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Ml(void 0,df,!0),r.factory=()=>M_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===df&&(t.value=MB,t.value=t.factory()),"object"==typeof t.value&&t.value&&function DB(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Dy(n){const e=Ah(n),t=null!==e?e.factory:na(n);if(null!==t)return t;if(n instanceof $e)throw new Z(204,!1);if(n instanceof Function)return function CB(n){const e=n.length;if(e>0)throw function Su(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new Z(204,!1);const t=function KU(n){return n&&(n[Dh]||n[Dw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Z(204,!1)}function AC(n,e,t){let i;if(aa(n)){const r=Ze(n);return na(r)||Dy(r)}if(Cy(n))i=()=>Ze(n.useValue);else if(function CC(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...M_(n.deps||[]));else if(function MC(n){return!(!n||!n.useExisting)}(n))i=()=>ze(Ze(n.useExisting));else{const r=Ze(n&&(n.useClass||n.provide));if(!function AB(n){return!!n.deps}(n))return na(r)||Dy(r);i=()=>new r(...M_(n.deps))}return i}function Ml(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Iy(n,e){for(const t of n)Array.isArray(t)?Iy(t,e):t&&x_(t)?Iy(t.\u0275providers,e):e(t)}class RB{}class DC{}class NB{resolveComponentFactory(e){throw function PB(n){const e=Error(`No component factory found for ${Yt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Lu=(()=>{class n{}return n.NULL=new NB,n})();function LB(){return Cl(Hn(),re())}function Cl(n,e){return new $i(Hi(n,e))}let $i=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=LB,n})();function OB(n){return n instanceof $i?n.nativeElement:n}class Ou{}let Ms=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function FB(){const n=re(),t=Ci(Hn().index,n);return(Vi(t)?t:n)[bt]}(),n})(),UB=(()=>{class n{}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:()=>null}),n})();class Fu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const kB=new Fu("15.2.10"),Ry={},Py="ngOriginalError";function Ny(n){return n[Py]}class Tl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ny(e);for(;t&&Ny(t);)t=Ny(t);return t||null}}function ff(n){return n.ownerDocument.defaultView}function Cs(n){return n instanceof Function?n():n}function PC(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const NC="ng-template";function XB(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==PC(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function LC(n){return 4===n.type&&n.value!==NC}function YB(n,e,t){return e===(4!==n.type||t?n.value:NC)}function KB(n,e,t){let i=4;const r=n.attrs||[],s=function QB(n){for(let e=0;e<n.length;e++)if(lM(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!YB(n,l,t)||""===l&&1===e.length){if(Ir(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!XB(n.attrs,c,t)){if(Ir(i))return!1;o=!0}continue}const d=ZB(8&i?"class":l,r,LC(n),t);if(-1===d){if(Ir(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==PC(f,c,0)||2&i&&c!==h){if(Ir(i))return!1;o=!0}}}}else{if(!o&&!Ir(i)&&!Ir(l))return!1;if(o&&Ir(l))continue;o=!1,i=l|1&i}}return Ir(i)||o}function Ir(n){return 0==(1&n)}function ZB(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function eV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function OC(n,e,t=!1){for(let i=0;i<e.length;i++)if(KB(n,e[i],t))return!0;return!1}function FC(n,e){return n?":not("+e.trim()+")":e}function nV(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ir(o)&&(e+=FC(s,r),r=""),i=o,s=s||!Ir(i);t++}return""!==r&&(e+=FC(s,r)),e}const dt={};function Te(n){UC(Nt(),re(),hi()+n,!1)}function UC(n,e,t,i){if(!i)if(3==(3&e[_t])){const s=n.preOrderCheckHooks;null!==s&&$h(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Wh(e,s,0,t)}ia(t)}function zC(n,e=null,t=null,i){const r=HC(n,e,t,i);return r.resolveInjectorInitializers(),r}function HC(n,e=null,t=null,i,r=new Set){const s=[t||kt,EB(n)];return i=i||("object"==typeof n?void 0:Yt(n)),new TC(s,e||hf(),i||null,r)}let Jr=(()=>{class n{static create(t,i){if(Array.isArray(t))return zC({name:""},i,t,"");{const r=t.name??"";return zC({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=uu,n.NULL=new EC,n.\u0275prov=Ge({token:n,providedIn:"any",factory:()=>ze(bC)}),n.__NG_ELEMENT_ID__=-1,n})();function ae(n,e=Je.Default){const t=re();return null===t?ze(n,e):_M(Hn(),t,Ze(n),e)}function KC(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];U_(t[i]),o.contentQueries(2,e[s],s)}}}function mf(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[bs]=r,d[_t]=76|i,(null!==u||n&&1024&n[_t])&&(d[_t]|=1024),Xw(d),d[fn]=d[ul]=n,d[vn]=t,d[Oh]=o||n&&n[Oh],d[bt]=a||n&&n[bt],d[A_]=l||n&&n[A_]||null,d[Lh]=c||n&&n[Lh]||null,d[Kn]=s,d[gu]=function S3(){return E3++}(),d[kw]=u,d[Zn]=2==e.type?n[Zn]:d,d}function Il(n,e,t,i,r){let s=n.data[e];if(null===s)s=function ky(n,e,t,i,r){const s=Zw(),o=N_(),l=n.data[e]=function AV(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function Dk(){return ut.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function yu(){const n=ut.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Kr(s,!0),s}function Uu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function By(n,e,t){k_(e);try{const i=n.viewQuery;null!==i&&Xy(1,i,t);const r=n.template;null!==r&&ZC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&KC(n,e),n.staticViewQueries&&Xy(2,n.viewQuery,t);const s=n.components;null!==s&&function MV(n,e){for(let t=0;t<e.length;t++)XV(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[_t]&=-5,B_()}}function gf(n,e,t,i){const r=e[_t];if(128!=(128&r)){k_(e);try{Xw(e),function Qw(n){return ut.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ZC(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&$h(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Wh(e,c,0,null),V_(e,0)}if(function jV(n){for(let e=ay(n);null!==e;e=ly(e)){if(!e[Bw])continue;const t=e[hl];for(let i=0;i<t.length;i++){const r=t[i];512&r[_t]||P_(r[fn],1),r[_t]|=512}}}(e),function WV(n){for(let e=ay(n);null!==e;e=ly(e))for(let t=ui;t<e.length;t++){const i=e[t],r=i[Ce];Vh(i)&&gf(r,i,r.template,i[vn])}}(e),null!==n.contentQueries&&KC(n,e),o){const c=n.contentCheckHooks;null!==c&&$h(e,c)}else{const c=n.contentHooks;null!==c&&Wh(e,c,1),V_(e,1)}!function SV(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)ia(~r);else{const s=r,o=t[++i],a=t[++i];Ik(o,s),a(2,e[s])}}}finally{ia(-1)}}(n,e);const a=n.components;null!==a&&function wV(n,e){for(let t=0;t<e.length;t++)qV(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Xy(2,l,i),o){const c=n.viewCheckHooks;null!==c&&$h(e,c)}else{const c=n.viewHooks;null!==c&&Wh(e,c,2),V_(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[_t]&=-41,512&e[_t]&&(e[_t]&=-513,P_(e[fn],-1))}finally{B_()}}}function ZC(n,e,t,i,r){const s=hi(),o=2&i;try{ia(-1),o&&e.length>en&&UC(n,e,en,!1),dr(o?2:0,r),t(i,r)}finally{ia(s),dr(o?3:1,r)}}function Vy(n,e,t){if(I_(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function zy(n,e,t){Kw()&&(function OV(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;_u(t)&&function HV(n,e,t){const i=Hi(e,n),r=JC(t),s=n[Oh],o=_f(n,mf(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Yh(t,e),Jn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=ra(e,n,a,t);Jn(c,e),null!==o&&GV(0,a-r,c,l,0,o),Dr(l)&&(Ci(t.index,e)[vn]=ra(e,n,a,t))}}(n,e,t,Hi(t,e)),64==(64&t.flags)&&iT(n,e,t))}function Hy(n,e,t=Hi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function JC(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Gy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Gy(n,e,t,i,r,s,o,a,l,c){const u=en+i,d=u+r,h=function CV(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:dt);return t}(u,d),f="function"==typeof c?c():c;return h[Ce]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function QC(n,e,t,i){const r=sT(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&oT(n).push(i,r.length-1))}function eT(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?tT(t,e,r,s):i.hasOwnProperty(r)&&tT(t,e,i[r],s)}return t}function tT(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function $y(n,e,t,i){if(Kw()){const r=null===i?null:{"":-1},s=function UV(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(OC(e,o.selectors,!1))if(i||(i=[]),Dr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Wy(n,e,a.length)}else i.unshift(o),Wy(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&nT(n,e,t,o,r,a),r&&function kV(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Z(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=bu(t.mergedAttrs,t.attrs)}function nT(n,e,t,i,r,s){for(let c=0;c<i.length;c++)j_(Yh(t,e),n,i[c].type);!function VV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Uu(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=bu(t.mergedAttrs,u.hostAttrs),zV(n,t,e,l,u),BV(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function DV(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;l=eT(d.inputs,u,l,h?h.inputs:null),c=eT(d.outputs,u,c,p);const _=null===l||null===o||LC(e)?null:$V(l,u,o);a.push(_)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function iT(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function Rk(){return ut.lFrame.currentDirectiveIndex}();try{ia(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];O_(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&FV(l,c)}}finally{ia(-1),O_(o)}}function FV(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Wy(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function BV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Dr(e)&&(t[""]=n)}}function zV(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=na(r.type)),o=new vu(s,Dr(r),ae);n.blueprint[i]=o,t[i]=o,function NV(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function LV(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Uu(n,t,r.hostVars,dt),r)}function Qr(n,e,t,i,r,s){const o=Hi(n,e);!function jy(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?ct(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[bt],o,s,n.value,t,i,r)}function GV(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function $V(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function rT(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function qV(n,e){const t=Ci(e,n);if(Vh(t)){const i=t[Ce];48&t[_t]?gf(i,t,i.template,t[vn]):t[ta]>0&&qy(t)}}function qy(n){for(let i=ay(n);null!==i;i=ly(i))for(let r=ui;r<i.length;r++){const s=i[r];if(Vh(s))if(512&s[_t]){const o=s[Ce];gf(o,s,o.template,s[vn])}else s[ta]>0&&qy(s)}const t=n[Ce].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Ci(t[i],n);Vh(r)&&r[ta]>0&&qy(r)}}function XV(n,e){const t=Ci(e,n),i=t[Ce];(function YV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),By(i,t,t[vn])}function _f(n,e){return n[pu]?n[Uw][Tr]=e:n[pu]=e,n[Uw]=e,e}function yf(n){for(;n;){n[_t]|=32;const e=Du(n);if(dk(n)&&!e)return n;n=e}return null}function vf(n,e,t,i=!0){const r=e[Oh];r.begin&&r.begin();try{gf(n,e,n.template,t)}catch(o){throw i&&lT(e,o),o}finally{r.end&&r.end()}}function Xy(n,e,t){U_(0),e(n,t)}function sT(n){return n[cl]||(n[cl]=[])}function oT(n){return n.cleanup||(n.cleanup=[])}function lT(n,e){const t=n[Lh],i=t?t.get(Tl,null):null;i&&i.handleError(e)}function Yy(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Ts(n,e,t){const i=Bh(e,n);!function WM(n,e,t){n.setValue(e,t)}(n[bt],i,t)}function bf(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=v_(r,a):2==s&&(i=v_(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function xf(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(zn(s)),Ar(s))for(let a=ui;a<s.length;a++){const l=s[a],c=l[Ce].firstChild;null!==c&&xf(l[Ce],l,c,i)}const o=t.type;if(8&o)xf(n,e,t.child,i);else if(32&o){const a=oy(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=nC(e,t);if(Array.isArray(a))i.push(...a);else{const l=Du(e[Zn]);xf(l[Ce],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class ku{get rootNodes(){const e=this._lView,t=e[Ce];return xf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(e){this._lView[vn]=e}get destroyed(){return 128==(128&this._lView[_t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[fn];if(Ar(e)){const t=e[Uh],i=t?t.indexOf(this):-1;i>-1&&(dy(e,i),Jh(t,i))}this._attachedToViewContainer=!1}qM(this._lView[Ce],this._lView)}onDestroy(e){QC(this._lView[Ce],this._lView,null,e)}markForCheck(){yf(this._cdRefInjectingView||this._lView)}detach(){this._lView[_t]&=-65}reattach(){this._lView[_t]|=64}detectChanges(){vf(this._lView[Ce],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function k3(n,e){Iu(n,e,e[bt],2,null,null)}(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e}}class KV extends ku{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;vf(e[Ce],e,e[vn],!1)}checkNoChanges(){}get context(){return null}}class cT extends Lu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=zt(e);return new Bu(t,this.ngModule)}}function uT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class JV{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Rh(i);const r=this.injector.get(e,Ry,i);return r!==Ry||t===Ry?r:this.parentInjector.get(e,t,i)}}class Bu extends DC{get inputs(){return uT(this.componentDef.inputs)}get outputs(){return uT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function iV(n){return n.map(nV).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ws?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new JV(e,s):e,a=o.get(Ou,null);if(null===a)throw new Z(407,!1);const l=o.get(UB,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function TV(n,e,t){return n.selectRootElement(e,t===Cr.ShadowDom)}(c,i,this.componentDef.encapsulation):uy(c,u,function ZV(n){const e=n.toLowerCase();return"svg"===e?Ww:"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Gy(0,null,null,1,0,null,null,null,null,null),p=mf(null,f,null,h,null,null,a,c,l,o,null);let _,g;k_(p);try{const m=this.componentDef;let b,y=null;m.findHostDirectiveDefs?(b=[],y=new Map,m.findHostDirectiveDefs(m,b,y),b.push(m)):b=[m];const v=function ez(n,e){const t=n[Ce],i=en;return n[i]=e,Il(t,i,2,"#host",null)}(p,d),M=function tz(n,e,t,i,r,s,o,a){const l=r[Ce];!function nz(n,e,t,i){for(const r of n)e.mergedAttrs=bu(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(bf(e,e.mergedAttrs,!0),null!==t&&sC(i,t,e))}(i,n,e,o);const c=s.createRenderer(e,t),u=mf(r,JC(t),null,t.onPush?32:16,r[n.index],n,s,c,a||null,null,null);return l.firstCreatePass&&Wy(l,n,i.length-1),_f(r,u),r[n.index]=u}(v,d,m,b,p,a,c);g=qw(f,en),d&&function rz(n,e,t,i){if(i)H_(n,t,["ng-version",kB.full]);else{const{attrs:r,classes:s}=function rV(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Ir(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&H_(n,t,r),s&&s.length>0&&rC(n,t,s.join(" "))}}(c,m,d,i),void 0!==t&&function sz(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(g,this.ngContentSelectors,t),_=function iz(n,e,t,i,r,s){const o=Hn(),a=r[Ce],l=Hi(o,r);nT(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Jn(ra(r,a,o.directiveStart+u,o),r);iT(a,r,o),l&&Jn(l,r);const c=ra(r,a,o.directiveStart+o.componentOffset,o);if(n[vn]=r[vn]=c,null!==s)for(const u of s)u(c,e);return Vy(a,o,n),c}(M,m,b,y,p,[oz]),By(f,p,null)}finally{B_()}return new QV(this.componentType,_,Cl(g,p),p,g)}}class QV extends RB{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new KV(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;Yy(s[Ce],s,r,e,t),yf(Ci(this._tNode.index,s))}}get injector(){return new gl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function oz(){const n=Hn();Gh(re()[Ce],n)}function $t(n){let e=function dT(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Dr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Ky(n.inputs),o.declaredInputs=Ky(n.declaredInputs),o.outputs=Ky(n.outputs);const a=r.hostBindings;a&&uz(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&lz(n,l),c&&cz(n,c),y_(n.inputs,r.inputs),y_(n.declaredInputs,r.declaredInputs),y_(n.outputs,r.outputs),Dr(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===$t&&(t=!1)}}e=Object.getPrototypeOf(e)}!function az(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=bu(r.hostAttrs,t=bu(t,r.hostAttrs))}}(i)}function Ky(n){return n===ys?{}:n===kt?[]:n}function lz(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function cz(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function uz(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Ef(n){return!!function Zy(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function es(n,e,t){return n[e]=t}function Qn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function la(n,e,t,i){const r=Qn(n,e,t);return Qn(n,e+1,i)||r}function ts(n,e,t,i){const r=re();return Qn(r,pl(),e)&&(Nt(),Qr(an(),r,n,e,t,i)),ts}function Nl(n,e,t,i,r,s){const a=la(n,function xs(){return ut.lFrame.bindingIndex}(),t,r);return Es(2),a?e+ct(t)+i+ct(r)+s:dt}function xt(n,e,t,i,r,s,o,a){const l=re(),c=Nt(),u=n+en,d=c.firstCreatePass?function bz(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Il(e,n,4,o||null,lo(c,a));$y(e,t,u,lo(c,l)),Gh(e,u);const d=u.tView=Gy(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];Kr(d,!1);const h=l[bt].createComment("");rf(c,l,h,d),Jn(h,l),_f(l,l[u]=rT(h,l,h,d)),kh(d)&&zy(c,l,d),null!=o&&Hy(l,d,a)}function Jy(n){return fl(function Ak(){return ut.lFrame.contextLView}(),en+n)}function ke(n,e,t){const i=re();return Qn(i,pl(),e)&&function Wi(n,e,t,i,r,s,o,a){const l=Hi(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(Yy(n,t,u,i,r),_u(e)&&function RV(n,e){const t=Ci(e,n);16&t[_t]||(t[_t]|=32)}(t,e.index)):3&e.type&&(i=function IV(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}(Nt(),an(),i,n,e,i[bt],t,!1),ke}function Qy(n,e,t,i,r){const o=r?"class":"style";Yy(n,t,e.inputs[o],o,i)}function W(n,e,t,i){const r=re(),s=Nt(),o=en+n,a=r[bt],l=s.firstCreatePass?function Ez(n,e,t,i,r,s){const o=e.consts,l=Il(e,n,2,i,lo(o,r));return $y(e,t,l,lo(o,s)),null!==l.attrs&&bf(l,l.attrs,!1),null!==l.mergedAttrs&&bf(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],c=r[o]=uy(a,e,function Uk(){return ut.lFrame.currentNamespace}()),u=kh(l);return Kr(l,!0),sC(a,c,l),32!=(32&l.flags)&&rf(s,r,c,l),0===function Sk(){return ut.lFrame.elementDepthCount}()&&Jn(c,r),function wk(){ut.lFrame.elementDepthCount++}(),u&&(zy(s,r,l),Vy(s,l,r)),null!==i&&Hy(r,l),W}function J(){let n=Hn();N_()?L_():(n=n.parent,Kr(n,!1));const e=n;!function Mk(){ut.lFrame.elementDepthCount--}();const t=Nt();return t.firstCreatePass&&(Gh(t,n),I_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function zk(n){return 0!=(8&n.flags)}(e)&&Qy(t,e,re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Hk(n){return 0!=(16&n.flags)}(e)&&Qy(t,e,re(),e.stylesWithoutHost,!1),J}function Qe(n,e,t,i){return W(n,e,t,i),J(),Qe}function $n(n,e,t){const i=re(),r=Nt(),s=n+en,o=r.firstCreatePass?function Sz(n,e,t,i,r){const s=e.consts,o=lo(s,i),a=Il(e,n,8,"ng-container",o);return null!==o&&bf(a,o,!0),$y(e,t,a,lo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Kr(o,!0);const a=i[s]=i[bt].createComment("");return rf(r,i,a,o),Jn(a,i),kh(o)&&(zy(r,i,o),Vy(r,o,i)),null!=t&&Hy(i,o),$n}function Wn(){let n=Hn();const e=Nt();return N_()?L_():(n=n.parent,Kr(n,!1)),e.firstCreatePass&&(Gh(e,n),I_(n)&&e.queries.elementEnd(n)),Wn}function bn(){return re()}function zu(n){return!!n&&"function"==typeof n.then}const ev=function MT(n){return!!n&&"function"==typeof n.subscribe};function Be(n,e,t,i){const r=re(),s=Nt(),o=Hn();return function TT(n,e,t,i,r,s,o){const a=kh(i),c=n.firstCreatePass&&oT(n),u=e[vn],d=sT(e);let h=!0;if(3&i.type||o){const _=Hi(i,e),g=o?o(_):_,m=d.length,b=o?v=>o(zn(v[i.index])):i.index;let y=null;if(!o&&a&&(y=function wz(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[cl],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,h=!1;else{s=DT(i,e,u,s,!1);const v=t.listen(g,r,s);d.push(s,v),c&&c.push(r,b,m,m+1)}}else s=DT(i,e,u,s,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const _=p.length;if(_)for(let g=0;g<_;g+=2){const M=e[p[g]][p[g+1]].subscribe(s),w=d.length;d.push(s,M),c&&c.push(r,i.index,w,-(w+1))}}}(s,r,r[bt],o,n,e,i),Be}function AT(n,e,t,i){try{return dr(6,e,t),!1!==t(i)}catch(r){return lT(n,r),!1}finally{dr(7,e,t)}}function DT(n,e,t,i,r){return function s(o){if(o===Function)return i;yf(n.componentOffset>-1?Ci(n.index,e):e);let l=AT(e,t,i,o),c=s.__ngNextListenerFn__;for(;c;)l=AT(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Se(n=1){return function Nk(n){return(ut.lFrame.contextLView=function Lk(n,e){for(;n>0;)e=e[ul],n--;return e}(n,ut.lFrame.contextLView))[vn]}(n)}function wf(n,e){return n<<17|e<<2}function uo(n){return n>>17&32767}function nv(n){return 2|n}function ca(n){return(131068&n)>>2}function iv(n,e){return-131069&n|e<<2}function rv(n){return 1|n}function BT(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?uo(s):ca(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];Nz(n[a],e)&&(l=!0,n[a+1]=i?rv(u):nv(u)),a=i?uo(u):ca(u)}l&&(n[t+1]=i?nv(s):rv(s))}function Nz(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&xl(n,e)>=0}const Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VT(n){return n.substring(Nn.key,Nn.keyEnd)}function Lz(n){return n.substring(Nn.value,Nn.valueEnd)}function zT(n,e){const t=Nn.textEnd;return t===e?-1:(e=Nn.keyEnd=function Uz(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Nn.key=e,t),Vl(n,e,t))}function HT(n,e){const t=Nn.textEnd;let i=Nn.key=Vl(n,e,t);return t===i?-1:(i=Nn.keyEnd=function kz(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=$T(n,i,t),i=Nn.value=Vl(n,i,t),i=Nn.valueEnd=function Bz(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const l=n.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=WT(n,l,o,t):e===o-4&&85===s&&82===r&&76===i&&40===l?a=o=WT(n,41,o,t):l>32&&(a=o),s=r,r=i,i=-33&l}return a}(n,i,t),$T(n,i,t))}function GT(n){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=n.length}function Vl(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function $T(n,e,t,i){return(e=Vl(n,e,t))<t&&e++,e}function WT(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Mf(n,e){return function Pr(n,e,t,i){const r=re(),s=Nt(),o=Es(2);s.firstUpdatePass&&XT(s,n,o,i),e!==dt&&Qn(r,o,e)&&KT(s,s.data[hi()],r,r[bt],n,r[o+1]=function Xz(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Yt(co(n)))),n}(e,t),i,o)}(n,e,null,!0),Mf}function Vz(n,e){for(let t=function Fz(n){return GT(n),HT(n,Vl(n,0,Nn.textEnd))}(e);t>=0;t=HT(e,t))YT(n,VT(e),Lz(e))}function ho(n){Nr(jz,ns,n,!0)}function ns(n,e){for(let t=function Oz(n){return GT(n),zT(n,Vl(n,0,Nn.textEnd))}(e);t>=0;t=zT(e,t))Gi(n,VT(e),!0)}function Nr(n,e,t,i){const r=Nt(),s=Es(2);r.firstUpdatePass&&XT(r,null,s,i);const o=re();if(t!==dt&&Qn(o,s,t)){const a=r.data[hi()];if(JT(a,i)&&!qT(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=v_(l,t||"")),Qy(r,a,o,t,i)}else!function qz(n,e,t,i,r,s,o,a){r===dt&&(r=kt);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let _,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,_=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,_=f),null!==p&&KT(n,e,t,i,p,_,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[bt],o[s+1],o[s+1]=function Wz(n,e,t){if(null==t||""===t)return kt;const i=[],r=co(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function qT(n,e){return e>=n.expandoStartIndex}function XT(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[hi()],o=qT(n,t);JT(s,i)&&null===e&&!o&&(e=!1),e=function zz(n,e,t,i){const r=function F_(n){const e=ut.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Hu(t=sv(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=sv(r,n,e,t,i),null===s){let l=function Hz(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==ca(i))return n[uo(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=sv(null,n,e,l[1],i),l=Hu(l,e.attrs,i),function Gz(n,e,t,i){n[uo(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function $z(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Hu(i,n[s].hostAttrs,t);return Hu(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Rz(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=uo(o),l=ca(o);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||xl(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const h=uo(n[a+1]);n[i+1]=wf(h,a),0!==h&&(n[h+1]=iv(n[h+1],i)),n[a+1]=function Dz(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=wf(a,0),0!==a&&(n[a+1]=iv(n[a+1],i)),a=i;else n[i+1]=wf(l,0),0===a?a=i:n[l+1]=iv(n[l+1],i),l=i;c&&(n[i+1]=nv(n[i+1])),BT(n,u,i,!0),BT(n,u,i,!1),function Pz(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&xl(s,e)>=0&&(t[i+1]=rv(t[i+1]))}(e,u,n,i,s),o=wf(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function sv(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Hu(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Hu(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Gi(n,o,!!t||e[++s]))}return void 0===n?null:n}function YT(n,e,t){Gi(n,e,co(t))}function jz(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Gi(n,i,t)}function KT(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function Iz(n){return 1==(1&n)}(c)?ZT(l,e,t,r,ca(c),o):void 0;Cf(u)||(Cf(s)||function Az(n){return 2==(2&n)}(c)&&(s=ZT(l,null,t,r,a,o)),function X3(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Ti.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ti.Important),n.setStyle(t,i,r,s))}}(i,o,Bh(hi(),t),r,s))}function ZT(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===dt&&(h=d?kt:void 0);let f=d?K_(h,i):u===i?h:void 0;if(c&&!Cf(f)&&(f=K_(l,i)),Cf(f)&&(a=f,o))return a;const p=n[r+1];r=o?uo(p):ca(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=K_(l,i))}return a}function Cf(n){return void 0!==n}function JT(n,e){return 0!=(n.flags&(e?8:16))}function De(n,e=""){const t=re(),i=Nt(),r=n+en,s=i.firstCreatePass?Il(i,r,1,e,null):i.data[r],o=t[r]=function cy(n,e){return n.createText(e)}(t[bt],e);rf(i,t,o,s),Kr(s,!1)}function As(n){return zl("",n,""),As}function zl(n,e,t){const i=re(),r=function Pl(n,e,t,i){return Qn(n,pl(),t)?e+ct(t)+i:dt}(i,n,e,t);return r!==dt&&Ts(i,hi(),r),zl}function ov(n,e,t,i,r){const s=re(),o=Nl(s,n,e,t,i,r);return o!==dt&&Ts(s,hi(),o),ov}const ua=void 0;var pH=["en",[["a","p"],["AM","PM"],ua],[["AM","PM"],ua,ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ua,"{1} 'at' {0}",ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fH(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Hl={};function fi(n){const e=function mH(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=yA(e);if(t)return t;const i=e.split("-")[0];if(t=yA(i),t)return t;if("en"===i)return pH;throw new Z(701,!1)}function yA(n){return n in Hl||(Hl[n]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[n]),Hl[n]}var be=(()=>((be=be||{})[be.LocaleId=0]="LocaleId",be[be.DayPeriodsFormat=1]="DayPeriodsFormat",be[be.DayPeriodsStandalone=2]="DayPeriodsStandalone",be[be.DaysFormat=3]="DaysFormat",be[be.DaysStandalone=4]="DaysStandalone",be[be.MonthsFormat=5]="MonthsFormat",be[be.MonthsStandalone=6]="MonthsStandalone",be[be.Eras=7]="Eras",be[be.FirstDayOfWeek=8]="FirstDayOfWeek",be[be.WeekendRange=9]="WeekendRange",be[be.DateFormat=10]="DateFormat",be[be.TimeFormat=11]="TimeFormat",be[be.DateTimeFormat=12]="DateTimeFormat",be[be.NumberSymbols=13]="NumberSymbols",be[be.NumberFormats=14]="NumberFormats",be[be.CurrencyCode=15]="CurrencyCode",be[be.CurrencySymbol=16]="CurrencySymbol",be[be.CurrencyName=17]="CurrencyName",be[be.Currencies=18]="Currencies",be[be.Directionality=19]="Directionality",be[be.PluralCase=20]="PluralCase",be[be.ExtraData=21]="ExtraData",be))();const Gl="en-US";let vA=Gl;function cv(n,e,t,i,r){if(n=Ze(n),Array.isArray(n))for(let s=0;s<n.length;s++)cv(n[s],e,t,i,r);else{const s=Nt(),o=re();let a=aa(n)?n:Ze(n.provide),l=AC(n);const c=Hn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(aa(n)||!n.multi){const f=new vu(l,r,ae),p=dv(a,e,r?u:u+h,d);-1===p?(j_(Yh(c,o),s,a),uv(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=dv(a,e,u+h,d),p=dv(a,e,u,u+h),g=p>=0&&t[p];if(r&&!g||!r&&!(f>=0&&t[f])){j_(Yh(c,o),s,a);const m=function h4(n,e,t,i,r){const s=new vu(n,t,ae);return s.multi=[],s.index=e,s.componentProviders=0,$A(s,r,i&&!t),s}(r?d4:u4,t.length,r,i,l);!r&&g&&(t[p].providerFactory=m),uv(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(m),o.push(m)}else uv(s,n,f>-1?f:p,$A(t[r?p:f],l,!r&&i));!r&&i&&g&&t[p].componentProviders++}}}function uv(n,e,t,i){const r=aa(e),s=function wB(n){return!!n.useClass}(e);if(r||s){const l=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function $A(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function u4(n,e,t,i){return hv(this.multi,[])}function d4(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ra(t,t[Ce],this.providerFactory.index,i);s=a.slice(0,o),hv(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],hv(r,s);return s}function hv(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function nn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function c4(n,e,t){const i=Nt();if(i.firstCreatePass){const r=Dr(n);cv(t,i.data,i.blueprint,r,!0),cv(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class $l{}class WA{}class jA extends $l{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cT(this);const i=Bi(e);this._bootstrapComponents=Cs(i.bootstrap),this._r3Injector=HC(e,t,[{provide:$l,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],Yt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class fv extends WA{constructor(e){super(),this.moduleType=e}create(e){return new jA(this.moduleType,e)}}class p4 extends $l{constructor(e,t,i){super(),this.componentFactoryResolver=new cT(this),this.instance=null;const r=new TC([...e,{provide:$l,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],t||hf(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Rf(n,e,t=null){return new p4(n,e,t).injector}let m4=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=SC(0,t.type),r=i.length>0?Rf([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ge({token:n,providedIn:"environment",factory:()=>new n(ze(ws))}),n})();function qA(n){n.getStandaloneInjector=e=>e.get(m4).getOrCreateStandaloneInjector(n)}function Xu(n,e){const t=n[e];return t===dt?void 0:t}function Wl(n,e){const t=Nt();let i;const r=n+en;t.firstCreatePass?(i=function L4(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=na(i.type)),o=ur(ae);try{const a=Xh(!1),l=s();return Xh(a),function xz(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,re(),r,l),l}finally{ur(o)}}function Yu(n,e,t){const i=n+en,r=re(),s=fl(r,i);return Ku(r,i)?function eD(n,e,t,i,r,s){const o=e+t;return Qn(n,o,r)?es(n,o+1,s?i.call(s,r):i(r)):Xu(n,o+1)}(r,di(),e,s.transform,t,s):s.transform(t)}function sD(n,e,t,i){const r=n+en,s=re(),o=fl(s,r);return Ku(s,r)?function tD(n,e,t,i,r,s,o){const a=e+t;return la(n,a,r,s)?es(n,a+2,o?i.call(o,r,s):i(r,s)):Xu(n,a+2)}(s,di(),e,o.transform,t,i,o):o.transform(t,i)}function Ku(n,e){return n[Ce].data[e].pure}function mv(n){return e=>{setTimeout(n,void 0,e)}}const mn=class k4 extends ms{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=mv(s),r&&(r=mv(r)),o&&(o=mv(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof ar&&e.add(a),a}};function B4(){return this._results[Symbol.iterator]()}class gv{get changes(){return this._changes||(this._changes=new mn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=gv.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=B4)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function hr(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Jk(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ds=(()=>{class n{}return n.__NG_ELEMENT_ID__=H4,n})();const V4=Ds,z4=class extends V4{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tView,r=mf(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[mu]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Yr];return null!==o&&(r[Yr]=o.createEmbeddedView(i)),By(i,r,e),new ku(r)}};function H4(){return Pf(Hn(),re())}function Pf(n,e){return 4&n.type?new z4(e,n,Cl(n,e)):null}let Lr=(()=>{class n{}return n.__NG_ELEMENT_ID__=G4,n})();function G4(){return lD(Hn(),re())}const $4=Lr,oD=class extends $4{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Cl(this._hostTNode,this._hostLView)}get injector(){return new gl(this._hostTNode,this._hostLView)}get parentInjector(){const e=W_(this._hostTNode,this._hostLView);if(dM(e)){const t=qh(e,this._hostLView),i=jh(e);return new gl(t[Ce].data[i+8],t)}return new gl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=aD(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ui}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function Eu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new Bu(zt(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(ws,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[Ce];if(function Ek(n){return Ar(n[fn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[fn],h=new oD(d,d[Kn],d[fn]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function V3(n,e,t,i){const r=ui+i,s=t.length;i>0&&(t[r-1][Tr]=e),i<s-ui?(e[Tr]=t[r],SM(t,ui+i,e)):(t.push(e),e[Tr]=null),e[fn]=t;const o=e[mu];null!==o&&t!==o&&function z3(n,e){const t=n[hl];e[Zn]!==e[fn][fn][Zn]&&(n[Bw]=!0),null===t?n[hl]=[e]:t.push(e)}(o,e);const a=e[Yr];null!==a&&a.insertView(n),e[_t]|=64}(r,i,o,s);const a=py(s,o),l=i[bt],c=nf(l,o[Fh]);return null!==c&&function U3(n,e,t,i,r,s){i[bs]=r,i[Kn]=e,Iu(n,i,t,1,r,s)}(r,o[Kn],l,i,c,a),e.attachToViewContainerRef(),SM(_v(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=aD(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=dy(this._lContainer,t);i&&(Jh(_v(this._lContainer),t),qM(i[Ce],i))}detach(e){const t=this._adjustIndex(e,-1),i=dy(this._lContainer,t);return i&&null!=Jh(_v(this._lContainer),t)?new ku(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function aD(n){return n[Uh]}function _v(n){return n[Uh]||(n[Uh]=[])}function lD(n,e){let t;const i=e[n.index];if(Ar(i))t=i;else{let r;if(8&n.type)r=zn(i);else{const s=e[bt];r=s.createComment("");const o=Hi(n,e);oa(s,nf(s,o),r,function W3(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=rT(i,e,r,n),_f(e,t)}return new oD(t,n,e)}class yv{constructor(e){this.queryList=e,this.matches=null}clone(){return new yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class vv{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new vv(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==pD(e,t).matches&&this.queries[t].setDirty()}}class cD{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class bv{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new bv(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class xv{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new xv(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,W4(t,s)),this.matchTNodeWithReadOption(e,t,Kh(t,e,s,!1,!1))}else i===Ds?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Kh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===$i||r===Lr||r===Ds&&4&t.type)this.addMatch(t.index,-2);else{const s=Kh(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function W4(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function q4(n,e,t,i){return-1===t?function j4(n,e){return 11&n.type?Cl(n,e):4&n.type?Pf(n,e):null}(e,n):-2===t?function X4(n,e,t){return t===$i?Cl(e,n):t===Ds?Pf(e,n):t===Lr?lD(e,n):void 0}(n,e,i):ra(n,n[Ce],t,e)}function uD(n,e,t,i){const r=e[Yr].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:q4(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Ev(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=uD(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=ui;d<u.length;d++){const h=u[d];h[mu]===h[fn]&&Ev(h[Ce],h,c,i)}if(null!==u[hl]){const d=u[hl];for(let h=0;h<d.length;h++){const f=d[h];Ev(f[Ce],f,c,i)}}}}}return i}function Nf(n){const e=re(),t=Nt(),i=tM();U_(i+1);const r=pD(t,i);if(n.dirty&&function xk(n){return 4==(4&n[_t])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Ev(t,e,i,[]):uD(t,e,r,i);n.reset(s,OB),n.notifyOnChanges()}return!0}return!1}function Sv(n,e,t){const i=Nt();i.firstCreatePass&&(function fD(n,e,t){null===n.queries&&(n.queries=new bv),n.queries.track(new xv(e,t))}(i,new cD(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function hD(n,e,t){const i=new gv(4==(4&t));QC(n,e,i,i.destroy),null===e[Yr]&&(e[Yr]=new vv),e[Yr].queries.push(new yv(i))}(i,re(),e)}function Lf(){return function Y4(n,e){return n[Yr].queries[e].queryList}(re(),tM())}function pD(n,e){return n.queries.getByIndex(e)}function Ff(...n){}const Uf=new $e("Application Initializer");let kf=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ff,this.reject=Ff,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(zu(s))t.push(s);else if(ev(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ze(Uf,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ju=new $e("AppId",{providedIn:"root",factory:function PD(){return`${Dv()}${Dv()}${Dv()}`}});function Dv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ND=new $e("Platform Initializer"),LD=new $e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),OD=new $e("AnimationModuleType");let _G=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Is=new $e("LocaleId",{providedIn:"root",factory:()=>It(Is,Je.Optional|Je.SkipSelf)||function yG(){return typeof $localize<"u"&&$localize.locale||Gl}()});class bG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let FD=(()=>{class n{compileModuleSync(t){return new fv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Cs(Bi(t).declarations).reduce((o,a)=>{const l=zt(a);return l&&o.push(new Bu(l)),o},[]);return new bG(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SG=(()=>Promise.resolve(0))();function Iv(n){typeof Zone>"u"?SG.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ln{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mn(!1),this.onMicrotaskEmpty=new mn(!1),this.onStable=new mn(!1),this.onError=new mn(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function wG(){let n=Qt.requestAnimationFrame,e=Qt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function TG(n){const e=()=>{!function CG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Pv(n),n.isCheckStableRunning=!0,Rv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Pv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return BD(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),VD(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return BD(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),VD(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Pv(n),Rv(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ln.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(ln.isInAngularZone())throw new Z(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,MG,Ff,Ff);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const MG={};function Rv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Pv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function BD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VD(n){n._nesting--,Rv(n)}class AG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mn,this.onMicrotaskEmpty=new mn,this.onStable=new mn,this.onError=new mn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const zD=new $e(""),Bf=new $e("");let Ov,Nv=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ov||(function DG(n){Ov=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ln.assertNotInAngularZone(),Iv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iv(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(ze(ln),ze(Lv),ze(Bf))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),Lv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Ov?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rs=!1;let fo=null;const HD=new $e("AllowMultipleToken"),Fv=new $e("PlatformDestroyListeners"),GD=new $e("appBootstrapListener");class $D{constructor(e,t){this.name=e,this.token=t}}function jD(n,e,t=[]){const i=`Platform: ${e}`,r=new $e(i);return(s=[])=>{let o=Uv();if(!o||o.injector.get(HD,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function PG(n){if(fo&&!fo.get(HD,!1))throw new Z(400,!1);fo=n;const e=n.get(XD);(function WD(n){const e=n.get(ND,null);e&&e.forEach(t=>t())})(n)}(function qD(n=[],e){return Jr.create({name:e,providers:[{provide:Ty,useValue:"platform"},{provide:Fv,useValue:new Set([()=>fo=null])},...n]})}(a,i))}return function LG(n){const e=Uv();if(!e)throw new Z(401,!1);return e}()}}function Uv(){return fo?.get(XD)??null}let XD=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function KD(n,e){let t;return t="noop"===n?new AG:("zone.js"===n?void 0:n)||new ln(e),t}(i?.ngZone,function YD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:ln,useValue:r}];return r.run(()=>{const o=Jr.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Tl,null);if(!l)throw new Z(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Vf(this._modules,a),c.unsubscribe()})}),function ZD(n,e,t){try{const i=t();return zu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(kf);return c.runInitializers(),c.donePromise.then(()=>(function bA(n){cr(n,"Expected localeId to be defined"),"string"==typeof n&&(vA=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Is,Gl)||Gl),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=JD({},i);return function IG(n,e,t){const i=new fv(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Z(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Fv,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ze(Jr))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function JD(n,e){return Array.isArray(e)?e.reduce(JD,n):{...n,...e}}let Qu=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new wn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new wn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ln.assertNotInAngularZone(),Iv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ln.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function zU(...n){const e=cu(n),t=function LU(n,e){return"number"==typeof g_(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?lr(i[0]):ol(t)(Mn(i,e)):qr}(s,o.pipe(function HU(n={}){const{connector:e=(()=>new ms),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const _=o;f(),_?.unsubscribe()};return Un((_,g)=>{c++,!d&&!u&&h();const m=l=l??e();g.add(()=>{c--,0===c&&!d&&!u&&(a=__(p,r))}),m.subscribe(g),!o&&c>0&&(o=new lu({next:b=>m.next(b),error:b=>{d=!0,h(),a=__(f,t,b),m.error(b)},complete:()=>{u=!0,h(),a=__(f,i),m.complete()}}),lr(_).subscribe(o))})(s)}}()))}bootstrap(t,i){const r=t instanceof DC;if(!this._injector.get(kf).done){!r&&function ll(n){const e=zt(n)||Yn(n)||Mi(n);return null!==e&&e.standalone}(t);throw new Z(405,Rs)}let o;o=r?t:this._injector.get(Lu).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function RG(n){return n.isBoundToModule}(o)?void 0:this._injector.get($l),c=o.create(Jr.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(zD,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Vf(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Z(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Vf(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(GD,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(ze(ln),ze(ws),ze(Tl))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let zf=(()=>{class n{}return n.__NG_ELEMENT_ID__=FG,n})();function FG(n){return function UG(n,e,t){if(_u(n)&&!t){const i=Ci(n.index,e);return new ku(i,i)}return 47&n.type?new ku(e[Zn],e):null}(Hn(),re(),16==(16&n))}class i1{constructor(){}supports(e){return Ef(e)}create(e){return new GG(e)}}const HG=(n,e)=>e;class GG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||HG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<s1(i,r,s)?t:i,a=s1(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ef(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function _z(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new $G(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new r1),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new r1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class $G{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class r1{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new WG,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function s1(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function a1(){return new $f([new i1])}let $f=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||a1()),deps:[[n,new Mu,new wu]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Z(901,!1)}}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:a1}),n})();const KG=jD(null,"core",[]);let ZG=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ze(Qu))},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({}),n})();function Xl(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Hv=null;function Ps(){return Hv}class e5{}const ei=new $e("DocumentToken");let Gv=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return function t5(){return ze(c1)}()},providedIn:"platform"}),n})();const n5=new $e("Location Initialized");let c1=(()=>{class n extends Gv{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ps().getBaseHref(this._doc)}onPopState(t){const i=Ps().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ps().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){u1()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){u1()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ze(ei))},n.\u0275prov=Ge({token:n,factory:function(){return function i5(){return new c1(ze(ei))}()},providedIn:"platform"}),n})();function u1(){return!!window.history.pushState}function $v(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function d1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ns(n){return n&&"?"!==n[0]?"?"+n:n}let po=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return It(f1)},providedIn:"root"}),n})();const h1=new $e("appBaseHref");let f1=(()=>{class n extends po{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??It(ei).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $v(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ns(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ns(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ns(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ze(Gv),ze(h1,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),p1=(()=>{class n extends po{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=$v(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ns(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ns(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ze(Gv),ze(h1,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),Wv=(()=>{class n{constructor(t){this._subject=new mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function o5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(d1(m1(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ns(i))}normalize(t){return n.stripTrailingSlash(function s5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,m1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ns(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ns(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ns,n.joinWithSlash=$v,n.stripTrailingSlash=d1,n.\u0275fac=function(t){return new(t||n)(ze(po))},n.\u0275prov=Ge({token:n,factory:function(){return function r5(){return new Wv(ze(po))}()},providedIn:"root"}),n})();function m1(n){return n.replace(/\/index.html$/,"")}var xn=(()=>((xn=xn||{})[xn.Format=0]="Format",xn[xn.Standalone=1]="Standalone",xn))(),At=(()=>((At=At||{})[At.Narrow=0]="Narrow",At[At.Abbreviated=1]="Abbreviated",At[At.Wide=2]="Wide",At[At.Short=3]="Short",At))(),cn=(()=>((cn=cn||{})[cn.Short=0]="Short",cn[cn.Medium=1]="Medium",cn[cn.Long=2]="Long",cn[cn.Full=3]="Full",cn))(),je=(()=>((je=je||{})[je.Decimal=0]="Decimal",je[je.Group=1]="Group",je[je.List=2]="List",je[je.PercentSign=3]="PercentSign",je[je.PlusSign=4]="PlusSign",je[je.MinusSign=5]="MinusSign",je[je.Exponential=6]="Exponential",je[je.SuperscriptingExponent=7]="SuperscriptingExponent",je[je.PerMille=8]="PerMille",je[je.Infinity=9]="Infinity",je[je.NaN=10]="NaN",je[je.TimeSeparator=11]="TimeSeparator",je[je.CurrencyDecimal=12]="CurrencyDecimal",je[je.CurrencyGroup=13]="CurrencyGroup",je))();function Wf(n,e){return mr(fi(n)[be.DateFormat],e)}function jf(n,e){return mr(fi(n)[be.TimeFormat],e)}function qf(n,e){return mr(fi(n)[be.DateTimeFormat],e)}function pr(n,e){const t=fi(n),i=t[be.NumberSymbols][e];if(typeof i>"u"){if(e===je.CurrencyDecimal)return t[be.NumberSymbols][je.Decimal];if(e===je.CurrencyGroup)return t[be.NumberSymbols][je.Group]}return i}function _1(n){if(!n[be.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[be.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function mr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function qv(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const v5=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,td={},b5=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ln=(()=>((Ln=Ln||{})[Ln.Short=0]="Short",Ln[Ln.ShortGMT=1]="ShortGMT",Ln[Ln.Long=2]="Long",Ln[Ln.Extended=3]="Extended",Ln))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),yt=(()=>((yt=yt||{})[yt.DayPeriods=0]="DayPeriods",yt[yt.Days=1]="Days",yt[yt.Months=2]="Months",yt[yt.Eras=3]="Eras",yt))();function x5(n,e,t,i){let r=function I5(n){if(b1(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return Xf(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(v5))return function R5(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,c),e}(i)}const e=new Date(n);if(!b1(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ls(t,e)||e;let a,o=[];for(;e;){if(a=b5.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let l=r.getTimezoneOffset();i&&(l=v1(i,l),r=function D5(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function A5(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(v1(e,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const d=function T5(n){if(Yv[n])return Yv[n];let e;switch(n){case"G":case"GG":case"GGG":e=Zt(yt.Eras,At.Abbreviated);break;case"GGGG":e=Zt(yt.Eras,At.Wide);break;case"GGGGG":e=Zt(yt.Eras,At.Narrow);break;case"y":e=An(et.FullYear,1,0,!1,!0);break;case"yy":e=An(et.FullYear,2,0,!0,!0);break;case"yyy":e=An(et.FullYear,3,0,!1,!0);break;case"yyyy":e=An(et.FullYear,4,0,!1,!0);break;case"Y":e=Jf(1);break;case"YY":e=Jf(2,!0);break;case"YYY":e=Jf(3);break;case"YYYY":e=Jf(4);break;case"M":case"L":e=An(et.Month,1,1);break;case"MM":case"LL":e=An(et.Month,2,1);break;case"MMM":e=Zt(yt.Months,At.Abbreviated);break;case"MMMM":e=Zt(yt.Months,At.Wide);break;case"MMMMM":e=Zt(yt.Months,At.Narrow);break;case"LLL":e=Zt(yt.Months,At.Abbreviated,xn.Standalone);break;case"LLLL":e=Zt(yt.Months,At.Wide,xn.Standalone);break;case"LLLLL":e=Zt(yt.Months,At.Narrow,xn.Standalone);break;case"w":e=Xv(1);break;case"ww":e=Xv(2);break;case"W":e=Xv(1,!0);break;case"d":e=An(et.Date,1);break;case"dd":e=An(et.Date,2);break;case"c":case"cc":e=An(et.Day,1);break;case"ccc":e=Zt(yt.Days,At.Abbreviated,xn.Standalone);break;case"cccc":e=Zt(yt.Days,At.Wide,xn.Standalone);break;case"ccccc":e=Zt(yt.Days,At.Narrow,xn.Standalone);break;case"cccccc":e=Zt(yt.Days,At.Short,xn.Standalone);break;case"E":case"EE":case"EEE":e=Zt(yt.Days,At.Abbreviated);break;case"EEEE":e=Zt(yt.Days,At.Wide);break;case"EEEEE":e=Zt(yt.Days,At.Narrow);break;case"EEEEEE":e=Zt(yt.Days,At.Short);break;case"a":case"aa":case"aaa":e=Zt(yt.DayPeriods,At.Abbreviated);break;case"aaaa":e=Zt(yt.DayPeriods,At.Wide);break;case"aaaaa":e=Zt(yt.DayPeriods,At.Narrow);break;case"b":case"bb":case"bbb":e=Zt(yt.DayPeriods,At.Abbreviated,xn.Standalone,!0);break;case"bbbb":e=Zt(yt.DayPeriods,At.Wide,xn.Standalone,!0);break;case"bbbbb":e=Zt(yt.DayPeriods,At.Narrow,xn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Zt(yt.DayPeriods,At.Abbreviated,xn.Format,!0);break;case"BBBB":e=Zt(yt.DayPeriods,At.Wide,xn.Format,!0);break;case"BBBBB":e=Zt(yt.DayPeriods,At.Narrow,xn.Format,!0);break;case"h":e=An(et.Hours,1,-12);break;case"hh":e=An(et.Hours,2,-12);break;case"H":e=An(et.Hours,1);break;case"HH":e=An(et.Hours,2);break;case"m":e=An(et.Minutes,1);break;case"mm":e=An(et.Minutes,2);break;case"s":e=An(et.Seconds,1);break;case"ss":e=An(et.Seconds,2);break;case"S":e=An(et.FractionalSeconds,1);break;case"SS":e=An(et.FractionalSeconds,2);break;case"SSS":e=An(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Kf(Ln.Short);break;case"ZZZZZ":e=Kf(Ln.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Kf(Ln.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Kf(Ln.Long);break;default:return null}return Yv[n]=e,e}(u);c+=d?d(r,t,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Xf(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Ls(n,e){const t=function a5(n){return fi(n)[be.LocaleId]}(n);if(td[t]=td[t]||{},td[t][e])return td[t][e];let i="";switch(e){case"shortDate":i=Wf(n,cn.Short);break;case"mediumDate":i=Wf(n,cn.Medium);break;case"longDate":i=Wf(n,cn.Long);break;case"fullDate":i=Wf(n,cn.Full);break;case"shortTime":i=jf(n,cn.Short);break;case"mediumTime":i=jf(n,cn.Medium);break;case"longTime":i=jf(n,cn.Long);break;case"fullTime":i=jf(n,cn.Full);break;case"short":const r=Ls(n,"shortTime"),s=Ls(n,"shortDate");i=Yf(qf(n,cn.Short),[r,s]);break;case"medium":const o=Ls(n,"mediumTime"),a=Ls(n,"mediumDate");i=Yf(qf(n,cn.Medium),[o,a]);break;case"long":const l=Ls(n,"longTime"),c=Ls(n,"longDate");i=Yf(qf(n,cn.Long),[l,c]);break;case"full":const u=Ls(n,"fullTime"),d=Ls(n,"fullDate");i=Yf(qf(n,cn.Full),[u,d])}return i&&(td[t][e]=i),i}function Yf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Fr(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function An(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function S5(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===et.Hours)0===a&&-12===t&&(a=12);else if(n===et.FractionalSeconds)return function E5(n,e){return Fr(n,3).substring(0,e)}(a,e);const l=pr(o,je.MinusSign);return Fr(a,e,l,i,r)}}function Zt(n,e,t=xn.Format,i=!1){return function(r,s){return function w5(n,e,t,i,r,s){switch(t){case yt.Months:return function u5(n,e,t){const i=fi(n),s=mr([i[be.MonthsFormat],i[be.MonthsStandalone]],e);return mr(s,t)}(e,r,i)[n.getMonth()];case yt.Days:return function c5(n,e,t){const i=fi(n),s=mr([i[be.DaysFormat],i[be.DaysStandalone]],e);return mr(s,t)}(e,r,i)[n.getDay()];case yt.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function p5(n){const e=fi(n);return _1(e),(e[be.ExtraData][2]||[]).map(i=>"string"==typeof i?qv(i):[qv(i[0]),qv(i[1])])}(e),u=function m5(n,e,t){const i=fi(n);_1(i);const s=mr([i[be.ExtraData][0],i[be.ExtraData][1]],e)||[];return mr(s,t)||[]}(e,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,_=o>=f.hours&&a>=f.minutes,g=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(_&&g)return!0}else if(_||g)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function l5(n,e,t){const i=fi(n),s=mr([i[be.DayPeriodsFormat],i[be.DayPeriodsStandalone]],e);return mr(s,t)}(e,r,i)[o<12?0:1];case yt.Eras:return function d5(n,e){return mr(fi(n)[be.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function Kf(n){return function(e,t,i){const r=-1*i,s=pr(t,je.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Ln.Short:return(r>=0?"+":"")+Fr(o,2,s)+Fr(Math.abs(r%60),2,s);case Ln.ShortGMT:return"GMT"+(r>=0?"+":"")+Fr(o,1,s);case Ln.Long:return"GMT"+(r>=0?"+":"")+Fr(o,2,s)+":"+Fr(Math.abs(r%60),2,s);case Ln.Extended:return 0===i?"Z":(r>=0?"+":"")+Fr(o,2,s)+":"+Fr(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const M5=0,Zf=4;function y1(n){return Xf(n.getFullYear(),n.getMonth(),n.getDate()+(Zf-n.getDay()))}function Xv(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=y1(t),o=function C5(n){const e=Xf(n,M5,1).getDay();return Xf(n,0,1+(e<=Zf?Zf:Zf+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Fr(r,n,pr(i,je.MinusSign))}}function Jf(n,e=!1){return function(t,i){return Fr(y1(t).getFullYear(),n,pr(i,je.MinusSign),e)}}const Yv={};function v1(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function b1(n){return n instanceof Date&&!isNaN(n.valueOf())}class j5{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let T1=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new j5(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),A1(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{A1(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(ae(Lr),ae(Ds),ae($f))},n.\u0275dir=st({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function A1(n,e){n.context.$implicit=e.item}let ep=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new X5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(ae(Lr),ae(Ds))},n.\u0275dir=st({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class X5{constructor(){this.$implicit=null,this.ngIf=null}}function D1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Yt(e)}'.`)}function Ur(n,e){return new Z(2100,!1)}let s0=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Ur();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=wi({name:"uppercase",type:n,pure:!0,standalone:!0}),n})();const o$=new $e("DATE_PIPE_DEFAULT_TIMEZONE"),a$=new $e("DATE_PIPE_DEFAULT_OPTIONS");let R1=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return x5(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Ur()}}}return n.\u0275fac=function(t){return new(t||n)(ae(Is,16),ae(o$,24),ae(a$,24))},n.\u0275pipe=wi({name:"date",type:n,pure:!0,standalone:!0}),n})(),tp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({}),n})();let b$=(()=>{class n{}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:()=>new x$(ze(ei),window)}),n})();class x${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function E$(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=L1(this.window.history)||L1(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function L1(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class K$ extends e5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class u0 extends K${static makeCurrent(){!function QG(n){Hv||(Hv=n)}(new u0)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Z$(){return rd=rd||document.querySelector("base"),rd?rd.getAttribute("href"):null}();return null==t?null:function J$(n){rp=rp||document.createElement("a"),rp.setAttribute("href",n);const e=rp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function G5(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let rp,rd=null;const B1=new $e("TRANSITION_ID"),eW=[{provide:Uf,useFactory:function Q$(n,e,t){return()=>{t.get(kf).donePromise.then(()=>{const i=Ps(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[B1,ei,Jr],multi:!0}];let nW=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const sp=new $e("EventManagerPlugins");let op=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ze(sp),ze(ln))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class V1{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Ps().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let z1=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),sd=(()=>{class n extends z1{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(ze(ei))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const d0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},h0=/%COMP%/g,$1=new $e("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function W1(n,e){return e.flat(100).map(t=>t.replace(h0,n))}function j1(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ap=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new f0(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof Y1?r.applyToHost(t):r instanceof p0&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case Cr.Emulated:s=new Y1(o,a,i,this.appId,l);break;case Cr.ShadowDom:return new cW(o,a,t,i);default:s=new p0(o,a,i,l)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ze(op),ze(sd),ze(Ju),ze($1))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class f0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(d0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(X1(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(X1(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=d0[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=d0[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ti.DashCase|Ti.Important)?e.style.setProperty(t,i,r&Ti.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,j1(i)):this.eventManager.addEventListener(e,t,j1(i))}}function X1(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class cW extends f0{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=W1(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class p0 extends f0{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=W1(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Y1 extends p0{constructor(e,t,i,r,s){const o=r+"-"+i.id;super(e,t,i,s,o),this.contentAttr=function oW(n){return"_ngcontent-%COMP%".replace(h0,n)}(o),this.hostAttr=function aW(n){return"_nghost-%COMP%".replace(h0,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let uW=(()=>{class n extends V1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(ze(ei))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const K1=["alt","control","meta","shift"],dW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hW={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fW=(()=>{class n extends V1{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ps().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),K1.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=dW[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),K1.forEach(o=>{o!==r&&(0,hW[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ze(ei))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const _W=jD(KG,"browser",[{provide:LD,useValue:"browser"},{provide:ND,useValue:function pW(){u0.makeCurrent()},multi:!0},{provide:ei,useFactory:function gW(){return function Q3(n){yy=n}(document),document},deps:[]}]),Q1=new $e(""),eI=[{provide:Bf,useClass:class tW{addToWindow(e){Qt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qt.getAllAngularRootElements=()=>e.getAllRootElements(),Qt.frameworkStabilizers||(Qt.frameworkStabilizers=[]),Qt.frameworkStabilizers.push(i=>{const r=Qt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ps().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:zD,useClass:Nv,deps:[ln,Lv,Bf]},{provide:Nv,useClass:Nv,deps:[ln,Lv,Bf]}],tI=[{provide:Ty,useValue:"root"},{provide:Tl,useFactory:function mW(){return new Tl},deps:[]},{provide:sp,useClass:uW,multi:!0,deps:[ei,ln,LD]},{provide:sp,useClass:fW,multi:!0,deps:[ei]},{provide:ap,useClass:ap,deps:[op,sd,Ju,$1]},{provide:Ou,useExisting:ap},{provide:z1,useExisting:sd},{provide:sd,useClass:sd,deps:[ei]},{provide:op,useClass:op,deps:[sp,ln]},{provide:class S${},useClass:nW,deps:[]},[]];let nI=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ju,useValue:t.appId},{provide:B1,useExisting:Ju},eW]}}}return n.\u0275fac=function(t){return new(t||n)(ze(Q1,12))},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({providers:[...tI,...eI],imports:[tp,ZG]}),n})(),iI=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(ze(ei))},n.\u0275prov=Ge({token:n,factory:function(t){let i=null;return i=t?new t:function vW(){return new iI(ze(ei))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;class oI{}class MW{}const Os="*";function aI(n,e=null){return{type:2,steps:n,options:e}}function lI(n){return{type:6,styles:n,offset:null}}function cI(n){Promise.resolve().then(n)}class od{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cI(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class uI{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?cI(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const _0="!";function dI(n){return new Z(3e3,!1)}function o8(){return typeof window<"u"&&typeof window.document<"u"}function y0(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function go(n){switch(n.length){case 0:return new od;case 1:return n[0];default:return new uI(n)}}function hI(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((p,_)=>{let g=_,m=p;if("offset"!==_)switch(g=e.normalizePropertyName(g,o),m){case _0:m=r.get(_);break;case Os:m=s.get(_);break;default:m=e.normalizeStyleValue(_,g,m,o)}f.set(g,m)}),h||a.push(f),c=f,l=d}),o.length)throw function XW(n){return new Z(3502,!1)}();return a}function v0(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&b0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&b0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&b0(t,"destroy",n)))}}function b0(n,e,t){const s=x0(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function x0(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ji(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function fI(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let E0=(n,e)=>!1,pI=(n,e,t)=>[],mI=null;function S0(n){const e=n.parentNode||n.host;return e===mI?null:e}(y0()||typeof Element<"u")&&(o8()?(mI=(()=>document.documentElement)(),E0=(n,e)=>{for(;e;){if(e===n)return!0;e=S0(e)}return!1}):E0=(n,e)=>n.contains(e),pI=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let ha=null,gI=!1;const _I=E0,yI=pI;let vI=(()=>{class n{validateStyleProperty(t){return function l8(n){ha||(ha=function c8(){return typeof document<"u"?document.body:null}()||{},gI=!!ha.style&&"WebkitAppearance"in ha.style);let e=!0;return ha.style&&!function a8(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ha.style,!e&&gI&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ha.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return _I(t,i)}getParentElement(t){return S0(t)}query(t,i,r){return yI(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new od(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),w0=(()=>{class n{}return n.NOOP=new vI,n})();const u8=1e3,M0="ng-enter",lp="ng-leave",cp="ng-trigger",up=".ng-trigger",xI="ng-animating",C0=".ng-animating";function Fs(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:T0(parseFloat(e[1]),e[2])}function T0(n,e){return"s"===e?n*u8:n}function dp(n,e,t){return n.hasOwnProperty("duration")?n:function h8(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(dI()),{duration:0,delay:0,easing:""};r=T0(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=T0(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function CW(){return new Z(3100,!1)}()),a=!0),s<0&&(e.push(function TW(){return new Z(3101,!1)}()),a=!0),a&&e.splice(l,0,dI())}return{duration:r,delay:s,easing:o}}(n,e,t)}function ad(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function EI(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function _o(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function wI(n,e,t){return t?e+":"+t+";":""}function MI(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=wI(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=wI(0,g8(t),n.style[t]));n.setAttribute("style",e)}function is(n,e,t){n.style&&(e.forEach((i,r)=>{const s=D0(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),y0()&&MI(n))}function fa(n,e){n.style&&(e.forEach((t,i)=>{const r=D0(i);n.style[r]=""}),y0()&&MI(n))}function ld(n){return Array.isArray(n)?1==n.length?n[0]:aI(n):n}const A0=new RegExp("{{\\s*(.+?)\\s*}}","g");function CI(n){let e=[];if("string"==typeof n){let t;for(;t=A0.exec(n);)e.push(t[1]);A0.lastIndex=0}return e}function cd(n,e,t){const i=n.toString(),r=i.replace(A0,(s,o)=>{let a=e[o];return null==a&&(t.push(function DW(n){return new Z(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function hp(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const m8=/-+([a-z0-9])/g;function D0(n){return n.replace(m8,(...e)=>e[1].toUpperCase())}function g8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function IW(n){return new Z(3004,!1)}()}}function TI(n,e){return window.getComputedStyle(n)[e]}const mp="*";function E8(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function S8(n,e,t){if(":"==n[0]){const l=function w8(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function $W(n){return new Z(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function GW(n){return new Z(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(AI(r,o));"<"==s[0]&&!(r==mp&&o==mp)&&e.push(AI(o,r))}(i,t,e)):t.push(n),t}const gp=new Set(["true","1"]),_p=new Set(["false","0"]);function AI(n,e){const t=gp.has(n)||_p.has(n),i=gp.has(e)||_p.has(e);return(r,s)=>{let o=n==mp||n==r,a=e==mp||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?gp.has(n):_p.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?gp.has(e):_p.has(e)),o&&a}}const M8=new RegExp("s*:selfs*,?","g");function I0(n,e,t,i){return new C8(n).build(e,t,i)}class C8{constructor(e){this._driver=e}build(e,t,i){const r=new D8(t);return this._resetContextStyleTimingState(r),qi(this,ld(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function PW(){return new Z(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function NW(){return new Z(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{CI(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(hp(s.values()),t.errors.push(function LW(n,e){return new Z(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=qi(this,ld(e.animation),t);return{type:1,matchers:E8(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:pa(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>qi(this,i,t)),options:pa(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=qi(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:pa(e.options)}}visitAnimate(e,t){const i=function R8(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return R0(dp(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=R0(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=dp(t,e);return R0(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:lI({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=lI(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Os?i.push(a):t.errors.push(new Z(3002,!1)):i.push(EI(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function FW(n,e,t,i,r){return new Z(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function p8(n,e,t){const i=e.params||{},r=CI(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function AW(n){return new Z(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function UW(){return new Z(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(m=>{const b=this._makeStyleAst(m,t);let y=null!=b.offset?b.offset:function I8(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),v=0;return null!=y&&(s++,v=b.offset=y),l=l||v<0||v>1,a=a||v<c,c=v,o.push(v),b});l&&t.errors.push(function kW(){return new Z(3012,!1)}()),a&&t.errors.push(function BW(){return new Z(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function VW(){return new Z(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,_=t.currentAnimateTimings,g=_.duration;return u.forEach((m,b)=>{const y=h>0?b==f?1:h*b:o[b],v=y*g;t.currentTime=p+_.delay+v,_.duration=v,this._validateStyleAst(m,t),m.offset=y,i.styles.push(m)}),i}visitReference(e,t){return{type:8,animation:qi(this,ld(e.animation),t),options:pa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:pa(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:pa(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function T8(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(M8,"")),n=n.replace(/@\*/g,up).replace(/@\w+/g,t=>up+"-"+t.slice(1)).replace(/:animating/g,C0),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ji(t.collectedStyles,t.currentQuerySelector,new Map);const a=qi(this,ld(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:pa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function zW(){return new Z(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:dp(e.timings,t.errors,!0);return{type:12,animation:qi(this,ld(e.animation),t),timings:i,options:null}}}class D8{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function pa(n){return n?(n=ad(n)).params&&(n.params=function A8(n){return n?ad(n):null}(n.params)):n={},n}function R0(n,e,t){return{duration:n,delay:e,easing:t}}function P0(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class yp{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const L8=new RegExp(":enter","g"),F8=new RegExp(":leave","g");function N0(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new U8).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class U8{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new yp;const d=new L0(e,t,c,r,s,u,[]);d.options=l;const h=l.delay?Fs(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),qi(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let _=f.length-1;_>=0;_--){const g=f[_];if(g.element===t){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[P0(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Fs(cd(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Fs(i.duration):null,a=null!=i.delay?Fs(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),qi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vp);const o=Fs(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>qi(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Fs(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),qi(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return dp(t.params?cd(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Fs(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vp);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),qi(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;qi(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const vp={};class L0{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new bp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Fs(i.duration)),null!=i.delay&&(r.delay=Fs(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=cd(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new L0(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new k8(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(L8,"."+this._enterClassName)).replace(F8,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function HW(n){return new Z(3014,!1)}()),a}}class bp{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new bp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Os),this._currentKeyframe.set(t,Os);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function B8(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Os)}else _o(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=cd(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Os),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=_o(a,new Map,this._backFill);c.forEach((u,d)=>{u===_0?e.add(d):u===Os&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?hp(e.values()):[],o=t.size?hp(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return P0(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class k8 extends bp{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=_o(e[0]);l.set("offset",0),s.push(l);const c=_o(e[0]);c.set("offset",RI(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=_o(e[d]);const f=h.get("offset");h.set("offset",RI((t+f*i)/o)),s.push(h)}i=o,t=0,r="",e=s}return P0(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function RI(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class O0{}const V8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class z8 extends O0{normalizePropertyName(e,t){return D0(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(V8.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function RW(n,e){return new Z(3005,!1)}())}return o+s}}function PI(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const F0={};class NI{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function H8(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||F0,p=this.buildStyles(i,a&&a.params||F0,d),_=l&&l.params||F0,g=this.buildStyles(r,_,d),m=new Set,b=new Map,y=new Map,v="void"===r,M={params:G8(_,h),delay:this.ast.options?.delay},w=u?[]:N0(e,t,this.ast.animation,s,o,p,g,M,c,d);let A=0;if(w.forEach(S=>{A=Math.max(S.duration+S.delay,A)}),d.length)return PI(t,this._triggerName,i,r,v,p,g,[],[],b,y,A,d);w.forEach(S=>{const E=S.element,R=ji(b,E,new Set);S.preStyleProps.forEach(B=>R.add(B));const z=ji(y,E,new Set);S.postStyleProps.forEach(B=>z.add(B)),E!==t&&m.add(E)});const I=hp(m.values());return PI(t,this._triggerName,i,r,v,p,g,w,I,b,y,A)}}function G8(n,e){const t=ad(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class $8{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=ad(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=cd(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class j8{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new $8(r.style,r.options&&r.options.params||{},i))}),LI(this.states,"true","1"),LI(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new NI(e,r,this.states))}),this.fallbackTransition=function q8(n,e,t){return new NI(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function LI(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const X8=new yp;class Y8{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=I0(this._driver,t,i,r);if(i.length)throw function YW(n){return new Z(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=hI(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=N0(this._driver,t,s,M0,lp,new Map,new Map,i,X8,r),o.forEach(u=>{const d=ji(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function KW(){return new Z(3300,!1)}()),o=[]),r.length)throw function ZW(n){return new Z(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Os))})});const c=go(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function JW(n){return new Z(3301,!1)}();return t}listen(e,t,i,r){const s=x0(t,"","","");return v0(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const OI="ng-animate-queued",U0="ng-animate-disabled",e6=[],FI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},t6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},gr="__ng_removed";class k0{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function s6(n){return n??null}(i?e.value:e),i){const s=ad(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const ud="void",B0=new k0(ud);class n6{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,_r(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function QW(n,e){return new Z(3302,!1)}();if(null==i||0==i.length)throw function e8(n){return new Z(3303,!1)}();if(!function o6(n){return"start"==n||"done"==n}(i))throw function t8(n,e){return new Z(3400,!1)}();const s=ji(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=ji(this._engine.statesByElement,e,new Map);return a.has(t)||(_r(e,cp),_r(e,cp+"-"+t),a.set(t,B0)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function n8(n){return new Z(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new V0(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(_r(e,cp),_r(e,cp+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new k0(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=B0),c.value!==ud&&l.value===c.value){if(!function c6(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const _=[],g=s.matchStyles(l.value,l.params,_),m=s.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{fa(e,g),is(e,m)})}return}const h=ji(this._engine.playersByElement,e,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(_r(e,OI),o.onStart(()=>{Yl(e,OI)})),o.onDone(()=>{let _=this.players.indexOf(o);_>=0&&this.players.splice(_,1);const g=this._engine.playersByElement.get(e);if(g){let m=g.indexOf(o);m>=0&&g.splice(m,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,up,!0);i.forEach(r=>{if(r[gr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,ud,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&go(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||B0,u=new k0(ud),d=new V0(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[gr];(!s||s===FI)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){_r(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=x0(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,v0(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class i6{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new n6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(xp(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!xp(t))return;const s=t[gr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),_r(e,U0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Yl(e,U0))}removeNode(e,t,i,r){if(xp(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[gr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return xp(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,up,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,C0,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return go(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[gr];if(t&&t.setForRemoval){if(e[gr]=FI,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(U0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)_r(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?go(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function i8(n){return new Z(3402,!1)}()}_flushAnimations(e,t){const i=new yp,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(N=>{u.add(N);const V=this.driver.query(N,".ng-animate-queued",!0);for(let L=0;L<V.length;L++)u.add(V[L])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=BI(h,this.collectedEnterElements),p=new Map;let _=0;f.forEach((N,V)=>{const L=M0+_++;p.set(V,L),N.forEach(ne=>_r(ne,L))});const g=[],m=new Set,b=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const V=this.collectedLeaveElements[N],L=V[gr];L&&L.setForRemoval&&(g.push(V),m.add(V),L.hasAnimation?this.driver.query(V,".ng-star-inserted",!0).forEach(ne=>m.add(ne)):b.add(V))}const y=new Map,v=BI(h,Array.from(m));v.forEach((N,V)=>{const L=lp+_++;y.set(V,L),N.forEach(ne=>_r(ne,L))}),e.push(()=>{f.forEach((N,V)=>{const L=p.get(V);N.forEach(ne=>Yl(ne,L))}),v.forEach((N,V)=>{const L=y.get(V);N.forEach(ne=>Yl(ne,L))}),g.forEach(N=>{this.processLeaveNode(N)})});const M=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(L=>{const ne=L.player,he=L.element;if(M.push(ne),this.collectedEnterElements.length){const de=he[gr];if(de&&de.setForMove){if(de.previousTriggersValues&&de.previousTriggersValues.has(L.triggerName)){const Re=de.previousTriggersValues.get(L.triggerName),Xe=this.statesByElement.get(L.element);if(Xe&&Xe.has(L.triggerName)){const He=Xe.get(L.triggerName);He.value=Re,Xe.set(L.triggerName,He)}}return void ne.destroy()}}const _e=!d||!this.driver.containsElement(d,he),Ue=y.get(he),ft=p.get(he),H=this._buildInstruction(L,i,ft,Ue,_e);if(H.errors&&H.errors.length)return void w.push(H);if(_e)return ne.onStart(()=>fa(he,H.fromStyles)),ne.onDestroy(()=>is(he,H.toStyles)),void r.push(ne);if(L.isFallbackTransition)return ne.onStart(()=>fa(he,H.fromStyles)),ne.onDestroy(()=>is(he,H.toStyles)),void r.push(ne);const ue=[];H.timelines.forEach(de=>{de.stretchStartingKeyframe=!0,this.disabledNodes.has(de.element)||ue.push(de)}),H.timelines=ue,i.append(he,H.timelines),o.push({instruction:H,player:ne,element:he}),H.queriedElements.forEach(de=>ji(a,de,[]).push(ne)),H.preStyleProps.forEach((de,Re)=>{if(de.size){let Xe=l.get(Re);Xe||l.set(Re,Xe=new Set),de.forEach((He,Ct)=>Xe.add(Ct))}}),H.postStyleProps.forEach((de,Re)=>{let Xe=c.get(Re);Xe||c.set(Re,Xe=new Set),de.forEach((He,Ct)=>Xe.add(Ct))})});if(w.length){const N=[];w.forEach(V=>{N.push(function r8(n,e){return new Z(3505,!1)}())}),M.forEach(V=>V.destroy()),this.reportError(N)}const A=new Map,I=new Map;o.forEach(N=>{const V=N.element;i.has(V)&&(I.set(V,V),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,A))}),r.forEach(N=>{const V=N.element;this._getPreviousPlayers(V,!1,N.namespaceId,N.triggerName,null).forEach(ne=>{ji(A,V,[]).push(ne),ne.destroy()})});const S=g.filter(N=>zI(N,l,c)),E=new Map;kI(E,this.driver,b,c,Os).forEach(N=>{zI(N,l,c)&&S.push(N)});const z=new Map;f.forEach((N,V)=>{kI(z,this.driver,new Set(N),l,_0)}),S.forEach(N=>{const V=E.get(N),L=z.get(N);E.set(N,new Map([...Array.from(V?.entries()??[]),...Array.from(L?.entries()??[])]))});const B=[],j=[],Q={};o.forEach(N=>{const{element:V,player:L,instruction:ne}=N;if(i.has(V)){if(u.has(V))return L.onDestroy(()=>is(V,ne.toStyles)),L.disabled=!0,L.overrideTotalTime(ne.totalTime),void r.push(L);let he=Q;if(I.size>1){let Ue=V;const ft=[];for(;Ue=Ue.parentNode;){const H=I.get(Ue);if(H){he=H;break}ft.push(Ue)}ft.forEach(H=>I.set(H,he))}const _e=this._buildAnimation(L.namespaceId,ne,A,s,z,E);if(L.setRealPlayer(_e),he===Q)B.push(L);else{const Ue=this.playersByElement.get(he);Ue&&Ue.length&&(L.parentPlayer=go(Ue)),r.push(L)}}else fa(V,ne.fromStyles),L.onDestroy(()=>is(V,ne.toStyles)),j.push(L),u.has(V)&&r.push(L)}),j.forEach(N=>{const V=s.get(N.element);if(V&&V.length){const L=go(V);N.setRealPlayer(L)}}),r.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<g.length;N++){const V=g[N],L=V[gr];if(Yl(V,lp),L&&L.hasAnimation)continue;let ne=[];if(a.size){let _e=a.get(V);_e&&_e.length&&ne.push(..._e);let Ue=this.driver.query(V,C0,!0);for(let ft=0;ft<Ue.length;ft++){let H=a.get(Ue[ft]);H&&H.length&&ne.push(...H)}}const he=ne.filter(_e=>!_e.destroyed);he.length?a6(this,V,he):this.processLeaveNode(V)}return g.length=0,B.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();const V=this.players.indexOf(N);this.players.splice(V,1)}),N.play()}),B}elementContainsData(e,t){let i=!1;const r=t[gr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==ud;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=ji(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}fa(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const _=p.element;u.add(_);const g=_[gr];if(g&&g.removedBeforeQueried)return new od(p.duration,p.delay);const m=_!==l,b=function l6(n){const e=[];return VI(n,e),e}((i.get(_)||e6).map(A=>A.getRealPlayer())).filter(A=>!!A.element&&A.element===_),y=s.get(_),v=o.get(_),M=hI(0,this._normalizer,0,p.keyframes,y,v),w=this._buildPlayer(p,M,b);if(p.subTimeline&&r&&d.add(_),m){const A=new V0(e,a,_);A.setRealPlayer(w),c.push(A)}return w});c.forEach(p=>{ji(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function r6(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>_r(p,xI));const f=go(h);return f.onDestroy(()=>{u.forEach(p=>Yl(p,xI)),is(l,t.toStyles)}),d.forEach(p=>{ji(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new od(e.duration,e.delay)}}class V0{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new od,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>v0(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ji(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function xp(n){return n&&1===n.nodeType}function UI(n,e){const t=n.style.display;return n.style.display=e??"none",t}function kI(n,e,t,i,r){const s=[];t.forEach(l=>s.push(UI(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[gr]=t6,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>UI(l,s[a++])),o}function BI(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?i:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);l!==i&&t.get(l).push(a)}),t}function _r(n,e){n.classList?.add(e)}function Yl(n,e){n.classList?.remove(e)}function a6(n,e,t){go(t).onDone(()=>n.processLeaveNode(e))}function VI(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof uI?VI(i.players,e):e.push(i)}}function zI(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Ep{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new i6(e,t,i),this._timelineEngine=new Y8(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],u=I0(this._driver,s,l,c);if(l.length)throw function qW(n,e){return new Z(3404,!1)}();a=function W8(n,e,t){return new j8(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=fI(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=fI(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let d6=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&is(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(is(this._element,this._initialStyles),this._endStyles&&(is(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(fa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fa(this._element,this._endStyles),this._endStyles=null),is(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function z0(n){let e=null;return n.forEach((t,i)=>{(function h6(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class HI{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:TI(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class f6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return _I(e,t)}getParentElement(e){return S0(e)}query(e,t,i){return yI(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(f=>f instanceof HI);(function _8(n,e){return 0===n||0===e})(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,_)=>c.set(_,p))});let d=function f8(n){return n.length?n[0]instanceof Map?n:n.map(e=>EI(e)):[]}(t).map(f=>_o(f));d=function y8(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,TI(n,a)))}}return e}(e,d,c);const h=function u6(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=z0(e[0]),e.length>1&&(i=z0(e[e.length-1]))):e instanceof Map&&(t=z0(e)),t||i?new d6(n,t,i):null}(e,d);return new HI(e,d,l,h)}}let p6=(()=>{class n extends oI{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Cr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?aI(t):t;return GI(this._renderer,null,i,"register",[r]),new m6(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(ze(Ou),ze(ei))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class m6 extends MW{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new g6(this._id,e,t||{},this._renderer)}}class g6{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return GI(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function GI(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const $I="@.disabled";let _6=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new WI("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new y6(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(ze(Ou),ze(Ep),ze(ln))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class WI{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==$I?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class y6 extends WI{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$I?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function v6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function b6(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const jI=[{provide:oI,useClass:p6},{provide:O0,useFactory:function E6(){return new z8}},{provide:Ep,useClass:(()=>{class n extends Ep{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(ze(ei),ze(w0),ze(O0),ze(Qu))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})()},{provide:Ou,useFactory:function S6(n,e,t){return new _6(n,e,t)},deps:[ap,Ep,ln]}],H0=[{provide:w0,useFactory:()=>new f6},{provide:OD,useValue:"BrowserAnimations"},...jI],qI=[{provide:w0,useClass:vI},{provide:OD,useValue:"NoopAnimations"},...jI];let w6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?qI:H0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({providers:H0,imports:[nI]}),n})();var mi="top",Xi="bottom",Yi="right",gi="left",wp="auto",Kl=[mi,Xi,Yi,gi],ma="start",Zl="end",XI="clippingParents",G0="viewport",Jl="popper",YI="reference",$0=Kl.reduce(function(n,e){return n.concat([e+"-"+ma,e+"-"+Zl])},[]),W0=[].concat(Kl,[wp]).reduce(function(n,e){return n.concat([e,e+"-"+ma,e+"-"+Zl])},[]),KI="beforeRead",ZI="read",JI="afterRead",QI="beforeMain",eR="main",tR="afterMain",nR="beforeWrite",iR="write",rR="afterWrite",sR=[KI,ZI,JI,QI,eR,tR,nR,iR,rR];function rs(n){return n?(n.nodeName||"").toLowerCase():null}function Ki(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ga(n){return n instanceof Ki(n).Element||n instanceof Element}function yr(n){return n instanceof Ki(n).HTMLElement||n instanceof HTMLElement}function j0(n){return!(typeof ShadowRoot>"u")&&(n instanceof Ki(n).ShadowRoot||n instanceof ShadowRoot)}const q0={name:"applyStyles",enabled:!0,phase:"write",fn:function M6(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!yr(s)||!rs(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function C6(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]).reduce(function(l,c){return l[c]="",l},{});!yr(r)||!rs(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]};function ss(n){return n.split("-")[0]}var _a=Math.max,Mp=Math.min,Ql=Math.round;function X0(){var n=navigator.userAgentData;return null!=n&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function oR(){return!/^((?!chrome|android).)*safari/i.test(X0())}function ec(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=n.getBoundingClientRect(),r=1,s=1;e&&yr(n)&&(r=n.offsetWidth>0&&Ql(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Ql(i.height)/n.offsetHeight||1);var a=(ga(n)?Ki(n):window).visualViewport,l=!oR()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Y0(n){var e=ec(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function aR(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&j0(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Us(n){return Ki(n).getComputedStyle(n)}function T6(n){return["table","td","th"].indexOf(rs(n))>=0}function yo(n){return((ga(n)?n.ownerDocument:n.document)||window.document).documentElement}function Cp(n){return"html"===rs(n)?n:n.assignedSlot||n.parentNode||(j0(n)?n.host:null)||yo(n)}function lR(n){return yr(n)&&"fixed"!==Us(n).position?n.offsetParent:null}function dd(n){for(var e=Ki(n),t=lR(n);t&&T6(t)&&"static"===Us(t).position;)t=lR(t);return t&&("html"===rs(t)||"body"===rs(t)&&"static"===Us(t).position)?e:t||function A6(n){var e=/firefox/i.test(X0());if(/Trident/i.test(X0())&&yr(n)&&"fixed"===Us(n).position)return null;var r=Cp(n);for(j0(r)&&(r=r.host);yr(r)&&["html","body"].indexOf(rs(r))<0;){var s=Us(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}(n)||e}function K0(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function hd(n,e,t){return _a(n,Mp(e,t))}function uR(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function dR(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}const hR={name:"arrow",enabled:!0,phase:"main",fn:function R6(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=ss(t.placement),l=K0(a),u=[gi,Yi].indexOf(a)>=0?"height":"width";if(s&&o){var d=function(e,t){return uR("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:dR(e,Kl))}(r.padding,t),h=Y0(s),f="y"===l?mi:gi,p="y"===l?Xi:Yi,_=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],g=o[l]-t.rects.reference[l],m=dd(s),b=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,w=b/2-h[u]/2+(_/2-g/2),A=hd(d[f],w,b-h[u]-d[p]);t.modifiersData[i]=((e={})[l]=A,e.centerOffset=A-w,e)}},effect:function P6(n){var e=n.state,i=n.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=e.elements.popper.querySelector(r))||aR(e.elements.popper,r)&&(e.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tc(n){return n.split("-")[1]}var N6={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fR(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,f=void 0===h?0:h,p=o.y,_=void 0===p?0:p,g="function"==typeof u?u({x:f,y:_}):{x:f,y:_};f=g.x,_=g.y;var m=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=gi,v=mi,M=window;if(c){var w=dd(t),A="clientHeight",I="clientWidth";w===Ki(t)&&"static"!==Us(w=yo(t)).position&&"absolute"===a&&(A="scrollHeight",I="scrollWidth"),(r===mi||(r===gi||r===Yi)&&s===Zl)&&(v=Xi,_-=(d&&w===M&&M.visualViewport?M.visualViewport.height:w[A])-i.height,_*=l?1:-1),r!==gi&&(r!==mi&&r!==Xi||s!==Zl)||(y=Yi,f-=(d&&w===M&&M.visualViewport?M.visualViewport.width:w[I])-i.width,f*=l?1:-1)}var B,R=Object.assign({position:a},c&&N6),z=!0===u?function L6(n,e){var i=n.y,r=e.devicePixelRatio||1;return{x:Ql(n.x*r)/r||0,y:Ql(i*r)/r||0}}({x:f,y:_},Ki(t)):{x:f,y:_};return f=z.x,_=z.y,Object.assign({},R,l?((B={})[v]=b?"0":"",B[y]=m?"0":"",B.transform=(M.devicePixelRatio||1)<=1?"translate("+f+"px, "+_+"px)":"translate3d("+f+"px, "+_+"px, 0)",B):((e={})[v]=b?_+"px":"",e[y]=m?f+"px":"",e.transform="",e))}const Z0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function O6(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=void 0===i||i,s=t.adaptive,o=void 0===s||s,a=t.roundOffsets,l=void 0===a||a,c={placement:ss(e.placement),variation:tc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,fR(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,fR(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Tp={passive:!0};const J0={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function F6(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=Ki(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,Tp)}),a&&l.addEventListener("resize",t.update,Tp),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Tp)}),a&&l.removeEventListener("resize",t.update,Tp)}},data:{}};var U6={left:"right",right:"left",bottom:"top",top:"bottom"};function Ap(n){return n.replace(/left|right|bottom|top/g,function(e){return U6[e]})}var k6={start:"end",end:"start"};function pR(n){return n.replace(/start|end/g,function(e){return k6[e]})}function Q0(n){var e=Ki(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function eb(n){return ec(yo(n)).left+Q0(n).scrollLeft}function tb(n){var e=Us(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function mR(n){return["html","body","#document"].indexOf(rs(n))>=0?n.ownerDocument.body:yr(n)&&tb(n)?n:mR(Cp(n))}function fd(n,e){var t;void 0===e&&(e=[]);var i=mR(n),r=i===(null==(t=n.ownerDocument)?void 0:t.body),s=Ki(i),o=r?[s].concat(s.visualViewport||[],tb(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(fd(Cp(o)))}function nb(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function gR(n,e,t){return e===G0?nb(function B6(n,e){var t=Ki(n),i=yo(n),r=t.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=oR();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+eb(n),y:l}}(n,t)):ga(e)?function z6(n,e){var t=ec(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):nb(function V6(n){var e,t=yo(n),i=Q0(n),r=null==(e=n.ownerDocument)?void 0:e.body,s=_a(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=_a(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+eb(n),l=-i.scrollTop;return"rtl"===Us(r||t).direction&&(a+=_a(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(yo(n)))}function _R(n){var l,e=n.reference,t=n.element,i=n.placement,r=i?ss(i):null,s=i?tc(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2;switch(r){case mi:l={x:o,y:e.y-t.height};break;case Xi:l={x:o,y:e.y+e.height};break;case Yi:l={x:e.x+e.width,y:a};break;case gi:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?K0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case ma:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Zl:l[c]=l[c]+(e[u]/2-t[u]/2)}}return l}function nc(n,e){void 0===e&&(e={});var i=e.placement,r=void 0===i?n.placement:i,s=e.strategy,o=void 0===s?n.strategy:s,a=e.boundary,l=void 0===a?XI:a,c=e.rootBoundary,u=void 0===c?G0:c,d=e.elementContext,h=void 0===d?Jl:d,f=e.altBoundary,p=void 0!==f&&f,_=e.padding,g=void 0===_?0:_,m=uR("number"!=typeof g?g:dR(g,Kl)),y=n.rects.popper,v=n.elements[p?h===Jl?YI:Jl:h],M=function G6(n,e,t,i){var r="clippingParents"===e?function H6(n){var e=fd(Cp(n)),i=["absolute","fixed"].indexOf(Us(n).position)>=0&&yr(n)?dd(n):n;return ga(i)?e.filter(function(r){return ga(r)&&aR(r,i)&&"body"!==rs(r)}):[]}(n):[].concat(e),s=[].concat(r,[t]),a=s.reduce(function(l,c){var u=gR(n,c,i);return l.top=_a(u.top,l.top),l.right=Mp(u.right,l.right),l.bottom=Mp(u.bottom,l.bottom),l.left=_a(u.left,l.left),l},gR(n,s[0],i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ga(v)?v:v.contextElement||yo(n.elements.popper),l,u,o),w=ec(n.elements.reference),A=_R({reference:w,element:y,strategy:"absolute",placement:r}),I=nb(Object.assign({},y,A)),S=h===Jl?I:w,E={top:M.top-S.top+m.top,bottom:S.bottom-M.bottom+m.bottom,left:M.left-S.left+m.left,right:S.right-M.right+m.right},R=n.modifiersData.offset;if(h===Jl&&R){var z=R[r];Object.keys(E).forEach(function(B){var j=[Yi,Xi].indexOf(B)>=0?1:-1,Q=[mi,Xi].indexOf(B)>=0?"y":"x";E[B]+=z[Q]*j})}return E}const yR={name:"flip",enabled:!0,phase:"main",fn:function j6(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=void 0===r||r,o=t.altAxis,a=void 0===o||o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,p=void 0===f||f,_=t.allowedAutoPlacements,g=e.options.placement,m=ss(g),y=l||(m!==g&&p?function W6(n){if(ss(n)===wp)return[];var e=Ap(n);return[pR(n),e,pR(e)]}(g):[Ap(g)]),v=[g].concat(y).reduce(function(H,ue){return H.concat(ss(ue)===wp?function $6(n,e){void 0===e&&(e={});var r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=void 0===l?W0:l,u=tc(e.placement),d=u?a?$0:$0.filter(function(p){return tc(p)===u}):Kl,h=d.filter(function(p){return c.indexOf(p)>=0});0===h.length&&(h=d);var f=h.reduce(function(p,_){return p[_]=nc(n,{placement:_,boundary:r,rootBoundary:s,padding:o})[ss(_)],p},{});return Object.keys(f).sort(function(p,_){return f[p]-f[_]})}(e,{placement:ue,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:_}):ue)},[]),M=e.rects.reference,w=e.rects.popper,A=new Map,I=!0,S=v[0],E=0;E<v.length;E++){var R=v[E],z=ss(R),B=tc(R)===ma,j=[mi,Xi].indexOf(z)>=0,Q=j?"width":"height",N=nc(e,{placement:R,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),V=j?B?Yi:gi:B?Xi:mi;M[Q]>w[Q]&&(V=Ap(V));var L=Ap(V),ne=[];if(s&&ne.push(N[z]<=0),a&&ne.push(N[V]<=0,N[L]<=0),ne.every(function(H){return H})){S=R,I=!1;break}A.set(R,ne)}if(I)for(var _e=function(ue){var Ae=v.find(function(de){var Re=A.get(de);if(Re)return Re.slice(0,ue).every(function(Xe){return Xe})});if(Ae)return S=Ae,"break"},Ue=p?3:1;Ue>0&&"break"!==_e(Ue);Ue--);e.placement!==S&&(e.modifiersData[i]._skip=!0,e.placement=S,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function vR(n,e,t){return void 0===t&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function bR(n){return[mi,Yi,Xi,gi].some(function(e){return n[e]>=0})}const xR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function q6(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=nc(e,{elementContext:"reference"}),a=nc(e,{altBoundary:!0}),l=vR(o,i),c=vR(a,r,s),u=bR(l),d=bR(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}},ER={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Y6(n){var e=n.state,i=n.name,r=n.options.offset,s=void 0===r?[0,0]:r,o=W0.reduce(function(u,d){return u[d]=function X6(n,e,t){var i=ss(n),r=[gi,mi].indexOf(i)>=0?-1:1,s="function"==typeof t?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[gi,Yi].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(d,e.rects,s),u},{}),a=o[e.placement],c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}},ib={name:"popperOffsets",enabled:!0,phase:"read",fn:function K6(n){var e=n.state;e.modifiersData[n.name]=_R({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},SR={name:"preventOverflow",enabled:!0,phase:"main",fn:function J6(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=void 0===r||r,o=t.altAxis,a=void 0!==o&&o,h=t.tether,f=void 0===h||h,p=t.tetherOffset,_=void 0===p?0:p,g=nc(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),m=ss(e.placement),b=tc(e.placement),y=!b,v=K0(m),M=function Z6(n){return"x"===n?"y":"x"}(v),w=e.modifiersData.popperOffsets,A=e.rects.reference,I=e.rects.popper,S="function"==typeof _?_(Object.assign({},e.rects,{placement:e.placement})):_,E="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(w){if(s){var B,j="y"===v?mi:gi,Q="y"===v?Xi:Yi,N="y"===v?"height":"width",V=w[v],L=V+g[j],ne=V-g[Q],he=f?-I[N]/2:0,_e=b===ma?A[N]:I[N],Ue=b===ma?-I[N]:-A[N],ft=e.elements.arrow,H=f&&ft?Y0(ft):{width:0,height:0},ue=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ae=ue[j],de=ue[Q],Re=hd(0,A[N],H[N]),Xe=y?A[N]/2-he-Re-Ae-E.mainAxis:_e-Re-Ae-E.mainAxis,He=y?-A[N]/2+he+Re+de+E.mainAxis:Ue+Re+de+E.mainAxis,Ct=e.elements.arrow&&dd(e.elements.arrow),Tt=null!=(B=R?.[v])?B:0,rn=V+He-Tt,ie=hd(f?Mp(L,V+Xe-Tt-(Ct?"y"===v?Ct.clientTop||0:Ct.clientLeft||0:0)):L,V,f?_a(ne,rn):ne);w[v]=ie,z[v]=ie-V}if(a){var se,K=w[M],T="y"===M?"height":"width",x=K+g["x"===v?mi:gi],U=K-g["x"===v?Xi:Yi],q=-1!==[mi,gi].indexOf(m),ee=null!=(se=R?.[M])?se:0,X=q?x:K-A[T]-I[T]-ee+E.altAxis,Ne=q?K+A[T]+I[T]-ee-E.altAxis:U,me=f&&q?function D6(n,e,t){var i=hd(n,e,t);return i>t?t:i}(X,K,Ne):hd(f?X:x,K,f?Ne:U);w[M]=me,z[M]=me-K}e.modifiersData[i]=z}},requiresIfExists:["offset"]};function nj(n,e,t){void 0===t&&(t=!1);var i=yr(e),r=yr(e)&&function tj(n){var e=n.getBoundingClientRect(),t=Ql(e.width)/n.offsetWidth||1,i=Ql(e.height)/n.offsetHeight||1;return 1!==t||1!==i}(e),s=yo(e),o=ec(n,r,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&(("body"!==rs(e)||tb(s))&&(a=function ej(n){return n!==Ki(n)&&yr(n)?function Q6(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):Q0(n)}(e)),yr(e)?((l=ec(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=eb(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ij(n){var e=new Map,t=new Set,i=[];function r(s){t.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){e.set(s.name,s)}),n.forEach(function(s){t.has(s.name)||r(s)}),i}function sj(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var wR={placement:"bottom",modifiers:[],strategy:"absolute"};function MR(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function Dp(n){void 0===n&&(n={});var t=n.defaultModifiers,i=void 0===t?[]:t,r=n.defaultOptions,s=void 0===r?wR:r;return function(a,l,c){void 0===c&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},wR,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(m){var b="function"==typeof m?m(u.options):m;_(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:ga(a)?fd(a):a.contextElement?fd(a.contextElement):[],popper:fd(l)};var y=function rj(n){var e=ij(n);return sR.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}(function oj(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=y.filter(function(v){return v.enabled}),function p(){u.orderedModifiers.forEach(function(g){var b=g.options,v=g.effect;if("function"==typeof v){var M=v({state:u,name:g.name,instance:f,options:void 0===b?{}:b});d.push(M||function(){})}})}(),f.update()},forceUpdate:function(){if(!h){var m=u.elements,b=m.reference,y=m.popper;if(MR(b,y)){u.rects={reference:nj(b,dd(y),"fixed"===u.options.strategy),popper:Y0(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var v=0;v<u.orderedModifiers.length;v++)if(!0!==u.reset){var M=u.orderedModifiers[v],w=M.fn,A=M.options;"function"==typeof w&&(u=w({state:u,options:void 0===A?{}:A,name:M.name,instance:f})||u)}else u.reset=!1,v=-1}}},update:sj(function(){return new Promise(function(g){f.forceUpdate(),g(u)})}),destroy:function(){_(),h=!0}};if(!MR(a,l))return f;function _(){d.forEach(function(g){return g()}),d=[]}return f.setOptions(c).then(function(g){!h&&c.onFirstUpdate&&c.onFirstUpdate(g)}),f}}var aj=Dp(),rb=Dp({defaultModifiers:[J0,ib,Z0,q0,ER,yR,SR,hR,xR]}),uj=Dp({defaultModifiers:[J0,ib,Z0,q0]});const vo=new Map,sb={set(n,e,t){vo.has(n)||vo.set(n,new Map);const i=vo.get(n);i.has(e)||0===i.size?i.set(e,t):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(n,e)=>vo.has(n)&&vo.get(n).get(e)||null,remove(n,e){if(!vo.has(n))return;const t=vo.get(n);t.delete(e),0===t.size&&vo.delete(n)}},ob="transitionend",CR=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),TR=n=>{n.dispatchEvent(new Event(ob))},ks=n=>!(!n||"object"!=typeof n)&&(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),bo=n=>ks(n)?n.jquery?n[0]:n:"string"==typeof n&&n.length>0?document.querySelector(CR(n)):null,ic=n=>{if(!ks(n)||0===n.getClientRects().length)return!1;const e="visible"===getComputedStyle(n).getPropertyValue("visibility"),t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const i=n.closest("summary");if(i&&i.parentNode!==t||null===i)return!1}return e},xo=n=>!(n&&n.nodeType===Node.ELEMENT_NODE&&!n.classList.contains("disabled"))||(typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&"false"!==n.getAttribute("disabled")),AR=n=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof n.getRootNode){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?AR(n.parentNode):null},Ip=()=>{},DR=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ab=[],vr=()=>"rtl"===document.documentElement.dir,br=n=>{(n=>{"loading"===document.readyState?(ab.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of ab)e()}),ab.push(n)):n()})(()=>{const e=DR();if(e){const t=n.NAME,i=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=i,n.jQueryInterface)}})},Ii=(n,e=[],t=n)=>"function"==typeof n?n(...e):t,IR=(n,e,t=!0)=>{if(!t)return void Ii(n);const r=(n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const i=Number.parseFloat(e),r=Number.parseFloat(t);return i||r?(e=e.split(",")[0],t=t.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(t))):0})(e)+5;let s=!1;const o=({target:a})=>{a===e&&(s=!0,e.removeEventListener(ob,o),Ii(n))};e.addEventListener(ob,o),setTimeout(()=>{s||TR(e)},r)},lb=(n,e,t,i)=>{const r=n.length;let s=n.indexOf(e);return-1===s?!t&&i?n[r-1]:n[0]:(s+=t?1:-1,i&&(s=(s+r)%r),n[Math.max(0,Math.min(s,r-1))])},_j=/[^.]*(?=\..*)\.|.*/,yj=/\..*/,vj=/::\d+$/,cb={};let RR=1;const PR={mouseenter:"mouseover",mouseleave:"mouseout"},bj=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function NR(n,e){return e&&`${e}::${RR++}`||n.uidEvent||RR++}function LR(n){const e=NR(n);return n.uidEvent=e,cb[e]=cb[e]||{},cb[e]}function OR(n,e,t=null){return Object.values(n).find(i=>i.callable===e&&i.delegationSelector===t)}function FR(n,e,t){const i="string"==typeof e,r=i?t:e||t;let s=kR(n);return bj.has(s)||(s=n),[i,r,s]}function UR(n,e,t,i,r){if("string"!=typeof e||!n)return;let[s,o,a]=FR(e,t,i);var p;e in PR&&(p=o,o=function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return p.call(this,_)});const l=LR(n),c=l[a]||(l[a]={}),u=OR(c,o,s?t:null);if(u)return void(u.oneOff=u.oneOff&&r);const d=NR(o,e.replace(_j,"")),h=s?function Ej(n,e,t){return function i(r){const s=n.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return db(r,{delegateTarget:o}),i.oneOff&&ce.off(n,r.type,e,t),t.apply(o,[r])}}(n,t,o):function xj(n,e){return function t(i){return db(i,{delegateTarget:n}),t.oneOff&&ce.off(n,i.type,e),e.apply(n,[i])}}(n,o);h.delegationSelector=s?t:null,h.callable=o,h.oneOff=r,h.uidEvent=d,c[d]=h,n.addEventListener(a,h,s)}function ub(n,e,t,i,r){const s=OR(e[t],i,r);s&&(n.removeEventListener(t,s,Boolean(r)),delete e[t][s.uidEvent])}function Sj(n,e,t,i){const r=e[t]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&ub(n,e,t,o.callable,o.delegationSelector)}function kR(n){return n=n.replace(yj,""),PR[n]||n}const ce={on(n,e,t,i){UR(n,e,t,i,!1)},one(n,e,t,i){UR(n,e,t,i,!0)},off(n,e,t,i){if("string"!=typeof e||!n)return;const[r,s,o]=FR(e,t,i),a=o!==e,l=LR(n),c=l[o]||{},u=e.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;ub(n,l,o,s,r?t:null)}else{if(u)for(const d of Object.keys(l))Sj(n,l,d,e.slice(1));for(const[d,h]of Object.entries(c)){const f=d.replace(vj,"");(!a||e.includes(f))&&ub(n,l,o,h.callable,h.delegationSelector)}}},trigger(n,e,t){if("string"!=typeof e||!n)return null;const i=DR();let o=null,a=!0,l=!0,c=!1;e!==kR(e)&&i&&(o=i.Event(e,t),i(n).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const u=db(new Event(e,{bubbles:a,cancelable:!0}),t);return c&&u.preventDefault(),l&&n.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function db(n,e={}){for(const[t,i]of Object.entries(e))try{n[t]=i}catch{Object.defineProperty(n,t,{configurable:!0,get:()=>i})}return n}function BR(n){if("true"===n)return!0;if("false"===n)return!1;if(n===Number(n).toString())return Number(n);if(""===n||"null"===n)return null;if("string"!=typeof n)return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function hb(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Bs={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${hb(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${hb(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of t){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=BR(n.dataset[i])}return e},getDataAttribute:(n,e)=>BR(n.getAttribute(`data-bs-${hb(e)}`))};class md{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=ks(t)?Bs.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...ks(t)?Bs.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[i,r]of Object.entries(t)){const s=e[i],o=ks(s)?"element":null==(n=s)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}var n}}class kr extends md{constructor(e,t){super(),(e=bo(e))&&(this._element=e,this._config=this._getConfig(t),sb.set(this._element,this.constructor.DATA_KEY,this))}dispose(){sb.remove(this._element,this.constructor.DATA_KEY),ce.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){IR(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return sb.get(bo(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const fb=n=>{let e=n.getAttribute("data-bs-target");if(!e||"#"===e){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&"#"!==t?t.trim():null}return e?e.split(",").map(t=>CR(t)).join(","):null},We={find:(n,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,n)),findOne:(n,e=document.documentElement)=>Element.prototype.querySelector.call(e,n),children:(n,e)=>[].concat(...n.children).filter(t=>t.matches(e)),parents(n,e){const t=[];let i=n.parentNode.closest(e);for(;i;)t.push(i),i=i.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!xo(t)&&ic(t))},getSelectorFromElement(n){const e=fb(n);return e&&We.findOne(e)?e:null},getElementFromSelector(n){const e=fb(n);return e?We.findOne(e):null},getMultipleElementsFromSelector(n){const e=fb(n);return e?We.find(e):[]}},Rp=(n,e="hide")=>{const i=n.NAME;ce.on(document,`click.dismiss${n.EVENT_KEY}`,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),xo(this))return;const s=We.getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(s)[e]()})},VR=".bs.alert",Cj=`close${VR}`,Tj=`closed${VR}`;class Pp extends kr{static get NAME(){return"alert"}close(){if(ce.trigger(this._element,Cj).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),ce.trigger(this._element,Tj),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=Pp.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Rp(Pp,"close"),br(Pp);const zR='[data-bs-toggle="button"]';class Np extends kr{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Np.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}ce.on(document,"click.bs.button.data-api",zR,n=>{n.preventDefault();const e=n.target.closest(zR);Np.getOrCreateInstance(e).toggle()}),br(Np);const rc=".bs.swipe",Fj=`touchstart${rc}`,Uj=`touchmove${rc}`,kj=`touchend${rc}`,Bj=`pointerdown${rc}`,Vj=`pointerup${rc}`,Wj={endCallback:null,leftCallback:null,rightCallback:null},jj={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Lp extends md{constructor(e,t){super(),this._element=e,e&&Lp.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Wj}static get DefaultType(){return jj}static get NAME(){return"swipe"}dispose(){ce.off(this._element,rc)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ii(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&Ii(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ce.on(this._element,Bj,e=>this._start(e)),ce.on(this._element,Vj,e=>this._end(e)),this._element.classList.add("pointer-event")):(ce.on(this._element,Fj,e=>this._start(e)),ce.on(this._element,Uj,e=>this._move(e)),ce.on(this._element,kj,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Eo=".bs.carousel",HR=".data-api",gd="next",sc="prev",oc="left",Op="right",Zj=`slide${Eo}`,pb=`slid${Eo}`,Jj=`keydown${Eo}`,Qj=`mouseenter${Eo}`,e9=`mouseleave${Eo}`,t9=`dragstart${Eo}`,n9=`load${Eo}${HR}`,i9=`click${Eo}${HR}`,GR="carousel",Fp="active",$R=".active",WR=".carousel-item",c9=$R+WR,p9={ArrowLeft:Op,ArrowRight:oc},m9={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},g9={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class _d extends kr{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=We.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===GR&&this.cycle()}static get Default(){return m9}static get DefaultType(){return g9}static get NAME(){return"carousel"}next(){this._slide(gd)}nextWhenVisible(){!document.hidden&&ic(this._element)&&this.next()}prev(){this._slide(sc)}pause(){this._isSliding&&TR(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void ce.one(this._element,pb,()=>this.cycle());this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void ce.one(this._element,pb,()=>this.to(e));const i=this._getItemIndex(this._getActive());i!==e&&this._slide(e>i?gd:sc,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ce.on(this._element,Jj,e=>this._keydown(e)),"hover"===this._config.pause&&(ce.on(this._element,Qj,()=>this.pause()),ce.on(this._element,e9,()=>this._maybeEnableCycle())),this._config.touch&&Lp.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of We.find(".carousel-item img",this._element))ce.on(i,t9,r=>r.preventDefault());this._swipeHelper=new Lp(this._element,{leftCallback:()=>this._slide(this._directionToOrder(oc)),rightCallback:()=>this._slide(this._directionToOrder(Op)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=p9[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=We.findOne($R,this._indicatorsElement);t.classList.remove(Fp),t.removeAttribute("aria-current");const i=We.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Fp),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),r=e===gd,s=t||lb(this._getItems(),i,r,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),a=f=>ce.trigger(this._element,f,{relatedTarget:s,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(a(Zj).defaultPrevented||!i||!s)return;const c=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const u=r?"carousel-item-start":"carousel-item-end",d=r?"carousel-item-next":"carousel-item-prev";s.classList.add(d),i.classList.add(u),s.classList.add(u),this._queueCallback(()=>{s.classList.remove(u,d),s.classList.add(Fp),i.classList.remove(Fp,d,u),this._isSliding=!1,a(pb)},i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return We.findOne(c9,this._element)}_getItems(){return We.find(WR,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return vr()?e===oc?sc:gd:e===oc?gd:sc}_orderToDirection(e){return vr()?e===sc?oc:Op:e===sc?Op:oc}static jQueryInterface(e){return this.each(function(){const t=_d.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}ce.on(document,i9,"[data-bs-slide], [data-bs-slide-to]",function(n){const e=We.getElementFromSelector(this);if(!e||!e.classList.contains(GR))return;n.preventDefault();const t=_d.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(t.to(i),void t._maybeEnableCycle()):"next"===Bs.getDataAttribute(this,"slide")?(t.next(),void t._maybeEnableCycle()):(t.prev(),void t._maybeEnableCycle())}),ce.on(window,n9,()=>{const n=We.find('[data-bs-ride="carousel"]');for(const e of n)_d.getOrCreateInstance(e)}),br(_d);const yd=".bs.collapse",v9=`show${yd}`,b9=`shown${yd}`,x9=`hide${yd}`,E9=`hidden${yd}`,S9=`click${yd}.data-api`,mb="show",ac="collapse",Up="collapsing",M9=`:scope .${ac} .${ac}`,gb='[data-bs-toggle="collapse"]',I9={parent:null,toggle:!0},R9={parent:"(null|element)",toggle:"boolean"};class vd extends kr{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=We.find(gb);for(const r of i){const s=We.getSelectorFromElement(r),o=We.find(s).filter(a=>a===this._element);null!==s&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return I9}static get DefaultType(){return R9}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(a=>a!==this._element).map(a=>vd.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||ce.trigger(this._element,v9).defaultPrevented)return;for(const a of e)a.hide();const i=this._getDimension();this._element.classList.remove(ac),this._element.classList.add(Up),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Up),this._element.classList.add(ac,mb),this._element.style[i]="",ce.trigger(this._element,b9)},this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||ce.trigger(this._element,x9).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,this._element.classList.add(Up),this._element.classList.remove(ac,mb);for(const r of this._triggerArray){const s=We.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Up),this._element.classList.add(ac),ce.trigger(this._element,E9)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(mb)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=bo(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(gb);for(const t of e){const i=We.getElementFromSelector(t);i&&this._addAriaAndCollapsedClass([t],this._isShown(i))}}_getFirstLevelChildren(e){const t=We.find(M9,this._config.parent);return We.find(e,this._config.parent).filter(i=>!t.includes(i))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=vd.getOrCreateInstance(this,t);if("string"==typeof e){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}ce.on(document,S9,gb,function(n){("A"===n.target.tagName||n.delegateTarget&&"A"===n.delegateTarget.tagName)&&n.preventDefault();for(const e of We.getMultipleElementsFromSelector(this))vd.getOrCreateInstance(e,{toggle:!1}).toggle()}),br(vd);const jR="dropdown",ya=".bs.dropdown",_b=".data-api",N9="ArrowUp",XR="ArrowDown",O9=`hide${ya}`,F9=`hidden${ya}`,U9=`show${ya}`,k9=`shown${ya}`,YR=`click${ya}${_b}`,KR=`keydown${ya}${_b}`,B9=`keyup${ya}${_b}`,lc="show",va='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',W9=`${va}.${lc}`,kp=".dropdown-menu",Y9=vr()?"top-end":"top-start",K9=vr()?"top-start":"top-end",Z9=vr()?"bottom-end":"bottom-start",J9=vr()?"bottom-start":"bottom-end",Q9=vr()?"left-start":"right-start",eq=vr()?"right-start":"left-start",iq={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},rq={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class os extends kr{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=We.next(this._element,kp)[0]||We.prev(this._element,kp)[0]||We.findOne(kp,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return iq}static get DefaultType(){return rq}static get NAME(){return jR}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xo(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ce.trigger(this._element,U9,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const i of[].concat(...document.body.children))ce.on(i,"mouseover",Ip);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(lc),this._element.classList.add(lc),ce.trigger(this._element,k9,e)}}hide(){!xo(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ce.trigger(this._element,O9,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))ce.off(i,"mouseover",Ip);this._popper&&this._popper.destroy(),this._menu.classList.remove(lc),this._element.classList.remove(lc),this._element.setAttribute("aria-expanded","false"),Bs.removeDataAttribute(this._menu,"popper"),ce.trigger(this._element,F9,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!ks(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${jR.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof sl>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:ks(this._config.reference)?e=bo(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=rb(e,this._menu,t)}_isShown(){return this._menu.classList.contains(lc)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Q9;if(e.classList.contains("dropstart"))return eq;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?K9:Y9:t?J9:Z9}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Bs.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ii(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=We.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(r=>ic(r));i.length&&lb(i,t,e===XR,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=os.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=We.find(W9);for(const i of t){const r=os.getInstance(i);if(!r||!1===r._config.autoClose)continue;const s=e.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||"inside"===r._config.autoClose&&!o||"outside"===r._config.autoClose&&o||r._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:r._element};"click"===e.type&&(a.clickEvent=e),r._completeHide(a)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,r=[N9,XR].includes(e.key);if(!r&&!i||t&&!i)return;e.preventDefault();const s=this.matches(va)?this:We.prev(this,va)[0]||We.next(this,va)[0]||We.findOne(va,e.delegateTarget.parentNode),o=os.getOrCreateInstance(s);if(r)return e.stopPropagation(),o.show(),void o._selectMenuItem(e);o._isShown()&&(e.stopPropagation(),o.hide(),s.focus())}}ce.on(document,KR,va,os.dataApiKeydownHandler),ce.on(document,KR,kp,os.dataApiKeydownHandler),ce.on(document,YR,os.clearMenus),ce.on(document,B9,os.clearMenus),ce.on(document,YR,va,function(n){n.preventDefault(),os.getOrCreateInstance(this).toggle()}),br(os);const ZR="backdrop",QR=`mousedown.bs.${ZR}`,oq={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},aq={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class eP extends md{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return oq}static get DefaultType(){return aq}static get NAME(){return ZR}show(e){if(!this._config.isVisible)return void Ii(e);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{Ii(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),Ii(e)})):Ii(e)}dispose(){this._isAppended&&(ce.off(this._element,QR),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=bo(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ce.on(e,QR,()=>{Ii(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){IR(e,this._getElement(),this._config.isAnimated)}}const Bp=".bs.focustrap",cq=`focusin${Bp}`,uq=`keydown.tab${Bp}`,tP="backward",fq={autofocus:!0,trapElement:null},pq={autofocus:"boolean",trapElement:"element"};class nP extends md{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return fq}static get DefaultType(){return pq}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ce.off(document,Bp),ce.on(document,cq,e=>this._handleFocusin(e)),ce.on(document,uq,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ce.off(document,Bp))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=We.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===tP?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?tP:"forward")}}const iP=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",rP=".sticky-top",Vp="padding-right",sP="margin-right";class yb{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vp,t=>t+e),this._setElementAttributes(iP,Vp,t=>t+e),this._setElementAttributes(rP,sP,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vp),this._resetElementAttributes(iP,Vp),this._resetElementAttributes(rP,sP)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const r=this.getWidth();this._applyManipulationCallback(e,o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,t);const a=window.getComputedStyle(o).getPropertyValue(t);o.style.setProperty(t,`${i(Number.parseFloat(a))}px`)})}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&Bs.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,r=>{const s=Bs.getDataAttribute(r,t);null!==s?(Bs.removeDataAttribute(r,t),r.style.setProperty(t,s)):r.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(ks(e))t(e);else for(const i of We.find(e,this._element))t(i)}}const xr=".bs.modal",yq=`hide${xr}`,vq=`hidePrevented${xr}`,oP=`hidden${xr}`,aP=`show${xr}`,bq=`shown${xr}`,xq=`resize${xr}`,Eq=`click.dismiss${xr}`,Sq=`mousedown.dismiss${xr}`,wq=`keydown.dismiss${xr}`,Mq=`click${xr}.data-api`,lP="modal-open",vb="modal-static",Rq={backdrop:!0,focus:!0,keyboard:!0},Pq={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class cc extends kr{constructor(e,t){super(e,t),this._dialog=We.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new yb,this._addEventListeners()}static get Default(){return Rq}static get DefaultType(){return Pq}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||ce.trigger(this._element,aP,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(lP),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||ce.trigger(this._element,yq).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ce.off(window,xr),ce.off(this._dialog,xr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new eP({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new nP({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=We.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ce.trigger(this._element,bq,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){ce.on(this._element,wq,e=>{if("Escape"===e.key){if(this._config.keyboard)return void this.hide();this._triggerBackdropTransition()}}),ce.on(window,xq,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ce.on(this._element,Sq,e=>{ce.one(this._element,Eq,t=>{if(this._element===e.target&&this._element===t.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(lP),this._resetAdjustments(),this._scrollBar.reset(),ce.trigger(this._element,oP)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ce.trigger(this._element,vq).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(vb)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(vb),this._queueCallback(()=>{this._element.classList.remove(vb),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const r=vr()?"paddingLeft":"paddingRight";this._element.style[r]=`${t}px`}if(!i&&e){const r=vr()?"paddingRight":"paddingLeft";this._element.style[r]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=cc.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](t)}})}}ce.on(document,Mq,'[data-bs-toggle="modal"]',function(n){const e=We.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),ce.one(e,aP,r=>{r.defaultPrevented||ce.one(e,oP,()=>{ic(this)&&this.focus()})});const t=We.findOne(".modal.show");t&&cc.getInstance(t).hide(),cc.getOrCreateInstance(e).toggle(this)}),Rp(cc),br(cc);const Vs=".bs.offcanvas",uP=".data-api",Lq=`load${Vs}${uP}`,hP="showing",pP=".offcanvas.show",Uq=`show${Vs}`,kq=`shown${Vs}`,Bq=`hide${Vs}`,mP=`hidePrevented${Vs}`,gP=`hidden${Vs}`,Vq=`resize${Vs}`,zq=`click${Vs}${uP}`,Hq=`keydown.dismiss${Vs}`,$q={backdrop:!0,keyboard:!0,scroll:!1},Wq={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class So extends kr{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return $q}static get DefaultType(){return Wq}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||ce.trigger(this._element,Uq,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new yb).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(hP),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(hP),ce.trigger(this._element,kq,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&!ce.trigger(this._element,Bq).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new yb).reset(),ce.trigger(this._element,gP)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new eP({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():ce.trigger(this._element,mP)}:null})}_initializeFocusTrap(){return new nP({trapElement:this._element})}_addEventListeners(){ce.on(this._element,Hq,e=>{if("Escape"===e.key){if(this._config.keyboard)return void this.hide();ce.trigger(this._element,mP)}})}static jQueryInterface(e){return this.each(function(){const t=So.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ce.on(document,zq,'[data-bs-toggle="offcanvas"]',function(n){const e=We.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),xo(this))return;ce.one(e,gP,()=>{ic(this)&&this.focus()});const t=We.findOne(pP);t&&t!==e&&So.getInstance(t).hide(),So.getOrCreateInstance(e).toggle(this)}),ce.on(window,Lq,()=>{for(const n of We.find(pP))So.getOrCreateInstance(n).show()}),ce.on(window,Vq,()=>{for(const n of We.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(n).position&&So.getOrCreateInstance(n).hide()}),Rp(So),br(So);const _P={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},jq=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),qq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Xq=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?!jq.has(t)||Boolean(qq.test(n.nodeValue)):e.filter(i=>i instanceof RegExp).some(i=>i.test(t))},Zq={allowList:_P,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Jq={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Qq={entry:"(string|element|function|null)",selector:"(string|element)"};class e7 extends md{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Zq}static get DefaultType(){return Jq}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(e,s,r);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},Qq)}_setContent(e,t,i){const r=We.findOne(i,e);if(r){if(!(t=this._resolvePossibleFunction(t)))return void r.remove();if(ks(t))return void this._putElementInTemplate(bo(t),r);if(this._config.html)return void(r.innerHTML=this._maybeSanitize(t));r.textContent=t}}_maybeSanitize(e){return this._config.sanitize?function Yq(n,e,t){if(!n.length)return n;if(t&&"function"==typeof t)return t(n);const r=(new window.DOMParser).parseFromString(n,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(const u of l)Xq(u,c)||o.removeAttribute(u.nodeName)}return r.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Ii(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const n7=new Set(["sanitize","allowList","sanitizeFn"]),bb="fade",zp="show",vP="hide.bs.modal",bd="hover",xb="focus",_7={AUTO:"auto",TOP:"top",RIGHT:vr()?"left":"right",BOTTOM:"bottom",LEFT:vr()?"right":"left"},y7={allowList:_P,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},v7={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ba extends kr{constructor(e,t){if(typeof sl>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return y7}static get DefaultType(){return v7}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),ce.off(this._element.closest(".modal"),vP,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=ce.trigger(this._element,this.constructor.eventName("show")),i=(AR(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),ce.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(r),r.classList.add(zp),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))ce.on(a,"mouseover",Ip);this._queueCallback(()=>{ce.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ce.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(zp),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))ce.off(r,"mouseover",Ip);this._activeTrigger.click=!1,this._activeTrigger[xb]=!1,this._activeTrigger[bd]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ce.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(bb,zp),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(n=>{do{n+=Math.floor(1e6*Math.random())}while(document.getElementById(n));return n})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(bb),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new e7({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(bb)}_isShown(){return this.tip&&this.tip.classList.contains(zp)}_createPopper(e){const t=Ii(this._config.placement,[this,e,this._element]),i=_7[t.toUpperCase()];return rb(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Ii(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...t,...Ii(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)ce.on(this._element,this.constructor.eventName("click"),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if("manual"!==t){const i=this.constructor.eventName(t===bd?"mouseenter":"focusin"),r=this.constructor.eventName(t===bd?"mouseleave":"focusout");ce.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger["focusin"===s.type?xb:bd]=!0,o._enter()}),ce.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger["focusout"===s.type?xb:bd]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ce.on(this._element.closest(".modal"),vP,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=Bs.getDataAttributes(this._element);for(const i of Object.keys(t))n7.has(i)&&delete t[i];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:bo(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=ba.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}br(ba);const S7={...ba.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},w7={...ba.DefaultType,content:"(null|string|element|function)"};class Eb extends ba{static get Default(){return S7}static get DefaultType(){return w7}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Eb.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}br(Eb);const Sb=".bs.scrollspy",T7=`activate${Sb}`,bP=`click${Sb}`,A7=`load${Sb}.data-api`,uc="active",wb="[href]",xP=".nav-link",P7=`${xP}, .nav-item > ${xP}, .list-group-item`,O7={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},F7={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Hp extends kr{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return O7}static get DefaultType(){return F7}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=bo(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ce.off(this._config.target,bP),ce.on(this._config.target,bP,wb,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:r,behavior:"smooth"});i.scrollTop=r}}))}_getNewObserver(){return new IntersectionObserver(t=>this._observerCallback(t),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(e){const t=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(t(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return}else!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=We.find(wb,this._config.target);for(const t of e){if(!t.hash||xo(t))continue;const i=We.findOne(decodeURI(t.hash),this._element);ic(i)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(uc),this._activateParents(e),ce.trigger(this._element,T7,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))We.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(uc);else for(const t of We.parents(e,".nav, .list-group"))for(const i of We.prev(t,P7))i.classList.add(uc)}_clearActiveClass(e){e.classList.remove(uc);const t=We.find(`${wb}.${uc}`,e);for(const i of t)i.classList.remove(uc)}static jQueryInterface(e){return this.each(function(){const t=Hp.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}ce.on(window,A7,()=>{for(const n of We.find('[data-bs-spy="scroll"]'))Hp.getOrCreateInstance(n)}),br(Hp);const xa=".bs.tab",k7=`hide${xa}`,B7=`hidden${xa}`,V7=`show${xa}`,z7=`shown${xa}`,H7=`click${xa}`,G7=`keydown${xa}`,$7=`load${xa}`,W7="ArrowLeft",EP="ArrowRight",j7="ArrowUp",SP="ArrowDown",Mb="Home",wP="End",Ea="active",Cb="show",CP=".dropdown-toggle",Tb=`:not(${CP})`,TP='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ab=`.nav-link${Tb}, .list-group-item${Tb}, [role="tab"]${Tb}, ${TP}`,J7=`.${Ea}[data-bs-toggle="tab"], .${Ea}[data-bs-toggle="pill"], .${Ea}[data-bs-toggle="list"]`;class dc extends kr{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ce.on(this._element,G7,t=>this._keydown(t)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?ce.trigger(t,k7,{relatedTarget:e}):null;ce.trigger(e,V7,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ea),this._activate(We.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ce.trigger(e,z7,{relatedTarget:t})):e.classList.add(Cb)},e,e.classList.contains("fade")))}_deactivate(e,t){e&&(e.classList.remove(Ea),e.blur(),this._deactivate(We.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ce.trigger(e,B7,{relatedTarget:t})):e.classList.remove(Cb)},e,e.classList.contains("fade")))}_keydown(e){if(![W7,EP,j7,SP,Mb,wP].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(r=>!xo(r));let i;if([Mb,wP].includes(e.key))i=t[e.key===Mb?0:t.length-1];else{const r=[EP,SP].includes(e.key);i=lb(t,e.target,r,!0)}i&&(i.focus({preventScroll:!0}),dc.getOrCreateInstance(i).show())}_getChildren(){return We.find(Ab,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const i of t)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=We.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const r=(s,o)=>{const a=We.findOne(s,i);a&&a.classList.toggle(o,t)};r(CP,Ea),r(".dropdown-menu",Cb),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Ea)}_getInnerElement(e){return e.matches(Ab)?e:We.findOne(Ab,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=dc.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}ce.on(document,H7,TP,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!xo(this)&&dc.getOrCreateInstance(this).show()}),ce.on(window,$7,()=>{for(const n of We.find(J7))dc.getOrCreateInstance(n)}),br(dc);const wo=".bs.toast",eX=`mouseover${wo}`,tX=`mouseout${wo}`,nX=`focusin${wo}`,iX=`focusout${wo}`,rX=`hide${wo}`,sX=`hidden${wo}`,oX=`show${wo}`,aX=`shown${wo}`,Gp="show",$p="showing",cX={animation:"boolean",autohide:"boolean",delay:"number"},uX={animation:!0,autohide:!0,delay:5e3};class Wp extends kr{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return uX}static get DefaultType(){return cX}static get NAME(){return"toast"}show(){ce.trigger(this._element,oX).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Gp,$p),this._queueCallback(()=>{this._element.classList.remove($p),ce.trigger(this._element,aX),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!ce.trigger(this._element,rX).defaultPrevented&&(this._element.classList.add($p),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove($p,Gp),ce.trigger(this._element,sX)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gp),super.dispose()}isShown(){return this._element.classList.contains(Gp)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){ce.on(this._element,eX,e=>this._onInteraction(e,!0)),ce.on(this._element,tX,e=>this._onInteraction(e,!1)),ce.on(this._element,nX,e=>this._onInteraction(e,!0)),ce.on(this._element,iX,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Wp.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}function qe(...n){return Mn(n,cu(n))}Rp(Wp),br(Wp);class Br extends ms{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const jp=i_(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:dX}=Array,{getPrototypeOf:hX,prototype:fX,keys:pX}=Object;function DP(n){if(1===n.length){const e=n[0];if(dX(e))return{args:e,keys:null};if(function mX(n){return n&&"object"==typeof n&&hX(n)===fX}(e)){const t=pX(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:gX}=Array;function IP(n){return Dt(e=>function _X(n,e){return gX(e)?n(...e):n(e)}(n,e))}function RP(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function PP(...n){const e=cu(n),t=Ew(n),{args:i,keys:r}=DP(n);if(0===i.length)return Mn([],e);const s=new wn(function yX(n,e,t=Qo){return i=>{NP(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)NP(e,()=>{const c=Mn(n[l],e);let u=!1;c.subscribe(Rn(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>RP(r,o):Qo));return t?s.pipe(IP(t)):s}function NP(n,e,t){n?gs(t,n,e):e()}function Db(...n){return function vX(){return ol(1)}()(Mn(n,cu(n)))}function LP(n){return new wn(e=>{lr(n()).subscribe(e)})}function xd(n,e){const t=on(n)?n:()=>n,i=r=>r.error(t());return new wn(e?r=>e.schedule(i,0,r):i)}function Ib(){return Un((n,e)=>{let t=null;n._refCount++;const i=Rn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class OP extends wn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,aw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ar;const t=this.getSubject();e.add(this.source.subscribe(Rn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ar.EMPTY)}return e}refCount(){return Ib()(this)}}function as(n,e){return Un((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Rn(i,l=>{r?.unsubscribe();let c=0;const u=s++;lr(n(l,u)).subscribe(r=Rn(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function hc(n){return n<=0?()=>qr:Un((e,t)=>{let i=0;e.subscribe(Rn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Mo(n,e){return Un((t,i)=>{let r=0;t.subscribe(Rn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function qp(n){return Un((e,t)=>{let i=!1;e.subscribe(Rn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function FP(n=xX){return Un((e,t)=>{let i=!1;e.subscribe(Rn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function xX(){return new jp}function Co(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Mo((r,s)=>n(r,s,i)):Qo,hc(1),t?qp(e):FP(()=>new jp))}function Sa(n,e){return on(e)?Vn(n,e,1):Vn(n,1)}function ti(n,e,t){const i=on(n)||e||t?{next:n,error:e,complete:t}:n;return i?Un((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Rn(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Qo}function To(n){return Un((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Rn(t,void 0,void 0,o=>{s=lr(n(o,To(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function UP(n,e){return Un(function EX(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Rn(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Rb(n){return n<=0?()=>qr:Un((e,t)=>{let i=[];e.subscribe(Rn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function kP(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Mo((r,s)=>n(r,s,i)):Qo,Rb(1),t?qp(e):FP(()=>new jp))}function Pb(n){return Un((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const pt="primary",Ed=Symbol("RouteTitle");class MX{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fc(n){return new MX(n)}function CX(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ls(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!BP(n[r],e[r]))return!1;return!0}function BP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function VP(n){return Array.prototype.concat.apply([],n)}function zP(n){return n.length>0?n[n.length-1]:null}function jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ao(n){return ev(n)?n:zu(n)?Mn(Promise.resolve(n)):qe(n)}const Xp=!1,AX={exact:function $P(n,e,t){if(!wa(n.segments,e.segments)||!Yp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!$P(n.children[i],e.children[i],t))return!1;return!0},subset:WP},HP={exact:function DX(n,e){return ls(n,e)},subset:function IX(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>BP(n[t],e[t]))},ignored:()=>!0};function GP(n,e,t){return AX[t.paths](n.root,e.root,t.matrixParams)&&HP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function WP(n,e,t){return jP(n,e,e.segments,t)}function jP(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!wa(r,t)||e.hasChildren()||!Yp(r,t,i))}if(n.segments.length===t.length){if(!wa(n.segments,t)||!Yp(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!WP(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(wa(n.segments,r)&&Yp(n.segments,r,i)&&n.children[pt])&&jP(n.children[pt],e,s,i)}}function Yp(n,e,t){return e.every((i,r)=>HP[t](n[r].parameters,i.parameters))}class Do{constructor(e=new wt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fc(this.queryParams)),this._queryParamMap}toString(){return NX.serialize(this)}}class wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kp(this)}}class Sd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fc(this.parameters)),this._parameterMap}toString(){return YP(this)}}function wa(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let wd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return new Nb},providedIn:"root"}),n})();class Nb{parse(e){const t=new HX(e);return new Do(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Md(e.root,!0)}`,i=function FX(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Zp(t)}=${Zp(r)}`).join("&"):`${Zp(t)}=${Zp(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function LX(n){return encodeURI(n)}(e.fragment)}`:""}`}}const NX=new Nb;function Kp(n){return n.segments.map(e=>YP(e)).join("/")}function Md(n,e){if(!n.hasChildren())return Kp(n);if(e){const t=n.children[pt]?Md(n.children[pt],!1):"",i=[];return jn(n.children,(r,s)=>{s!==pt&&i.push(`${s}:${Md(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function PX(n,e){let t=[];return jn(n.children,(i,r)=>{r===pt&&(t=t.concat(e(i,r)))}),jn(n.children,(i,r)=>{r!==pt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===pt?[Md(n.children[pt],!1)]:[`${r}:${Md(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pt]?`${Kp(n)}/${t[0]}`:`${Kp(n)}/(${t.join("//")})`}}function qP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zp(n){return qP(n).replace(/%3B/gi,";")}function Lb(n){return qP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jp(n){return decodeURIComponent(n)}function XP(n){return Jp(n.replace(/\+/g,"%20"))}function YP(n){return`${Lb(n.path)}${function OX(n){return Object.keys(n).map(e=>`;${Lb(e)}=${Lb(n[e])}`).join("")}(n.parameters)}`}const UX=/^[^\/()?;=#]+/;function Qp(n){const e=n.match(UX);return e?e[0]:""}const kX=/^[^=?&#]+/,VX=/^[^&#]+/;class HX{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[pt]=new wt(e,t)),i}parseSegment(){const e=Qp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Z(4009,Xp);return this.capture(e),new Sd(Jp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qp(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Qp(this.remaining);r&&(i=r,this.capture(i))}e[Jp(t)]=Jp(i)}parseQueryParam(e){const t=function BX(n){const e=n.match(kX);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function zX(n){const e=n.match(VX);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=XP(t),s=XP(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Qp(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Z(4010,Xp);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[pt]:new wt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Z(4011,Xp)}}function Ob(n){return n.segments.length>0?new wt([],{[pt]:n}):n}function em(n){const e={};for(const i of Object.keys(n.children)){const s=em(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function GX(n){if(1===n.numberOfChildren&&n.children[pt]){const e=n.children[pt];return new wt(n.segments.concat(e.segments),e.children)}return n}(new wt(n.segments,e))}function Ma(n){return n instanceof Do}const Fb=!1;function $X(n,e,t,i,r){if(0===t.length)return pc(e.root,e.root,e.root,i,r);const s=function eN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new QP(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return jn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new QP(t,e,i)}(t);return s.toRoot()?pc(e.root,e.root,new wt([],{}),i,r):function o(l){const c=function jX(n,e,t,i){if(n.isAbsolute)return new mc(e.root,!0,0);if(-1===i)return new mc(t,t===e.root,0);return function tN(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Z(4005,Fb&&"Invalid number of '../'");r=i.segments.length}return new mc(i,!1,r-s)}(t,i+(Cd(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),u=c.processChildren?gc(c.segmentGroup,c.index,s.commands):Ub(c.segmentGroup,c.index,s.commands);return pc(e.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function Cd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Td(n){return"object"==typeof n&&null!=n&&n.outlets}function pc(n,e,t,i,r){let o,s={};i&&jn(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:JP(n,e,t);const a=Ob(em(o));return new Do(a,s,r)}function JP(n,e,t){const i={};return jn(n.children,(r,s)=>{i[s]=r===e?t:JP(r,e,t)}),new wt(n.segments,i)}class QP{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Cd(i[0]))throw new Z(4003,Fb&&"Root segment cannot have matrix parameters");const r=i.find(Td);if(r&&r!==zP(i))throw new Z(4004,Fb&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mc{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Ub(n,e,t){if(n||(n=new wt([],{})),0===n.segments.length&&n.hasChildren())return gc(n,e,t);const i=function XX(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Td(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!iN(l,c,o))return s;i+=2}else{if(!iN(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new wt(n.segments.slice(0,i.pathIndex),{});return s.children[pt]=new wt(n.segments.slice(i.pathIndex),n.children),gc(s,0,r)}return i.match&&0===r.length?new wt(n.segments,{}):i.match&&!n.hasChildren()?kb(n,e,t):i.match?gc(n,0,r):kb(n,e,t)}function gc(n,e,t){if(0===t.length)return new wt(n.segments,{});{const i=function qX(n){return Td(n[0])?n[0].outlets:{[pt]:n}}(t),r={};if(!i[pt]&&n.children[pt]&&1===n.numberOfChildren&&0===n.children[pt].segments.length){const s=gc(n.children[pt],e,t);return new wt(n.segments,s.children)}return jn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Ub(n.children[o],e,s))}),jn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new wt(n.segments,r)}}function kb(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Td(s)){const l=YX(s.outlets);return new wt(i,l)}if(0===r&&Cd(t[0])){i.push(new Sd(n.segments[e].path,nN(t[0]))),r++;continue}const o=Td(s)?s.outlets[pt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Cd(a)?(i.push(new Sd(o,nN(a))),r+=2):(i.push(new Sd(o,{})),r++)}return new wt(i,{})}function YX(n){const e={};return jn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=kb(new wt([],{}),0,t))}),e}function nN(n){const e={};return jn(n,(t,i)=>e[i]=`${t}`),e}function iN(n,e,t){return n==t.path&&ls(e,t.parameters)}const Ad="imperative";class cs{constructor(e,t){this.id=e,this.url=t}}class Bb extends cs{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ca extends cs{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tm extends cs{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nm extends cs{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Vb extends cs{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KX extends cs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZX extends cs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JX extends cs{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class QX extends cs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eY extends cs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tY{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nY{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iY{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rY{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sY{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oY{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rN{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let cY=(()=>{class n{createUrlTree(t,i,r,s,o,a){return $X(t||i.root,r,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),dY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(e){return cY.\u0275fac(e)},providedIn:"root"}),n})();class sN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zb(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=zb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Hb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Hb(e,this._root).map(t=>t.value)}}function zb(n,e){if(n===e.value)return e;for(const t of e.children){const i=zb(n,t);if(i)return i}return null}function Hb(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Hb(n,t);if(i.length)return i.unshift(e),i}return[]}class zs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _c(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class oN extends sN{constructor(e,t){super(e),this.snapshot=t,Gb(this,e)}toString(){return this.snapshot.toString()}}function aN(n,e){const t=function hY(n,e){const o=new im([],{},{},"",{},pt,e,null,n.root,-1,{});return new cN("",new zs(o,[]))}(n,e),i=new Br([new Sd("",{})]),r=new Br({}),s=new Br({}),o=new Br({}),a=new Br(""),l=new Io(i,r,o,a,s,pt,e,t.root);return l.snapshot=t.root,new oN(new zs(l,[]),t)}class Io{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Dt(c=>c[Ed]))??qe(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Dt(e=>fc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Dt(e=>fc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lN(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function fY(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class im{get title(){return this.data?.[Ed]}constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cN extends sN{constructor(e,t){super(t),this.url=e,Gb(this,t)}toString(){return uN(this._root)}}function Gb(n,e){e.value._routerState=n,e.children.forEach(t=>Gb(n,t))}function uN(n){const e=n.children.length>0?` { ${n.children.map(uN).join(", ")} } `:"";return`${n.value}${e}`}function $b(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ls(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ls(e.params,t.params)||n.params.next(t.params),function TX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ls(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Wb(n,e){const t=ls(n.params,e.params)&&function RX(n,e){return wa(n,e)&&n.every((t,i)=>ls(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Wb(n.parent,e.parent))}function Dd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function mY(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Dd(n,i,r);return Dd(n,i)})}(n,e,t);return new zs(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Dd(n,a)),o}}const i=function gY(n){return new Io(new Br(n.url),new Br(n.params),new Br(n.queryParams),new Br(n.fragment),new Br(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Dd(n,s));return new zs(i,r)}}const jb="ngNavigationCancelingError";function dN(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Ma(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=hN(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function hN(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[jb]=!0,i.cancellationCode=e,t&&(i.url=t),i}function fN(n){return pN(n)&&Ma(n.url)}function pN(n){return n&&n[jb]}class _Y{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Id,this.attachRef=null}}let Id=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new _Y,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rm=!1;let qb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pt,this.activateEvents=new mn,this.deactivateEvents=new mn,this.attachEvents=new mn,this.detachEvents=new mn,this.parentContexts=It(Id),this.location=It(Lr),this.changeDetector=It(zf),this.environmentInjector=It(ws)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,rm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,rm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,rm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Z(4013,rm);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new yY(t,a,r.injector);if(i&&function vY(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=st({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zi]}),n})();class yY{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Io?this.route:e===Id?this.childContexts:this.parent.get(e,t)}}let Xb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ea({type:n,selectors:[["ng-component"]],standalone:!0,features:[qA],decls:1,vars:0,template:function(t,i){1&t&&Qe(0,"router-outlet")},dependencies:[qb],encapsulation:2}),n})();function mN(n,e){return n.providers&&!n._injector&&(n._injector=Rf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kb(n){const e=n.children&&n.children.map(Kb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pt&&(t.component=Xb),t}function Er(n){return n.outlet||pt}function gN(n,e){const t=n.filter(i=>Er(i)===e);return t.push(...n.filter(i=>Er(i)!==e)),t}function Rd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wY{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),$b(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=_c(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),jn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=_c(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=_c(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=_c(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new oY(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rY(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if($b(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$b(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Rd(r.snapshot),l=a?.get(Lu)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class _N{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sm{constructor(e,t){this.component=e,this.route=t}}function MY(n,e,t){const i=n._root;return Pd(i,e?e._root:null,t,[i.value])}function yc(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function YU(n){return null!==Ah(n)}(n)?e.get(n):n:i}function Pd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=_c(e);return n.children.forEach(o=>{(function TY(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function AY(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wa(n.url,e.url)||!ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wb(n,e)||!ls(n.queryParams,e.queryParams);default:return!Wb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new _N(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Pd(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new sm(a.outlet.component,o))}else o&&Nd(e,a,r),r.canActivateChecks.push(new _N(i)),Pd(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),jn(s,(o,a)=>Nd(o,t.getContext(a),r)),r}function Nd(n,e,t){const i=_c(n),r=n.value;jn(i,(s,o)=>{Nd(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new sm(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Ld(n){return"function"==typeof n}function Zb(n){return n instanceof jp||"EmptyError"===n?.name}const om=Symbol("INITIAL_VALUE");function vc(){return as(n=>PP(n.map(e=>e.pipe(hc(1),function bX(...n){const e=cu(n);return Un((t,i)=>{(e?Db(n,t,e):Db(n,t)).subscribe(i)})}(om)))).pipe(Dt(e=>{for(const t of e)if(!0!==t){if(t===om)return om;if(!1===t||t instanceof Do)return t}return!0}),Mo(e=>e!==om),hc(1)))}function yN(n){return function q2(...n){return rw(n)}(ti(e=>{if(Ma(e))throw dN(0,e)}),Dt(e=>!0===e))}const Jb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vN(n,e,t,i,r){const s=Qb(n,e,t);return s.matched?function WY(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?qe(r.map(o=>{const a=yc(o,n);return Ao(function LY(n){return n&&Ld(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(vc(),yN()):qe(!0)}(i=mN(e,i),e,t).pipe(Dt(o=>!0===o?s:{...Jb})):qe(s)}function Qb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Jb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||CX)(t,n,e);if(!r)return{...Jb};const s={};jn(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function am(n,e,t,i){if(t.length>0&&function XY(n,e,t){return t.some(i=>lm(n,e,i)&&Er(i)!==pt)}(n,t,i)){const s=new wt(e,function qY(n,e,t,i){const r={};r[pt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Er(s)!==pt){const o=new wt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Er(s)]=o}return r}(n,e,i,new wt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function YY(n,e,t){return t.some(i=>lm(n,e,i))}(n,t,i)){const s=new wt(n.segments,function jY(n,e,t,i,r){const s={};for(const o of i)if(lm(n,t,o)&&!r[Er(o)]){const a=new wt([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[Er(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new wt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function lm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bN(n,e,t,i){return!!(Er(n)===i||i!==pt&&lm(e,t,n))&&("**"===n.path||Qb(e,n,t).matched)}function xN(n,e,t){return 0===e.length&&!n.children[t]}const cm=!1;class um{constructor(e){this.segmentGroup=e||null}}class EN{constructor(e){this.urlTree=e}}function Od(n){return xd(new um(n))}function SN(n){return xd(new EN(n))}class QY{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=am(this.urlTree.root,[],[],this.config).segmentGroup,t=new wt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,pt).pipe(Dt(s=>this.createUrlTree(em(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(To(s=>{if(s instanceof EN)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof um?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,pt).pipe(Dt(r=>this.createUrlTree(em(r),e.queryParams,e.fragment))).pipe(To(r=>{throw r instanceof um?this.noMatchError(r):r}))}noMatchError(e){return new Z(4002,cm)}createUrlTree(e,t,i){const r=Ob(e);return new Do(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Dt(s=>new wt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Mn(r).pipe(Sa(s=>{const o=i.children[s],a=gN(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Dt(l=>({segment:l,outlet:s})))}),UP((s,o)=>(s[o.outlet]=o.segment,s),{}),kP())}expandSegment(e,t,i,r,s,o){return Mn(i).pipe(Sa(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(To(c=>{if(c instanceof um)return qe(null);throw c}))),Co(a=>!!a),To((a,l)=>{if(Zb(a))return xN(t,r,s)?qe(new wt([],{})):Od(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return bN(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Od(t):Od(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?SN(s):this.lineralizeSegments(i,s).pipe(Vn(o=>{const a=new wt(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Qb(t,r,s);if(!a)return Od(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?SN(d):this.lineralizeSegments(r,d).pipe(Vn(h=>this.expandSegment(e,t,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=mN(i,e),i.loadChildren?(i._loadedRoutes?qe({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Dt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new wt(r,{})))):qe(new wt(r,{}))):vN(t,i,r,e).pipe(as(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Vn(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=am(t,a,l,h),_=new wt(f.segments,f.children);if(0===p.length&&_.hasChildren())return this.expandChildren(d,h,_).pipe(Dt(y=>new wt(a,y)));if(0===h.length&&0===p.length)return qe(new wt(a,{}));const g=Er(i)===s;return this.expandSegment(d,_,h,p,g?pt:s,!0).pipe(Dt(b=>new wt(a.concat(b.segments),b.children)))})):Od(t)))}getChildConfig(e,t,i){return t.children?qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function $Y(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?qe(!0):qe(r.map(o=>{const a=yc(o,n);return Ao(function IY(n){return n&&Ld(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(vc(),yN())}(e,t,i).pipe(Vn(r=>r?this.configLoader.loadChildren(e,t).pipe(ti(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function ZY(n){return xd(hN(cm,3))}())):qe({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return qe(i);if(r.numberOfChildren>1||!r.children[pt])return e.redirectTo,xd(new Z(4e3,cm));r=r.children[pt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Do(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return jn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return jn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new wt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Z(4001,cm);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class tK{}class rK{constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=am(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pt).pipe(Dt(t=>{if(null===t)return null;const i=new im([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zs(i,t),s=new cN(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=lN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return Mn(Object.keys(i.children)).pipe(Sa(r=>{const s=i.children[r],o=gN(t,r);return this.processSegmentGroup(e,o,s,r)}),UP((r,s)=>r&&s?(r.push(...s),r):null),function SX(n,e=!1){return Un((t,i)=>{let r=0;t.subscribe(Rn(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),qp(null),kP(),Dt(r=>{if(null===r)return null;const s=MN(r);return function sK(n){n.sort((e,t)=>e.value.outlet===pt?-1:t.value.outlet===pt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return Mn(t).pipe(Sa(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),Co(o=>!!o),To(o=>{if(Zb(o))return xN(i,r,s)?qe([]):qe(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!bN(t,i,r,s))return qe(null);let o;if("**"===t.path){const a=r.length>0?zP(r).parameters:{},l=TN(i)+r.length;o=qe({snapshot:new im(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AN(t),Er(t),t.component??t._loadedComponent??null,t,CN(i),l,DN(t)),consumedSegments:[],remainingSegments:[]})}else o=vN(i,t,r,e).pipe(Dt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=TN(i)+l.length;return{snapshot:new im(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AN(t),Er(t),t.component??t._loadedComponent??null,t,CN(i),d,DN(t)),consumedSegments:l,remainingSegments:c}}));return o.pipe(as(a=>{if(null===a)return qe(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function oK(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=am(i,c,u,h.filter(g=>void 0===g.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(Dt(g=>null===g?null:[new zs(l,g)]));if(0===h.length&&0===p.length)return qe([new zs(l,[])]);const _=Er(t)===s;return this.processSegment(d,h,f,p,_?pt:s).pipe(Dt(g=>null===g?null:[new zs(l,g)]))}))}}function aK(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function MN(n){const e=[],t=new Set;for(const i of n){if(!aK(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=MN(i.children);e.push(new zs(i.value,r))}return e.filter(i=>!t.has(i))}function CN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function TN(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function AN(n){return n.data||{}}function DN(n){return n.resolve||{}}function IN(n){return"string"==typeof n.title||null===n.title}function ex(n){return as(e=>{const t=n(e);return t?Mn(t).pipe(Dt(()=>e)):qe(e)})}const bc=new $e("ROUTES");let tx=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=It(FD)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Ao(t.loadComponent()).pipe(Dt(PN),ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Pb(()=>{this.componentLoaders.delete(t)})),r=new OP(i,()=>new ms).pipe(Ib());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return qe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Dt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=VP(l.get(bc,[],Je.Self|Je.Optional)));return{routes:c.map(Kb),injector:l}}),Pb(()=>{this.childrenLoaders.delete(i)})),o=new OP(s,()=>new ms).pipe(Ib());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return Ao(t()).pipe(Dt(PN),Vn(i=>i instanceof WA||Array.isArray(i)?qe(i):Mn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PN(n){return function mK(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let hm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ms,this.configLoader=It(tx),this.environmentInjector=It(ws),this.urlSerializer=It(wd),this.rootContexts=It(Id),this.navigationId=0,this.afterPreactivation=()=>qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new nY(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new tY(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Br({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ad,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mo(i=>0!==i.id),Dt(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),as(i=>{let r=!1,s=!1;return qe(i).pipe(ti(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),as(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new nm(o.id,t.serializeUrl(i.rawUrl),u,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),qr}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return NN(o.source)&&(t.browserUrlTree=o.extractedUrl),qe(o).pipe(as(u=>{const d=this.transitions?.getValue();return this.events.next(new Bb(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?qr:Promise.resolve(u)}),function eK(n,e,t,i){return as(r=>function JY(n,e,t,i,r){return new QY(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Dt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),ti(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function cK(n,e,t,i,r){return Vn(s=>function iK(n,e,t,i,r,s,o="emptyOnly"){return new rK(n,e,t,i,r,o,s).recognize().pipe(as(a=>null===a?function nK(n){return new wn(e=>e.error(n))}(new tK):qe(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(Dt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ti(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new KX(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=o,_=new Bb(u,this.urlSerializer.serialize(d),h,f);this.events.next(_);const g=aN(d,this.rootComponentType).snapshot;return qe(i={...o,targetSnapshot:g,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new nm(o.id,t.serializeUrl(i.extractedUrl),u,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),qr}}),ti(o=>{const a=new ZX(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Dt(o=>i={...o,guards:MY(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function FY(n,e){return Vn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?qe({...t,guardsResult:!0}):function UY(n,e,t,i){return Mn(n).pipe(Vn(r=>function GY(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?qe(s.map(a=>{const l=Rd(e)??r,c=yc(a,l);return Ao(function NY(n){return n&&Ld(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(Co())})).pipe(vc()):qe(!0)}(r.component,r.route,t,e,i)),Co(r=>!0!==r,!0))}(o,i,r,n).pipe(Vn(a=>a&&function DY(n){return"boolean"==typeof n}(a)?function kY(n,e,t,i){return Mn(e).pipe(Sa(r=>Db(function VY(n,e){return null!==n&&e&&e(new iY(n)),qe(!0)}(r.route.parent,i),function BY(n,e){return null!==n&&e&&e(new sY(n)),qe(!0)}(r.route,i),function HY(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function CY(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>LP(()=>qe(o.guards.map(l=>{const c=Rd(o.node)??t,u=yc(l,c);return Ao(function PY(n){return n&&Ld(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Co())})).pipe(vc())));return qe(s).pipe(vc())}(n,r.path,t),function zY(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return qe(!0);const r=i.map(s=>LP(()=>{const o=Rd(e)??t,a=yc(s,o);return Ao(function RY(n){return n&&Ld(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Co())}));return qe(r).pipe(vc())}(n,r.route,t))),Co(r=>!0!==r,!0))}(i,s,n,e):qe(a)),Dt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),ti(o=>{if(i.guardsResult=o.guardsResult,Ma(o.guardsResult))throw dN(0,o.guardsResult);const a=new JX(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Mo(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),ex(o=>{if(o.guards.canActivateChecks.length)return qe(o).pipe(ti(a=>{const l=new QX(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),as(a=>{let l=!1;return qe(a).pipe(function uK(n,e){return Vn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return qe(t);let s=0;return Mn(r).pipe(Sa(o=>function dK(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!IN(r)&&(s[Ed]=r.title),function hK(n,e,t,i){const r=function fK(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return qe({});const s={};return Mn(r).pipe(Vn(o=>function pK(n,e,t,i){const r=Rd(e)??i,s=yc(n,r);return Ao(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Co(),ti(a=>{s[o]=a}))),Rb(1),function wX(n){return Dt(()=>n)}(s),To(o=>Zb(o)?qr:xd(o)))}(s,n,e,i).pipe(Dt(o=>(n._resolvedData=o,n.data=lN(n,t).resolve,r&&IN(r)&&(n.data[Ed]=r.title),null)))}(o.route,i,n,e)),ti(()=>s++),Rb(1),Vn(o=>s===r.length?qe(t):qr))})}(t.paramsInheritanceStrategy,this.environmentInjector),ti({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ti(a=>{const l=new eY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),ex(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(ti(u=>{l.component=u}),Dt(()=>{})));for(const u of l.children)c.push(...a(u));return c};return PP(a(o.targetSnapshot.root)).pipe(qp(),hc(1))}),ex(()=>this.afterPreactivation()),Dt(o=>{const a=function pY(n,e,t){const i=Dd(n,e._root,t?t._root:void 0);return new oN(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),ti(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>Dt(i=>(new wY(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),hc(1),ti({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ca(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Pb(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),To(o=>{if(s=!0,pN(o)){fN(o)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new tm(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),fN(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||NN(i.source)};t.scheduleNavigation(l,Ad,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new Vb(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(o))}catch(l){i.reject(l)}}return qr}))}))}cancelNavigationTransition(t,i,r){const s=new tm(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NN(n){return n!==Ad}let LN=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===pt);return i}getResolvedTitleForRoute(t){return t.data[Ed]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return It(gK)},providedIn:"root"}),n})(),gK=(()=>{class n extends LN{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(ze(iI))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return It(vK)},providedIn:"root"}),n})();class yK{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let vK=(()=>{class n extends yK{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gn(n)))(i||n)}}(),n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fm=new $e("",{providedIn:"root",factory:()=>({})});let xK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return It(EK)},providedIn:"root"}),n})(),EK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SK(n){throw n}function wK(n,e,t){return e.parse("/")}const MK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ni=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=It(_G),this.isNgZoneEnabled=!1,this.options=It(fm,{optional:!0})||{},this.errorHandler=this.options.errorHandler||SK,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||wK,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=It(xK),this.routeReuseStrategy=It(_K),this.urlCreationStrategy=It(dY),this.titleStrategy=It(LN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=VP(It(bc,{optional:!0})??[]),this.navigationTransitions=It(hm),this.urlSerializer=It(wd),this.location=It(Wv),this.isNgZoneEnabled=It(ln)instanceof ln&&ln.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Do,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=aN(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ad,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Kb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ma(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Ad,null,i)}navigate(t,i={skipLocationChange:!1}){return function TK(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Z(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...MK}:!1===i?{...CK}:i,Ma(t))return GP(this.currentUrlTree,t,r);const s=this.parseUrl(t);return GP(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ON{}let IK=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Mo(t=>t instanceof Ca),Sa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Rf(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Mn(r).pipe(ol())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):qe(null);const s=r.pipe(Vn(o=>null===o?qe(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Mn([s,this.loader.loadComponent(i)]).pipe(ol()):s})}}return n.\u0275fac=function(t){return new(t||n)(ze(ni),ze(FD),ze(ws),ze(ON),ze(tx))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rx=new $e("");let FN=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ca&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function YC(){throw new Error("invalid")}()},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();var Zi=(()=>((Zi=Zi||{})[Zi.COMPLETE=0]="COMPLETE",Zi[Zi.FAILED=1]="FAILED",Zi[Zi.REDIRECTING=2]="REDIRECTING",Zi))();const xc=!1;function Ro(n,e){return{\u0275kind:n,\u0275providers:e}}const sx=new $e("",{providedIn:"root",factory:()=>!1});function kN(){const n=It(Jr);return e=>{const t=n.get(Qu);if(e!==t.components[0])return;const i=n.get(ni),r=n.get(BN);1===n.get(ox)&&i.initialNavigation(),n.get(VN,null,Je.Optional)?.setUpPreloading(),n.get(rx,null,Je.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const BN=new $e(xc?"bootstrap done indicator":"",{factory:()=>new ms}),ox=new $e(xc?"initial navigation":"",{providedIn:"root",factory:()=>1});function OK(){let n=[];return n=xc?[{provide:uf,multi:!0,useFactory:()=>{const e=It(ni);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function aY(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Ro(1,n)}const VN=new $e(xc?"router preloader":"");function FK(n){return Ro(0,[{provide:VN,useExisting:IK},{provide:ON,useExisting:n}])}const Fd=!1,zN=new $e(Fd?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),UK=[Wv,{provide:wd,useClass:Nb},ni,Id,{provide:Io,useFactory:function UN(n){return n.routerState.root},deps:[ni]},tx,Fd?{provide:sx,useValue:!0}:[]];function kK(){return new $D("Router",ni)}let HN=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[UK,Fd&&i?.enableTracing?OK().\u0275providers:[],{provide:bc,multi:!0,useValue:t},{provide:zN,useFactory:HK,deps:[[ni,new wu,new Mu]]},{provide:fm,useValue:i||{}},i?.useHash?{provide:po,useClass:p1}:{provide:po,useClass:f1},{provide:rx,useFactory:()=>{const n=It(b$),e=It(ln),t=It(fm),i=It(hm),r=It(wd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new FN(r,i,n,e,t)}},i?.preloadingStrategy?FK(i.preloadingStrategy).\u0275providers:[],{provide:$D,multi:!0,useFactory:kK},i?.initialNavigation?GK(i):[],[{provide:GN,useFactory:kN},{provide:GD,multi:!0,useExisting:GN}]]}}static forChild(t){return{ngModule:n,providers:[{provide:bc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ze(zN,8))},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({imports:[Xb]}),n})();function HK(n){if(Fd&&n)throw new Z(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function GK(n){return["disabled"===n.initialNavigation?Ro(3,[{provide:Uf,multi:!0,useFactory:()=>{const e=It(ni);return()=>{e.setUpLocationChangeListener()}}},{provide:ox,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ro(2,[{provide:ox,useValue:0},{provide:Uf,multi:!0,deps:[Jr],useFactory:e=>{const t=e.get(n5,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(ni),s=e.get(BN);(function RK(n,e){n.events.pipe(Mo(t=>t instanceof Ca||t instanceof tm||t instanceof Vb||t instanceof nm),Dt(t=>t instanceof Ca||t instanceof nm?Zi.COMPLETE:t instanceof tm&&(0===t.code||1===t.code)?Zi.REDIRECTING:Zi.FAILED),Mo(t=>t!==Zi.REDIRECTING),hc(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(hm).afterPreactivation=()=>(i(!0),s.closed?qe(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const GN=new $e(Fd?"Router Initializer":"");let WK=(()=>{const e=class{constructor(){this.title="web-app"}ngAfterViewInit(){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(i=>{new ba(i)})}};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ea({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){1&r&&Qe(0,"router-outlet")},dependencies:[qb]}),n})();class jK{constructor(){this.UserName="",this.Password=""}}class qK{constructor(){this.FirstName="",this.LastName="",this.EmailAddress="",this.Password=""}}let XK=(()=>{const e=class{constructor(){}};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),$N=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Ms),ae($i))},n.\u0275dir=st({type:n}),n})(),Ta=(()=>{class n extends $N{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gn(n)))(i||n)}}(),n.\u0275dir=st({type:n,features:[$t]}),n})();const us=new $e("NgValueAccessor"),ZK={provide:us,useExisting:Kt(()=>Ud),multi:!0},QK=new $e("CompositionEventMode");let Ud=(()=>{class n extends $N{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JK(){const n=Ps()?Ps().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Ms),ae($i),ae(QK,8))},n.\u0275dir=st({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[nn([ZK]),$t]}),n})();const eZ=!1;function Po(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function jN(n){return null!=n&&"number"==typeof n.length}const ii=new $e("NgValidators"),No=new $e("NgAsyncValidators");function YN(n){return Po(n.value)?{required:!0}:null}function pm(n){return null}function tL(n){return null!=n}function nL(n){const e=zu(n)?Mn(n):n;if(eZ&&!ev(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new Z(-1101,t)}return e}function iL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function rL(n,e){return e.map(t=>t(n))}function sL(n){return n.map(e=>function nZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function ax(n){return null!=n?function oL(n){if(!n)return null;const e=n.filter(tL);return 0==e.length?null:function(t){return iL(rL(t,e))}}(sL(n)):null}function lx(n){return null!=n?function aL(n){if(!n)return null;const e=n.filter(tL);return 0==e.length?null:function(t){return function YK(...n){const e=Ew(n),{args:t,keys:i}=DP(n),r=new wn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;lr(t[u]).subscribe(Rn(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?RP(i,a):a),s.complete())}))}});return e?r.pipe(IP(e)):r}(rL(t,e).map(nL)).pipe(Dt(iL))}}(sL(n)):null}function lL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cx(n){return n?Array.isArray(n)?n:[n]:[]}function mm(n,e){return Array.isArray(n)?n.includes(e):n===e}function dL(n,e){const t=cx(e);return cx(n).forEach(r=>{mm(t,r)||t.push(r)}),t}function hL(n,e){return cx(e).filter(t=>!mm(n,t))}class fL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ax(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _i extends fL{get formDirective(){return null}get path(){return null}}class Lo extends fL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ux=(()=>{class n extends pL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Lo,2))},n.\u0275dir=st({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Mf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[$t]}),n})();const kd="VALID",_m="INVALID",Ec="PENDING",Bd="DISABLED";function ym(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class yL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kd}get invalid(){return this.status===_m}get pending(){return this.status==Ec}get disabled(){return this.status===Bd}get enabled(){return this.status!==Bd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hL(e,this._rawAsyncValidators))}hasValidator(e){return mm(this._rawValidators,e)}hasAsyncValidator(e){return mm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ec,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bd,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kd,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kd||this.status===Ec)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bd:kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ec,this._hasOwnPendingAsyncValidator=!0;const t=nL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new mn,this.statusChanges=new mn}_calculateStatus(){return this._allControlsDisabled()?Bd:this.errors?_m:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ec)?Ec:this._anyControlsHaveStatus(_m)?_m:kd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ym(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function uZ(n){return Array.isArray(n)?ax(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dZ(n){return Array.isArray(n)?lx(n):n||null}(this._rawAsyncValidators)}}const Aa=new $e("CallSetDisabledState",{providedIn:"root",factory:()=>Vd}),Vd="always";function zd(n,e,t=Vd){(function _x(n,e){const t=function cL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(lL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function uL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(lL(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();xm(e._rawValidators,r),xm(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&vL(n,e)})}(n,e),function gZ(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function mZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&vL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fZ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function EL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function SL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wL=class extends yL{constructor(e=null,t,i){super(function px(n){return(ym(n)?n.validators:n)||null}(t),function mx(n,e){return(ym(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ym(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=SL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){SL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wZ={provide:Lo,useExisting:Kt(()=>Sm)},TL=(()=>Promise.resolve())();let Sm=(()=>{class n extends Lo{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new wL,this._registered=!1,this.update=new mn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function bx(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Ud?t=s:function vZ(n){return Object.getPrototypeOf(n.constructor)===Ta}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function vx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){TL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&Xl(i);TL.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function vm(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(ae(_i,9),ae(ii,10),ae(No,10),ae(us,10),ae(zf,8),ae(Aa,8))},n.\u0275dir=st({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[nn([wZ]),$t,zi]}),n})();const CZ={provide:us,useExisting:Kt(()=>Ex),multi:!0};let Ex=(()=>{class n extends Ta{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gn(n)))(i||n)}}(),n.\u0275dir=st({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&Be("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[nn([CZ]),$t]}),n})(),AL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({}),n})();const Sx=new $e("NgModelWithFormControlWarning");function FL(n){return"number"==typeof n?n:parseInt(n,10)}let Da=(()=>{class n{constructor(){this._validator=pm}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):pm,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=st({type:n,features:[zi]}),n})();const GZ={provide:ii,useExisting:Kt(()=>wm),multi:!0};let wm=(()=>{class n extends Da{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Xl,this.createValidator=t=>YN}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gn(n)))(i||n)}}(),n.\u0275dir=st({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&ts("required",i._enabled?"":null)},inputs:{required:"required"},features:[nn([GZ]),$t]}),n})();const jZ={provide:ii,useExisting:Kt(()=>Dx),multi:!0};let Dx=(()=>{class n extends Da{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>FL(t),this.createValidator=t=>function JN(n){return e=>Po(e.value)||!jN(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gn(n)))(i||n)}}(),n.\u0275dir=st({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&ts("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[nn([jZ]),$t]}),n})();const qZ={provide:ii,useExisting:Kt(()=>Ix),multi:!0};let Ix=(()=>{class n extends Da{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>FL(t),this.createValidator=t=>function QN(n){return e=>jN(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gn(n)))(i||n)}}(),n.\u0275dir=st({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&ts("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[nn([qZ]),$t]}),n})(),GL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({imports:[AL]}),n})(),Rx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Aa,useValue:t.callSetDisabledState??Vd}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({imports:[GL]}),n})(),Px=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sx,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Aa,useValue:t.callSetDisabledState??Vd}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=ci({imports:[GL]}),n})();function KZ(n,e){if(1&n){const t=bn();W(0,"div",1)(1,"div",2)(2,"div",3)(3,"figure"),Qe(4,"img",4),J(),W(5,"div",5)(6,"h2",6),De(7,"Login"),J(),W(8,"label",7),zh(),W(9,"svg",8),Qe(10,"path",9),J(),Hh(),W(11,"input",10),Be("ngModelChange",function(r){return nt(t),it(Se().loginDetails.UserName=r)}),J()(),W(12,"div",11)(13,"label",12),zh(),W(14,"svg",8),Qe(15,"path",13),J(),Hh(),W(16,"input",14),Be("ngModelChange",function(r){return nt(t),it(Se().loginDetails.Password=r)}),J()()(),W(17,"div",15)(18,"button",16),Be("click",function(){return nt(t),it(Se().loginIn())}),W(19,"strong"),De(20,"Login"),J()()(),W(21,"div",15)(22,"button",17),Be("click",function(){return nt(t),it(Se().isExistingUser=!1)}),W(23,"strong"),De(24,"Create New User"),J()()(),W(25,"div",18)(26,"button",19),Be("click",function(){return nt(t),it(Se().direct_JoinMeet())}),W(27,"strong"),De(28,"Join Meet"),J()()()()()()()}if(2&n){const t=Se();Te(11),ke("ngModel",t.loginDetails.UserName),Te(5),ke("ngModel",t.loginDetails.Password)}}function ZZ(n,e){if(1&n){const t=bn();W(0,"div",1)(1,"div",2)(2,"div",20)(3,"figure"),Qe(4,"img",21),J(),W(5,"div",5)(6,"div",11)(7,"a",22),Be("click",function(){return nt(t),it(Se().isExistingUser=!0)}),De(8,"Back to Login"),J(),W(9,"h2",6),De(10,"Create New User"),J()(),W(11,"label",23)(12,"input",24),Be("ngModelChange",function(r){return nt(t),it(Se().newUser.FirstName=r)}),J()(),W(13,"label",23)(14,"input",25),Be("ngModelChange",function(r){return nt(t),it(Se().newUser.LastName=r)}),J()(),W(15,"label",23)(16,"input",10),Be("ngModelChange",function(r){return nt(t),it(Se().newUser.EmailAddress=r)}),J()(),W(17,"div",11)(18,"label",12)(19,"input",14),Be("ngModelChange",function(r){return nt(t),it(Se().newUser.Password=r)}),J()()(),W(20,"div",15)(21,"button",16),Be("click",function(){return nt(t),it(Se().createNewUser())}),W(22,"strong"),De(23,"Create"),J()()()()()()()}if(2&n){const t=Se();Te(12),ke("ngModel",t.newUser.FirstName),Te(2),ke("ngModel",t.newUser.LastName),Te(2),ke("ngModel",t.newUser.EmailAddress),Te(3),ke("ngModel",t.newUser.Password)}}let JZ=(()=>{const e=class{constructor(i,r){this._authServices=i,this._router=r,this.loginDetails=new jK,this.isExistingUser=!0,this.newUser=new qK,this.userList=[]}ngOnInit(){this.getUserList()}loginIn(){if(this.userList.length)for(let i=0;i<this.userList.length;i++)this.userList[i].EmailAddress.toLowerCase()==this.loginDetails.UserName.toLowerCase()&&this.userList[i].Password==this.loginDetails.Password&&(localStorage.setItem("user",JSON.stringify(this.userList[i])),this._router.navigate(["dashboard"]));else alert("Please create user first."),this.isExistingUser=!1}direct_JoinMeet(){this._router.navigate(["dashboard"],{queryParams:{redirect:"DirectJoinMeet"}})}createNewUser(){return this.newUser.FirstName?this.newUser.LastName?this.newUser.EmailAddress?this.newUser.Password?(this.newUser.FirstName&&this.newUser.LastName&&this.newUser.EmailAddress&&this.newUser.Password&&(localStorage.setItem("createdUser_"+new Date,JSON.stringify(this.newUser)),this.isExistingUser=!1,this.getUserList(),alert("User has been created, Please login now.")),null):(alert("Please enter password!"),null):(alert("Please enter email address!"),null):(alert("Please enter lastname!"),null):(alert("Please enter firstname!"),null)}getUserList(){if(localStorage.length){for(let r=0;r<localStorage.length;r++){let s=localStorage.key(r);if(s?.toLowerCase().includes("createduser")){let o=localStorage.getItem(s);o&&(o=JSON.parse(o),this.userList.push(o))}}console.log(this.userList)}}};let n=e;return e.\u0275fac=function(r){return new(r||e)(ae(XK),ae(ni))},e.\u0275cmp=ea({type:e,selectors:[["app-login"]],decls:2,vars:2,consts:[["class","container mx-auto",4,"ngIf"],[1,"container","mx-auto"],[1,"flex","justify-center","items-center",2,"height","99dvh"],[1,"card","lg:card-side","bg-base-100","shadow-xl","flex","flex-row","gap-2"],["src","assets/images/icon.png","alt","Album",2,"height","550px !important"],[1,"card-body"],[1,"card-title","font-extrabold"],[1,"input","input-bordered","flex","items-center","gap-2","mt-10"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16","fill","currentColor",1,"h-4","w-4","opacity-70"],["d","M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM12.735 14c.618 0 1.093-.561.872-1.139a6.002 6.002 0 0 0-11.215 0c-.22.578.254 1.139.872 1.139h9.47Z"],["type","text","placeholder","Email","required","",1,"grow",3,"ngModel","ngModelChange"],[1,"flex","flex-col"],[1,"input","input-bordered","flex","items-center","gap-2"],["fill-rule","evenodd","d","M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z","clip-rule","evenodd"],["type","password","value","","placeholder","Password","required","",1,"grow",3,"ngModel","ngModelChange"],[1,"card-actions","justify-center","mt-10"],[1,"btn","btn-success","text-white",3,"click"],[1,"btn","btn-primary","text-white",3,"click"],[1,"card-actions","justify-center","mt-3"],[1,"btn",2,"background-color","#FFCF50 !important",3,"click"],[1,"card","lg:card-side","bg-base-100","shadow-xl"],["src","https://img.daisyui.com/images/stock/photo-1494232410401-ad00d5433cfa.webp","alt","Album"],[2,"cursor","pointer","color","red",3,"click"],[1,"input","input-bordered","flex","items-center","gap-2","mt-4"],["type","text","placeholder","First Name","required","",1,"grow",3,"ngModel","ngModelChange"],["type","text","placeholder","Last Name","required","",1,"grow",3,"ngModel","ngModelChange"]],template:function(r,s){1&r&&(xt(0,KZ,29,2,"div",0),xt(1,ZZ,24,4,"div",0)),2&r&&(ke("ngIf",s.isExistingUser),Te(1),ke("ngIf",!s.isExistingUser))},dependencies:[ep,Ud,ux,wm,Sm]}),n})();class Nx{constructor(){this.MeetName="",this.MeetDateTime="",this.MeetCandidateQuantity="",this.MeetCode=""}}class Lx{constructor(){this.FirstName="",this.LastName="",this.ConatctNo="",this.MeetJoiningDate="",this.MeetCode="",this.SeatNo="",this.Gender=""}}let $L=(()=>{const e=class{constructor(){}saveAndGenerateMeet(i){localStorage.setItem("newMeet_"+i.MeetCode,JSON.stringify(i))}getMeetDetailsByMeetCode(i){let r=localStorage.getItem("newMeet_"+i)||null;return r?JSON.parse(r):null}joinMeet(i,r){i.MeetJoiningDate=(new Date).toString(),localStorage.setItem("user_"+i.ConatctNo+"_"+i.MeetCode+"_NewRequest"+(r?"_MeetHoster":""),JSON.stringify(i))}getUserDetailByContactNo(i){let r=localStorage.getItem("user_"+i)||null;return r?JSON.parse(r):null}checkUserCount_InMeeting(i){let r=this.getMeetDetailsByMeetCode(i)||null,s=0;if(r){if(s=Number(r.MeetCandidateQuantity),localStorage,localStorage.length)for(let a=0;a<localStorage.length;a++){let l=localStorage.key(a);l&&l.toLowerCase().trim().includes(i)&&(s+=1)}return s<=Number(r.MeetCandidateQuantity)}return!1}};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function QZ(n,e){if(1&n){const t=bn();W(0,"div",6)(1,"figure"),Qe(2,"img",15),J(),W(3,"div",8)(4,"h2",9),De(5,"New Meeting"),J(),W(6,"p"),De(7,"If a dog chews shoes whose shoes does he choose?"),J(),W(8,"div",10)(9,"button",11),Be("click",function(){return nt(t),it(Se(2).meetType="new_meet")}),De(10,"Create "),Qe(11,"i",16),J()()()()}}function eJ(n,e){if(1&n){const t=bn();$n(0),xt(1,QZ,12,0,"div",5),W(2,"div",6)(3,"figure"),Qe(4,"img",7),J(),W(5,"div",8)(6,"h2",9),De(7,"Join Conference"),J(),W(8,"p"),De(9,"If a dog chews shoes whose shoes does he choose?"),J(),W(10,"div",10)(11,"button",11),Be("click",function(){return nt(t),it(Se().setJoiningMeetDetail("conference","join_meet_form"))}),W(12,"strong"),De(13,"Join "),Qe(14,"i",12),J()()()()(),W(15,"div",6)(16,"figure"),Qe(17,"img",13),J(),W(18,"div",8)(19,"h2",9),De(20,"Join Office Cabin meet"),J(),W(21,"p"),De(22,"If a dog chews shoes whose shoes does he choose?"),J(),W(23,"div",10)(24,"button",11),Be("click",function(){return nt(t),it(Se().setJoiningMeetDetail("office","join_meet_form"))}),W(25,"strong"),De(26,"Join "),Qe(27,"i",12),J()()()()(),W(28,"div",6)(29,"figure"),Qe(30,"img",14),J(),W(31,"div",8)(32,"h2",9),De(33,"Join Class"),J(),W(34,"p"),De(35,"If a dog chews shoes whose shoes does he choose?"),J(),W(36,"div",10)(37,"button",11),Be("click",function(){return nt(t),it(Se().setJoiningMeetDetail("class","join_meet_form"))}),W(38,"strong"),De(39,"Join "),Qe(40,"i",12),J()()()()(),Wn()}if(2&n){const t=Se();Te(1),ke("ngIf",!t.isRedirectedDirectJoinMeet)}}function tJ(n,e){if(1&n){const t=bn();$n(0),W(1,"div",17)(2,"a",18),Be("click",function(){return nt(t),it(Se().meetType="")}),De(3,"Back to main screen"),J()(),W(4,"div",6)(5,"figure"),Qe(6,"img",19),J(),W(7,"div",8)(8,"h2",9),De(9,"Conference Meet"),J(),W(10,"p"),De(11,"If a dog chews shoes whose shoes does he choose?"),J(),W(12,"div",10)(13,"button",11),Be("click",function(){return nt(t),it(Se().setNewMeetDetail("conference","new_meet_form"))}),De(14,"Create "),Qe(15,"i",16),J()()()(),W(16,"div",6)(17,"figure"),Qe(18,"img",20),J(),W(19,"div",8)(20,"h2",9),De(21,"Class Meet"),J(),W(22,"p"),De(23,"If a dog chews shoes whose shoes does he choose?"),J(),W(24,"div",10)(25,"button",11),Be("click",function(){return nt(t),it(Se().setNewMeetDetail("class","new_meet_form"))}),De(26,"Create "),Qe(27,"i",16),J()()()(),W(28,"div",6)(29,"figure"),Qe(30,"img",13),J(),W(31,"div",8)(32,"h2",9),De(33,"Office Cabin meet"),J(),W(34,"p"),De(35,"If a dog chews shoes whose shoes does he choose?"),J(),W(36,"div",10)(37,"button",11),Be("click",function(){return nt(t),it(Se().setNewMeetDetail("Office","new_meet_form"))}),De(38,"Create "),Qe(39,"i",16),J()()()(),Wn()}}function nJ(n,e){if(1&n){const t=bn();$n(0),W(1,"div",21)(2,"div",22)(3,"div",23)(4,"a",24),Be("click",function(){return nt(t),it(Se().meetType="new_meet")}),De(5,"Back to meeting screen"),J()(),W(6,"div",8)(7,"h2",9),De(8),Wl(9,"uppercase"),J(),W(10,"label",25)(11,"strong"),De(12,"Code"),J(),Qe(13,"input",26),W(14,"button",27),Be("click",function(){return nt(t),it(Se().copyCode_Clipboard())}),Qe(15,"i",28),W(16,"strong"),De(17),J()()(),W(18,"label",29)(19,"div",30)(20,"span",31)(21,"strong"),De(22,"Candidate Limit?"),J()()(),W(23,"input",32),Be("ngModelChange",function(r){return nt(t),it(Se().newMeetDetail.MeetCandidateQuantity=r)}),J()(),W(24,"label",29)(25,"div",30)(26,"span",31)(27,"strong"),De(28,"Meeting Date?"),J()()(),W(29,"input",33),Be("ngModelChange",function(r){return nt(t),it(Se().newMeetDetail.MeetDateTime=r)}),J()(),W(30,"div",10)(31,"button",11),Be("click",function(){return nt(t),it(Se().createMeet())}),De(32,"Create "),Qe(33,"i",16),J()()()()(),Wn()}if(2&n){const t=Se();Te(8),zl("",Yu(9,5,t.creatingMeetType)," MEET"),Te(5),ke("value",t.newMeetGeneratedCode),Te(4),As(t.isCopied?"Copied":"Copy"),Te(6),ke("ngModel",t.newMeetDetail.MeetCandidateQuantity),Te(6),ke("ngModel",t.newMeetDetail.MeetDateTime)}}function iJ(n,e){1&n&&(W(0,"div",30)(1,"span",42)(2,"strong")(3,"small"),De(4,"You are already part of meet."),J()()()())}function rJ(n,e){1&n&&(W(0,"small",47)(1,"i")(2,"strong"),De(3,"Please fill up entire details to start meet."),J()()())}function sJ(n,e){if(1&n){const t=bn();$n(0),W(1,"div",21)(2,"div",22)(3,"div",34)(4,"div",35)(5,"button",36),Be("click",function(){return nt(t),it(Se().meetType="")}),W(6,"strong"),De(7,"Back"),J()(),W(8,"h2",9),De(9),Wl(10,"uppercase"),J()(),W(11,"label",29)(12,"div",30)(13,"span",31)(14,"strong"),De(15,"First Name"),J()()(),W(16,"input",37),Be("ngModelChange",function(r){return nt(t),it(Se().joiningUserDetail.FirstName=r)}),J()(),W(17,"label",29)(18,"div",30)(19,"span",31)(20,"strong"),De(21,"Last Name"),J()()(),W(22,"input",38),Be("ngModelChange",function(r){return nt(t),it(Se().joiningUserDetail.LastName=r)}),J()(),W(23,"label",39),Be("keyup",function(){nt(t);const r=Jy(29);return it(Se().getUserActiveSessionDetail(r.value))}),W(24,"div",30)(25,"span",31)(26,"strong"),De(27,"Contact Number"),J()()(),W(28,"input",40,41),Be("ngModelChange",function(r){return nt(t),it(Se().joiningUserDetail.ConatctNo=r)}),J(),W(30,"div",30)(31,"span",42)(32,"strong")(33,"small"),De(34,"Make sure to enter correct contact number."),J()()()()(),W(35,"label",25)(36,"strong"),De(37,"Meet Code"),J(),W(38,"input",43),Be("ngModelChange",function(r){return nt(t),it(Se().joiningUserDetail.MeetCode=r)}),J(),xt(39,iJ,5,0,"div",44),J(),xt(40,rJ,4,0,"small",45),W(41,"div",10)(42,"button",46),Be("click",function(){return nt(t),it(Se().joinMeet())}),De(43,"Join Meet"),J()()()()(),Wn()}if(2&n){const t=Jy(29),i=Se();Te(9),zl("",Yu(10,11,i.joiningMeetType)," MEET"),Te(7),ke("ngModel",i.joiningUserDetail.FirstName),Te(6),ke("ngModel",i.joiningUserDetail.LastName)("disabled",!i.joiningUserDetail.FirstName),Te(6),ke("ngModel",i.joiningUserDetail.ConatctNo)("disabled",!i.joiningUserDetail.LastName),Te(10),ke("ngModel",i.joiningUserDetail.MeetCode)("disabled",10!==t.value.length),Te(1),ke("ngIf",!i.isNewUserSession&&10===t.value.length),Te(1),ke("ngIf",!(i.joiningUserDetail.FirstName||i.joiningUserDetail.LastName||i.joiningUserDetail.ConatctNo||i.joiningUserDetail.MeetCode)),Te(2),ke("disabled",!(i.joiningUserDetail.FirstName&&i.joiningUserDetail.LastName&&i.joiningUserDetail.ConatctNo||i.joiningUserDetail.MeetCode.length||i.isNewUserSession))}}function oJ(n,e){if(1&n){const t=bn();$n(0),W(1,"div",21)(2,"div",48)(3,"figure",49),zh(),W(4,"svg",50)(5,"defs")(6,"clippath",51),Qe(7,"path",52),J(),W(8,"clippath",53),Qe(9,"path",52),J(),W(10,"clippath",54),Qe(11,"path",52),J(),W(12,"clippath",55),Qe(13,"path",52),J()(),W(14,"g",56)(15,"g",57),Qe(16,"path",58)(17,"path",59),J(),W(18,"g",60)(19,"g",61),Qe(20,"path",62)(21,"path",63),J(),W(22,"g",64),Qe(23,"path",62)(24,"path",63),J()(),W(25,"g",65),Qe(26,"path",58)(27,"path",59),J()()()(),Hh(),W(28,"div",66)(29,"h2",9),De(30,"Meeting has been created succesfully."),J(),W(31,"p"),De(32,"Now, you can share meet details with your friends."),J(),W(33,"div",67)(34,"button",68),Qe(35,"i",28),W(36,"strong"),De(37,"Copy Details"),J()()(),W(38,"div",69)(39,"button",70),Be("click",function(){return nt(t),it(Se().navigate_MeetingScreen())}),W(40,"strong"),De(41,"Join Meet"),J()(),W(42,"button",11),Be("click",function(){return nt(t),it(Se().reset())}),W(43,"strong"),De(44,"Back"),J()()()()()(),Wn()}}let aJ=(()=>{const e=class{constructor(i,r,s){this._meetingServices=i,this._router=r,this._actRoute=s,this.isRedirectedDirectJoinMeet=!1,this.meetType="",this.creatingMeetType="",this.joiningMeetType="",this.newMeetGeneratedCode="",this.newMeetDetail=new Nx,this.joiningUserDetail=new Lx,this.isNewUserSession=!1,this.isCopied=!1}ngOnInit(){let i=localStorage.getItem("user%");console.log(i),this._actRoute.queryParams.subscribe(r=>{console.log("QueryParam=>",r),r&&r.redirect&&"DirectJoinMeet"===r.redirect&&(this.isRedirectedDirectJoinMeet=!0)})}generateRandomCode(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let o=0;o<10;o++)s+=i[Math.floor(Math.random()*i.length)];this.newMeetGeneratedCode=s}setNewMeetDetail(i,r){this.creatingMeetType=i,this.meetType=r,this.generateRandomCode()}setJoiningMeetDetail(i,r){this.joiningMeetType=i,this.meetType=r}createMeet(){return this.newMeetGeneratedCode?this.creatingMeetType?this.newMeetDetail.MeetDateTime?this.newMeetDetail.MeetCandidateQuantity&&"0"!=this.newMeetDetail.MeetCandidateQuantity?(this.newMeetDetail.MeetCode=this.newMeetGeneratedCode,this.newMeetDetail.MeetName=this.creatingMeetType,this.newMeetDetail.MeetCandidateQuantity&&this.newMeetDetail.MeetDateTime&&this.newMeetDetail.MeetCode&&this.newMeetDetail.MeetName&&(this._meetingServices.saveAndGenerateMeet(this.newMeetDetail),this.meetType="new_meet_successful_form"),!0):(alert("Please enter candiate number!"),!1):(alert("Please select date & time for meet!"),!1):(alert("Meet type is invalid, Please retry again later."),!1):(alert("Meet code is invalid, Please retry again later."),!1)}joinMeet(i){this.verifyMeetTimeDate(this.joiningUserDetail.MeetCode)&&this.checkIsMeet_Exist(this.joiningUserDetail.MeetCode)&&this._meetingServices.checkUserCount_InMeeting(this.joiningUserDetail.MeetCode)?(this._meetingServices.joinMeet(this.joiningUserDetail,i||!1),this._router.navigate(["meeting"],{queryParams:{meetId:this.joiningUserDetail.MeetCode,userId:this.joiningUserDetail.ConatctNo}})):alert("Please check meeting date time!")}getUserActiveSessionDetail(i){10===i.length?this._meetingServices.getUserDetailByContactNo(i)||(this.isNewUserSession=!0):this.isNewUserSession=!1}checkIsMeet_Exist(i){let r=this._meetingServices.getMeetDetailsByMeetCode(i);return!(!r||r.MeetName.toLowerCase().trim()!==this.joiningMeetType.toLowerCase().trim())||(alert("Please enter correct meet code."),!1)}copyCode_Clipboard(){return this.newMeetGeneratedCode?(navigator.clipboard.writeText(this.newMeetGeneratedCode).then(()=>{console.log("Text copied to clipboard:",this.newMeetGeneratedCode),this.isCopied=!0,setTimeout(()=>{this.isCopied=!1},1e3)}).catch(i=>{console.error("Failed to copy text: ",i)}),!0):(alert("Meet code is invalid, Please retry again later."),!1)}navigate_MeetingScreen(){if(this.verifyMeetTimeDate(this.newMeetGeneratedCode)){let i=localStorage.getItem("user")||"";i?(i=JSON.parse(i),this.joiningUserDetail=new Lx,this.joiningUserDetail.ConatctNo=i.EmailAddress,this.joiningUserDetail.FirstName=i.FirstName,this.joiningUserDetail.LastName=i.LastName,this.joiningUserDetail.MeetCode=this.newMeetGeneratedCode,this._meetingServices.joinMeet(this.joiningUserDetail,!0),this._router.navigate(["meeting"],{queryParams:{meetId:this.newMeetGeneratedCode,userId:this.joiningUserDetail.ConatctNo}})):alert("Please try agin after few min..!")}else alert("Please check meeting date time!")}verifyMeetTimeDate(i){let r=!1,s=null;s=this._meetingServices.getMeetDetailsByMeetCode(i);let o=new Date;if(s&&o){let a=s.MeetDateTime||"";a&&(a=new Date(a),o>=a&&(r=!0))}return r}reset(){this.meetType="",this.creatingMeetType="",this.newMeetGeneratedCode="",this.newMeetDetail=new Nx}};let n=e;return e.\u0275fac=function(r){return new(r||e)(ae($L),ae(ni),ae(Io))},e.\u0275cmp=ea({type:e,selectors:[["app-dashboard"]],decls:9,vars:5,consts:[["src","assets/videos/videoplayback.mp4","autoplay","","loop","",2,"position","relative","width","100% !important"],[1,"mx-auto",2,"position","absolute","top","0","width","100%"],[1,"flex","justify-center","items-center",2,"min-height","99dvh"],[1,"grid","grid-cols-3","gap-3"],[4,"ngIf"],["class","card bg-base-100 image-full w-96 shadow-xl",4,"ngIf"],[1,"card","bg-base-100","image-full","w-96","shadow-xl"],["src","assets/images/dashboard/conference.jpg","alt","Conference"],[1,"card-body"],[1,"card-title"],[1,"card-actions","justify-end"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-person-plus-fill"],["src","assets/images/dashboard/office_cabin_meeting.jpeg","alt","office_cabin_meeting"],["src","assets/images/dashboard/class.jpg","alt","class_meet"],["src","assets/images/dashboard/create_new_meet.png","alt","Shoes"],[1,"bi","bi-plus-lg"],[1,"flex","justify-between",2,"position","absolute","top","0","padding-top","30vh"],[2,"cursor","pointer","color","red","font-weight","700",3,"click"],["src","assets/images/dashboard/conference.jpg","alt","Shoes"],["src","assets/images/dashboard/class.jpg","alt","Conference"],[1,"flex","justify-center","w-100"],[1,"card","bg-white","w-96","shadow-xl"],[1,"flex","justify-between"],[2,"color","red","cursor","pointer","padding","10px",3,"click"],[1,"input","input-bordered","flex","items-center","gap-2","position-relative"],["type","text","placeholder","Daisy","readonly","",1,"grow",3,"value"],[1,"btn","btn-ghost",2,"position","absolute","right","0%","top","0%",3,"click"],[1,"bi","bi-link-45deg"],[1,"form-control","w-full","max-w-xs","w-100"],[1,"label"],[1,"label-text"],["type","number","placeholder","Type here",1,"input","input-bordered","w-full","max-w-xs","w-100",3,"ngModel","ngModelChange"],["type","datetime-local","placeholder","Type here",1,"input","input-bordered","w-full","max-w-xs","w-100",3,"ngModel","ngModelChange"],[1,"card-body","text-center"],[1,"flex","flex-row","justify-between"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],["type","text","placeholder","Type here",1,"input","input-bordered","w-full","max-w-xs","w-100",3,"ngModel","ngModelChange"],["type","text","placeholder","Type here",1,"input","input-bordered","w-full","max-w-xs","w-100",3,"ngModel","disabled","ngModelChange"],[1,"form-control","w-full","max-w-xs","w-100",3,"keyup"],["type","number","placeholder","Type here","minlength","10","maxlength","10",1,"input","input-bordered","w-full","max-w-xs","w-100",3,"ngModel","disabled","ngModelChange"],["userContactNoEle",""],[1,"label-text",2,"color","red"],["type","text","placeholder","Enter meet code",1,"grow",3,"ngModel","disabled","ngModelChange"],["class","label",4,"ngIf"],["style","color: red;",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[2,"color","red"],[1,"card","bg-base-100","w-96","shadow-xl"],[1,"px-5","pt-10"],["xmlns","http://www.w3.org/2000/svg","width","175","height","175","viewBox","0 0 430 430",2,"width","175px","height","175px","transform","translate3d(0,0,0)","content-visibility","visible"],["id","a"],["d","M0 0h430v430H0z"],["id","d"],["id","c"],["id","b"],["clip-path","url(#a)"],["clip-path","url(#b)",2,"display","none"],[1,"primary"],[1,"primary",2,"mix-blend-mode","multiply"],["fill","#2FE848","clip-path","url(#c)",2,"display","block"],[2,"display","none"],["d","M346.931 67.121a3 3 0 0 0-4.242 0L174.957 234.852l-82.731-82.731a3 3 0 0 0-4.243 0l-55.862 55.861a3 3 0 0 0 0 4.243l140.715 140.714a3 3 0 0 0 4.242 0l225.715-225.714a3 3 0 0 0 0-4.243z",1,"primary"],["fill-opacity",".5","d","m-42.508 24.822.043-.043v119.009a3 3 0 0 1-2.164-.879L-185.344 2.195a3 3 0 0 1 0-4.243l55.862-55.861a3 3 0 0 1 4.242-.001z","transform","translate(217.457 210.03)",1,"primary",2,"mix-blend-mode","multiply"],[2,"display","block"],["clip-path","url(#d)",2,"display","none"],[1,"card-body","items-center","text-center"],[1,"card-actions"],[1,"btn","btn-ghost"],[1,"card-actions","flex","flex-row"],[1,"btn","btn-success","text-white",3,"click"]],template:function(r,s){1&r&&(Qe(0,"video",0),W(1,"div",1)(2,"div",2)(3,"div",3),xt(4,eJ,41,1,"ng-container",4),xt(5,tJ,40,0,"ng-container",4),J(),xt(6,nJ,34,7,"ng-container",4),xt(7,sJ,44,13,"ng-container",4),xt(8,oJ,45,0,"ng-container",4),J()()),2&r&&(Te(4),ke("ngIf",!s.meetType),Te(1),ke("ngIf","new_meet"===s.meetType),Te(1),ke("ngIf","new_meet_form"===s.meetType),Te(1),ke("ngIf","join_meet_form"===s.meetType),Te(1),ke("ngIf","new_meet_successful_form"===s.meetType))},dependencies:[ep,Ud,Ex,ux,Dx,Ix,Sm,s0]}),n})();function WL(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function Ox(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){WL(s,i,r,o,a,"next",l)}function a(l){WL(s,i,r,o,a,"throw",l)}o(void 0)})}}class Mm{constructor(){this.FirstName="",this.LastName="",this.ConatctNo="",this.MeetJoiningDate="",this.MeetCode="",this.SeatNo="",this.Gender=""}}const lJ=["videoElement"];function cJ(n,e){1&n&&Qe(0,"img",28)}function uJ(n,e){1&n&&Qe(0,"img",29)}function dJ(n,e){1&n&&Qe(0,"img",30)}function hJ(n,e){1&n&&Qe(0,"video",31,32)}function fJ(n,e){if(1&n){const t=bn();$n(0),W(1,"div",38)(2,"div",39)(3,"strong"),De(4),Wl(5,"uppercase"),Wl(6,"uppercase"),J(),W(7,"small")(8,"span",40),De(9,"Request Date/Time :"),J(),W(10,"strong"),De(11),Wl(12,"date"),J()()(),W(13,"div",41)(14,"button",42),Be("click",function(){const s=nt(t).$implicit;return it(Se(3).setSeelctedUserDetail(s))}),Qe(15,"img",43),J()()(),Wn()}if(2&n){const t=e.$implicit;Te(4),ov("",Yu(5,3,t.FirstName)," ",Yu(6,5,t.LastName)," "),Te(7),As(sD(12,7,t.MeetJoiningDate,"dd/MM/yyyy hh:mm a"))}}function pJ(n,e){if(1&n){const t=bn();W(0,"div",33)(1,"div",34)(2,"strong",35),De(3," Request "),J(),W(4,"img",36),Be("click",function(){return nt(t),it(Se(2).showRequestList=!1)}),J()(),xt(5,fJ,16,10,"ng-container",37),J()}if(2&n){const t=Se(2);Te(5),ke("ngForOf",t.requestUserList)}}function mJ(n,e){if(1&n){const t=bn();W(0,"img",44),Be("click",function(){return nt(t),it(Se(2).isMicOn=!1)}),J()}}function gJ(n,e){if(1&n){const t=bn();W(0,"img",45),Be("click",function(){return nt(t),it(Se(2).isMicOn=!0)}),J()}}function _J(n,e){if(1&n){const t=bn();W(0,"img",46),Be("click",function(){nt(t);const r=Se(2);return r.isVideoOn=!1,it(r.stopCamera())}),J()}}function yJ(n,e){if(1&n){const t=bn();W(0,"img",47),Be("click",function(){nt(t);const r=Se(2);return r.isVideoOn=!0,it(r.startCamera())}),J()}}function vJ(n,e){if(1&n){const t=bn();W(0,"img",48),Be("click",function(){nt(t);const r=Se(2);return r.isScreenShredOn=!1,r.isSelectectingSeatApprovingPerson=!0,it(r.stopScreenSharing())}),J()}}function bJ(n,e){if(1&n){const t=bn();W(0,"img",49),Be("click",function(){nt(t);const r=Se(2);return r.isScreenShredOn=!0,r.isSelectectingSeatApprovingPerson=!1,it(r.startScreenSharing())}),J()}}function xJ(n,e){if(1&n){const t=bn();W(0,"div",50)(1,"div",51)(2,"img",52),Be("click",function(){return nt(t),it(Se(2).showCandidateList=!0)}),J()()()}}function EJ(n,e){if(1&n&&($n(0),W(1,"div",55),Qe(2,"img",56),W(3,"div",57)(4,"strong"),De(5),J(),W(6,"strong")(7,"small"),De(8),J()()()(),Wn()),2&n){const t=e.$implicit;Te(5),As(t.FirstName),Te(3),As(t.LastName)}}function SJ(n,e){if(1&n){const t=bn();W(0,"div",53)(1,"div",54)(2,"strong",35),De(3," Candidate List "),J(),W(4,"img",36),Be("click",function(){return nt(t),it(Se(2).showCandidateList=!1)}),J()(),xt(5,EJ,9,2,"ng-container",37),J()}if(2&n){const t=Se(2);Te(5),ke("ngForOf",t.userList)}}function wJ(n,e){1&n&&Qe(0,"video",61)}function MJ(n,e){if(1&n&&($n(0),W(1,"div",58)(2,"div",59)(3,"strong",35),De(4," Shared Screen "),J()()(),xt(5,wJ,1,0,"video",60),Wn()),2&n){const t=Se(2);Te(5),ke("ngIf",t.isScreenShredOn)}}function CJ(n,e){if(1&n){const t=bn();W(0,"img",75),Be("click",function(){nt(t);const r=Se().index;return it(Se(3).remove_UserFromSeat(r))}),J()}}function TJ(n,e){if(1&n&&Qe(0,"img",76),2&n){const t=Se(),i=t.$implicit,r=t.index;ho(Se(3).return_BottomStyleBasedOnSeatNo(i.SeatNo)),ke("id","vacant_seat_"+r)}}function AJ(n,e){if(1&n&&Qe(0,"img",77),2&n){const t=Se(),i=t.$implicit,r=t.index;ho(Se(3).return_BottomStyleBasedOnSeatNo(i.SeatNo)),ke("id","vacant_seat_"+r)}}function DJ(n,e){if(1&n&&Qe(0,"img",79),2&n){const t=Se(2),i=t.$implicit,r=t.index;ho(Se(3).return_BottomStyleBasedOnSeatNo(i.SeatNo)),ke("id","vacant_seat_"+r)}}function IJ(n,e){if(1&n&&($n(0),xt(1,DJ,1,3,"img",78),Wn()),2&n){const t=Se().$implicit;Te(1),ke("ngIf",t.SeatNo&&"male"===t.Gender.toLowerCase())}}function RJ(n,e){if(1&n&&Qe(0,"img",79),2&n){const t=Se(2),i=t.$implicit,r=t.index;ho(Se(3).return_BottomStyleBasedOnSeatNo(i.SeatNo)),ke("id","vacant_seat_"+r)}}function PJ(n,e){if(1&n&&($n(0),xt(1,RJ,1,3,"img",78),Wn()),2&n){const t=Se().$implicit;Te(1),ke("ngIf",t.SeatNo&&"female"===t.Gender.toLowerCase())}}function NJ(n,e){1&n&&($n(0),W(1,"strong"),De(2,"Vacant"),J(),W(3,"small")(4,"strong"),De(5,"Seat"),J()(),Wn())}function LJ(n,e){if(1&n&&($n(0),W(1,"strong"),De(2),J(),W(3,"small")(4,"strong"),De(5),J()(),Wn()),2&n){const t=Se().$implicit;Te(2),As(t.FirstName),Te(3),As(t.LastName)}}function OJ(n,e){if(1&n&&($n(0),W(1,"div",63)(2,"div",64)(3,"strong"),De(4),J()(),W(5,"div",65),xt(6,CJ,1,0,"img",66),J(),W(7,"div",67)(8,"div",68)(9,"div",69),Qe(10,"img",70),xt(11,TJ,1,3,"img",71),xt(12,AJ,1,3,"img",72),xt(13,IJ,2,1,"ng-container",0),xt(14,PJ,2,1,"ng-container",0),Qe(15,"img",73),W(16,"span",74),xt(17,NJ,6,0,"ng-container",0),xt(18,LJ,6,2,"ng-container",0),J()()()()(),Wn()),2&n){const t=e.$implicit,i=e.index;Te(1),ke("id","seat_container_"+i),Te(3),zl("Desk ",i+1,""),Te(2),ke("ngIf",t.SeatNo),Te(3),ke("id","seat_"+i),Te(2),ke("ngIf",!t.SeatNo&&!t.Gender),Te(1),ke("ngIf",t.SeatNo&&!t.Gender),Te(1),ke("ngIf",t.Gender),Te(1),ke("ngIf",t.Gender),Te(3),ke("ngIf",!t.SeatNo),Te(1),ke("ngIf",t.SeatNo)}}function FJ(n,e){if(1&n&&(W(0,"div",62),xt(1,OJ,19,10,"ng-container",37),J()),2&n){const t=Se(2);Te(1),ke("ngForOf",t.seatList)}}function UJ(n,e){if(1&n){const t=bn();$n(0),xt(1,cJ,1,0,"img",1),xt(2,uJ,1,0,"img",2),xt(3,dJ,1,0,"img",3),W(4,"div",4),xt(5,hJ,2,0,"video",5),J(),W(6,"div",6),xt(7,pJ,6,1,"div",7),W(8,"button",8),Be("click",function(){return nt(t),it(Se().showRequestList=!0)}),Qe(9,"img",9),W(10,"strong"),De(11," Requests "),J()()(),W(12,"div",10)(13,"div",11)(14,"div",12),xt(15,mJ,1,0,"img",13),xt(16,gJ,1,0,"img",14),xt(17,_J,1,0,"img",15),xt(18,yJ,1,0,"img",16),xt(19,vJ,1,0,"img",17),xt(20,bJ,1,0,"img",18),W(21,"img",19),Be("click",function(){return nt(t),it(Se().leaveMeeting())}),J()()()(),xt(22,xJ,3,0,"div",20),xt(23,SJ,6,1,"div",21),W(24,"div",22)(25,"button",23),Be("click",function(){nt(t);const r=Se();return it(r.isSelectectingSeatApprovingPerson=!r.isSelectectingSeatApprovingPerson)}),W(26,"strong"),De(27),J()()(),W(28,"div",24)(29,"div",25)(30,"div",26)(31,"div"),xt(32,MJ,6,1,"ng-container",0),J(),xt(33,FJ,2,1,"div",27),J()()(),Wn()}if(2&n){const t=Se();Te(1),ke("ngIf",t.meetingDetails.MeetName.toLowerCase().includes("office")),Te(1),ke("ngIf",t.meetingDetails.MeetName.toLowerCase().includes("class")),Te(1),ke("ngIf",t.meetingDetails.MeetName.toLowerCase().includes("cabin")),Te(2),ke("ngIf",t.isVideoOn),Te(2),ke("ngIf",t.showRequestList),Te(3),ho(t.showRequestList?"":"hover-effect-label"),Te(5),ke("ngIf",t.isMicOn),Te(1),ke("ngIf",!t.isMicOn),Te(1),ke("ngIf",t.isVideoOn),Te(1),ke("ngIf",!t.isVideoOn),Te(1),ke("ngIf",t.isScreenShredOn),Te(1),ke("ngIf",!t.isScreenShredOn),Te(2),ke("ngIf",!t.showCandidateList),Te(1),ke("ngIf",t.showCandidateList),Te(2),ho(t.isSelectectingSeatApprovingPerson?"btn btn-danger":"btn btn-primary"),Te(2),As(t.isSelectectingSeatApprovingPerson?"Close Seats View":"View Seats"),Te(4),function Rr(n){Nr(YT,Vz,n,!1)}(t.isSelectectingSeatApprovingPerson?"width: 100% !important;":"min-width: 70% !important; max-width: 70% !important;min-height: 90dvh; max-height: 90dvh; overflow-x: auto;"),ho(t.isSelectectingSeatApprovingPerson?"p-2":"card p-2"),Te(1),ke("ngIf",!t.isSelectectingSeatApprovingPerson),Te(1),ke("ngIf",t.isSelectectingSeatApprovingPerson)}}let kJ=(()=>{const e=class{onKeyPress(i){switch(i.key){case"Enter":this.setUserInVacantSeat();break;case"ArrowDown":break;case"ArrowLeft":this.filterPreviousVacantSeat();break;case"ArrowRight":this.filterNextVacantSeat()}}constructor(i,r,s){this._meetingServices=i,this._activeRoute=r,this._router=s,this.meetingDetails=new Nx,this.seatList=[],this.showCandidateList=!1,this.userList=[],this._userList=[],this.requestUserList=[],this._requestUserList=[],this.showRequestList=!1,this.mediaStream=null,this.isSelectectingSeatApprovingPerson=!1,this.selectedUserDetail=new Mm,this.isMicOn=!1,this.isVideoOn=!1,this.isScreenShredOn=!1,this.currentBottomEleIndex=""}ngOnInit(){this._activeRoute.queryParams.subscribe(i=>{i.meetId&&this.loadMeetDetailsByMeetingCode(i.meetId)})}ngOnChanges(i){}loadMeetDetailsByMeetingCode(i){this.meetingDetails=this._meetingServices.getMeetDetailsByMeetCode(i),this.meetingDetails.MeetCode&&this.loadUserList()}setUserInVacantSeat(){this.seatList[Number(this.currentBottomEleIndex)]=this.selectedUserDetail,this.seatList[Number(this.currentBottomEleIndex)].SeatNo=this.currentBottomEleIndex,setTimeout(()=>{let i=document.getElementById("vacant_seat_"+this.currentBottomEleIndex);i&&(i.style.bottom="65%"),this.approveMemberRequest(this.selectedUserDetail)},500)}filterNextVacantSeat(){let i="";if(this.currentBottomEleIndex){if(Number(this.currentBottomEleIndex)===this.seatList.length-1){for(let o=0;o<this.seatList.length;o++)if(!this.seatList[o].SeatNo&&o!==Number(this.currentBottomEleIndex)){i=o.toString();break}}else for(let o=Number(this.currentBottomEleIndex);o<this.seatList.length;o++)if(!this.seatList[o].SeatNo&&o!==Number(this.currentBottomEleIndex)){i=o.toString();break}let r=document.getElementById("vacant_seat_"+i);r&&(r.style.bottom="65%");let s=document.getElementById("vacant_seat_"+this.currentBottomEleIndex);s&&(s.style.bottom="20%"),this.currentBottomEleIndex=i}}filterPreviousVacantSeat(){let i="";if(this.currentBottomEleIndex){for(let o=Number(this.currentBottomEleIndex);o<this.seatList.length;o--){if(!this.seatList[o].SeatNo&&o!==Number(this.currentBottomEleIndex)){i=o.toString();break}0===o&&this.seatList[o].SeatNo&&(o=this.seatList.length)}let r=document.getElementById("vacant_seat_"+i);r&&(r.style.bottom="65%");let s=document.getElementById("vacant_seat_"+this.currentBottomEleIndex);s&&(s.style.bottom="20%"),this.currentBottomEleIndex=i}}generateSeatListByMeetSeatQuantity(){if(this.meetingDetails.MeetCandidateQuantity)for(let i=0;i<Number(this.meetingDetails.MeetCandidateQuantity);i++){let r=new Mm;this.seatList.push(r)}this.settle_UserOnSeats()}loadUserList(){if(localStorage.length){let r=[],s=[];for(let o=0;o<localStorage.length;o++){let a=localStorage.key(o);if(a?.toLowerCase().includes("user")){let l=localStorage.getItem(a);l&&(l=JSON.parse(l),l.MeetCode===this.meetingDetails.MeetCode&&(a?.includes("_NewRequest")?s.push(l):r.push(l)))}}this._userList.length!=r.length&&(this._userList=r,this.updateUserList()),this._requestUserList.length!=s.length&&(this._requestUserList=s,this.updateUserList())}setInterval(()=>{this.loadUserList()},1e3)}updateUserList(){this.userList=this._userList,this.requestUserList=this._requestUserList,this.generateSeatListByMeetSeatQuantity()}leaveMeeting(){this._router.navigate(["dashboard"])}startCamera(){navigator.mediaDevices.getUserMedia({video:!0}).then(i=>{this.stream=i,this.videoElement.nativeElement.srcObject=i}).catch(i=>{console.error("Error accessing camera:",i)})}stopCamera(){this.stream&&this.stream.getTracks().forEach(i=>i.stop())}startScreenSharing(){var i=this;return Ox(function*(){try{i.mediaStream=yield navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},audio:!1});const r=document.getElementById("screenVideo");r&&(r.srcObject=i.mediaStream),i.mediaStream.getVideoTracks()[0].onended=()=>{i.stopScreenSharing()}}catch(r){console.error("Error capturing screen:",r)}})()}stopScreenSharing(){this.mediaStream&&(this.mediaStream.getTracks().forEach(i=>i.stop()),this.mediaStream=null)}setSeelctedUserDetail(i){let r=this.count_OccupiedSeats();if(Number(this.meetingDetails.MeetCandidateQuantity)!==r){this.isSelectectingSeatApprovingPerson=!0,this.selectedUserDetail=new Mm,this.selectedUserDetail=i,this.showRequestList=!1;let s=this.filterWhichSeatIsVacant()||"";setTimeout(()=>{if(s){let o=document.getElementById("vacant_seat_"+s);o&&(o.style.bottom="65%")}},500)}else alert("There are no available seats right now...")}count_OccupiedSeats(){let i=0;return this.userList.forEach(r=>{r.SeatNo&&i++}),i}settle_UserOnSeats(){for(let r=0;r<this.seatList.length;r++)this.seatList.length>=this.userList.length&&r<this.userList.length&&(this.seatList[r].ConatctNo=this.userList[r].ConatctNo||"",this.seatList[r].FirstName=this.userList[r].FirstName||"",this.seatList[r].LastName=this.userList[r].LastName||"",this.seatList[r].Gender=this.userList[r].Gender||"",this.seatList[r].MeetCode=this.userList[r].MeetCode||"",this.seatList[r].MeetJoiningDate=this.userList[r].MeetJoiningDate||"",this.seatList[r].SeatNo=r.toString());console.log("Settled Seat List =>",this.seatList),this.isSelectectingSeatApprovingPerson=!0}remove_UserFromSeat(i){this.seatList[i]=new Mm}return_BottomStyleBasedOnSeatNo(i){return i?"movable-box seated-person":"movable-box"}filterWhichSeatIsVacant(){let i="";if(this.seatList.length)for(let r=0;r<this.seatList.length;r++)if(!this.seatList[r].SeatNo){i=r.toString(),this.currentBottomEleIndex=i;break}return i}approveMemberRequest(i){let r="user_"+i.ConatctNo+"_"+i.MeetCode+"_NewRequest",s=localStorage.getItem(r)||null;s&&(localStorage.removeItem(r),r="user_"+i.ConatctNo+"_"+i.MeetCode,localStorage.setItem(r,s),this.selectedUserDetail=new Lx,this.loadUserList())}};let n=e;return e.\u0275fac=function(r){return new(r||e)(ae($L),ae(Io),ae(ni))},e.\u0275cmp=ea({type:e,selectors:[["app-meetings"]],viewQuery:function(r,s){if(1&r&&Sv(lJ,5),2&r){let o;Nf(o=Lf())&&(s.videoElement=o.first)}},hostBindings:function(r,s){1&r&&Be("keydown",function(a){return s.onKeyPress(a)},0,ff)},features:[zi],decls:1,vars:1,consts:[[4,"ngIf"],["src","assets/images/meeting/office_meet.jpg","style","height: 100dvh;","width","100%","alt","","srcset","",4,"ngIf"],["src","assets/images/meeting/class.jpg","style","height: 100dvh;","width","100%","alt","","srcset","",4,"ngIf"],["src","assets/images/meeting/cabin.jpg","style","height: 100dvh;","width","100%","alt","","srcset","",4,"ngIf"],[2,"position","absolute","bottom","10%","left","2%","min-height","150px !important","max-height","150px !important","z-index","10"],["style","min-height: 20dvh !important; max-height: 20dvh !important; width: 20dvw;","autoplay","",4,"ngIf"],[2,"position","absolute","bottom","2%","right","0%","z-index","20"],["class","card border-0 shadow-lg h-100","style","border-top-right-radius: 0px;\n          border-bottom-right-radius: 0px;\n          position: absolute;\n          right: 0%; overflow: auto;\n          bottom: 100%;\n          min-width: 500px;\n          max-width: 500px;\n          min-height: 50dvh;\n          max-height: 50dvh;",4,"ngIf"],["type","button",1,"btn","hover-effect-btn","btn-primary",2,"border-top-right-radius","0px","border-bottom-right-radius","0px",3,"click"],["src","assets/images/meeting_menubar_icons/person_request.png","alt","","srcset","",2,"height","25px","width","25px"],[2,"position","absolute","right","0","top","5%","height","90%"],[1,"d-flex","justify-items-center","align-items-center","h-100"],[1,"card","p-2","flex","flex-column","gap-3",2,"border-top-right-radius","0px !important","border-bottom-right-radius","0px !important"],["class","bg-primary rounded-2 p-1 cursor-pointer","src","assets/images/meeting_menubar_icons/mic_on.png","height","50px","width","50px","alt","","srcset","",3,"click",4,"ngIf"],["class","bg-secondary rounded-2 p-1 cursor-pointer","src","assets/images/meeting_menubar_icons/mic_off.png","height","50px","width","50px","alt","","srcset","",3,"click",4,"ngIf"],["class","bg-primary rounded-2 p-1 cursor-pointer","src","assets/images/meeting_menubar_icons/video_cam_on.png","height","50px","width","50px","alt","","srcset","",3,"click",4,"ngIf"],["class","bg-secondary rounded-2 p-1 cursor-pointer","src","assets/images/meeting_menubar_icons/video_cam_off.png","height","50px","width","50px","alt","","srcset","",3,"click",4,"ngIf"],["class","bg-primary rounded-2 p-1 cursor-pointer","src","assets/images/meeting_menubar_icons/share_screen.png","height","50px","width","50px","alt","","srcset","",3,"click",4,"ngIf"],["class","bg-secondary rounded-2 p-1 cursor-pointer","src","assets/images/meeting_menubar_icons/cancel_sharing.png","height","50px","width","50px","alt","","srcset","",3,"click",4,"ngIf"],["src","assets/images/meeting_menubar_icons/end_meeting.png","height","50px","width","50px","alt","","srcset","",1,"bg-danger","rounded-2","p-1","cursor-pointer",3,"click"],["class","h-100","style","min-height: 100dvh;\n    max-height: 100dvh; position: absolute; left: 0; top: 0;\n    z-index: 10;",4,"ngIf"],["class","card p-2 flex flex-column gap-2","style","min-width: 25%; max-width: 25%; min-height: 100dvh;\n    max-height: 100dvh; overflow-x: auto;\n    position: absolute; left: 0; top: 0;\n    border-top-left-radius: 0px;\n    border-bottom-left-radius: 0px;\n    z-index: 40;",4,"ngIf"],[2,"position","absolute","top","2%","right","2%"],["type","button",3,"click"],[1,"flex","justify-center","w-100"],[1,"flex","flex-row","gap-2",2,"min-width","80dvw","max-width","80dvw","min-height","90dvh","max-height","90dvh","overflow-x","auto","position","absolute","bottom","5%"],[1,"flex","flex-row","justify-content-center","gap-1","w-100"],["class","d-flex flex-wrap gap-2 justify-content-center ","style","position: absolute; bottom: 2%; width: 80dvw;",4,"ngIf"],["src","assets/images/meeting/office_meet.jpg","width","100%","alt","","srcset","",2,"height","100dvh"],["src","assets/images/meeting/class.jpg","width","100%","alt","","srcset","",2,"height","100dvh"],["src","assets/images/meeting/cabin.jpg","width","100%","alt","","srcset","",2,"height","100dvh"],["autoplay","",2,"min-height","20dvh !important","max-height","20dvh !important","width","20dvw"],["videoElement",""],[1,"card","border-0","shadow-lg","h-100",2,"border-top-right-radius","0px","border-bottom-right-radius","0px","position","absolute","right","0%","overflow","auto","bottom","100%","min-width","500px","max-width","500px","min-height","50dvh","max-height","50dvh"],["id","request_header",1,"d-flex","justify-content-between","w-100","p-2"],[2,"font-size","1.5rem"],["src","assets/images/meeting_menubar_icons/close.png","alt","","srcset","",2,"height","50px","width","50px","cursor","pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","gap-1",2,"padding-left","10px","padding-right","10px"],[1,"d-flex","flex-column","p-2"],[2,"color","red"],[1,"d-flex","flex-row","gap-1"],["type","button",1,"btn","btn-success",3,"click"],["src","assets/images/meeting_menubar_icons/person_check.png","alt","","srcset","",2,"height","30px"],["src","assets/images/meeting_menubar_icons/mic_on.png","height","50px","width","50px","alt","","srcset","",1,"bg-primary","rounded-2","p-1","cursor-pointer",3,"click"],["src","assets/images/meeting_menubar_icons/mic_off.png","height","50px","width","50px","alt","","srcset","",1,"bg-secondary","rounded-2","p-1","cursor-pointer",3,"click"],["src","assets/images/meeting_menubar_icons/video_cam_on.png","height","50px","width","50px","alt","","srcset","",1,"bg-primary","rounded-2","p-1","cursor-pointer",3,"click"],["src","assets/images/meeting_menubar_icons/video_cam_off.png","height","50px","width","50px","alt","","srcset","",1,"bg-secondary","rounded-2","p-1","cursor-pointer",3,"click"],["src","assets/images/meeting_menubar_icons/share_screen.png","height","50px","width","50px","alt","","srcset","",1,"bg-primary","rounded-2","p-1","cursor-pointer",3,"click"],["src","assets/images/meeting_menubar_icons/cancel_sharing.png","height","50px","width","50px","alt","","srcset","",1,"bg-secondary","rounded-2","p-1","cursor-pointer",3,"click"],[1,"h-100",2,"min-height","100dvh","max-height","100dvh","position","absolute","left","0","top","0","z-index","10"],[1,"d-flex","align-items-center","h-100"],["src","assets/images/meeting/person_list.png","alt","","srcset","",1,"card","border-0","p-2",2,"height","60px","width","60px","border-top-left-radius","0px","border-bottom-left-radius","0px","cursor","pointer",3,"click"],[1,"card","p-2","flex","flex-column","gap-2",2,"min-width","25%","max-width","25%","min-height","100dvh","max-height","100dvh","overflow-x","auto","position","absolute","left","0","top","0","border-top-left-radius","0px","border-bottom-left-radius","0px","z-index","40"],[1,"d-flex","flex-row","justify-content-between","align-items-center","w-100"],[1,"card","p-3","flex","flex-row","mb-2","gap-2"],["src","assets/images/meeting/user_image.png",1,"mask","mask-heart",2,"height","50px !important","width","50px !important"],[1,"flex","flex-col"],[1,"flex","flex-column","gap-1"],[1,"flex","flex-row","justify-content-between"],["id","screenVideo","autoplay","","playsinline","","mediagroup","",4,"ngIf"],["id","screenVideo","autoplay","","playsinline","","mediagroup",""],[1,"d-flex","flex-wrap","gap-2","justify-content-center",2,"position","absolute","bottom","2%","width","80dvw"],[1,"card","bg-transparent","border-0","class-table-container","d-flex","justify-content-center",2,"width","25% !important","position","relative",3,"id"],[1,"card","border-0","bg-warning","p-1",2,"position","absolute","left","0","bottom","0","border-top-left-radius","0px","border-bottom-right-radius","0px"],[2,"position","absolute","right","0","top","0"],["class","card p-1 border-0 rounded-3 bg-danger","src","assets/images/meeting_menubar_icons/person_remove.png","style","height: 40px; width: 40px; cursor: pointer;\n                border-top-left-radius: 0px !important;\n                border-bottom-left-radius: 0px !important;\n                border-bottom-right-radius: 0px !important;","alt","","srcset","",3,"click",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-center","align-content-center",3,"id"],["src","assets/images/meeting/wooden-chair.png","alt","","srcset","",2,"max-height","100px","max-width","100px","position","absolute","bottom","30%"],["src","assets/images/meeting/add-user.png","style","max-height: 75px; max-width: 75px; position: absolute; bottom: 20%;","alt","","srcset","",3,"id","class",4,"ngIf"],["src","assets/images/meeting/avatar.png","style","max-height: 75px; max-width: 75px; position: absolute; bottom: 20%;","alt","","srcset","",3,"id","class",4,"ngIf"],["src","assets/images/meeting/table.png","alt","","srcset","",2,"max-height","150px","max-width","350px","position","absolute","bottom","0"],[1,"d-flex","flex-column","text-center","card","border-0","rounded-0","p-2",2,"z-index","10","position","absolute"],["src","assets/images/meeting_menubar_icons/person_remove.png","alt","","srcset","",1,"card","p-1","border-0","rounded-3","bg-danger",2,"height","40px","width","40px","cursor","pointer","border-top-left-radius","0px !important","border-bottom-left-radius","0px !important","border-bottom-right-radius","0px !important",3,"click"],["src","assets/images/meeting/add-user.png","alt","","srcset","",2,"max-height","75px","max-width","75px","position","absolute","bottom","20%",3,"id"],["src","assets/images/meeting/avatar.png","alt","","srcset","",2,"max-height","75px","max-width","75px","position","absolute","bottom","20%",3,"id"],["src","assets/images/meeting/male-student.png","style","max-height: 75px; max-width: 75px; position: absolute; bottom: 55%;","alt","","srcset","",3,"id","class",4,"ngIf"],["src","assets/images/meeting/male-student.png","alt","","srcset","",2,"max-height","75px","max-width","75px","position","absolute","bottom","55%",3,"id"]],template:function(r,s){1&r&&xt(0,UJ,34,24,"ng-container",0),2&r&&ke("ngIf",!0)},dependencies:[T1,ep,s0,R1],styles:["video[_ngcontent-%COMP%]{width:100%;min-height:95%!important;max-height:95%!important;border:2px solid black;border-radius:10px;margin-top:10px;background-color:#000}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important}.class-table-container[_ngcontent-%COMP%]{min-height:200px;max-height:200px;min-width:24%;max-width:24%;position:relative}.hover-effect-btn[_ngcontent-%COMP%]:hover   .hover-effect-label[_ngcontent-%COMP%]{display:block!important}.hover-effect-label[_ngcontent-%COMP%]{display:none!important}.seated-person[_ngcontent-%COMP%]{max-height:75px;max-width:75px;position:absolute;bottom:60%!important}"]}),n})();const BJ=0,jL=1,VJ=2,qL=1,zJ=2,Hs=3,Oo=0,Ri=1,Gs=2,Fo=0,Sc=1,XL=2,YL=3,KL=4,HJ=5,Ia=100,GJ=101,$J=102,WJ=103,jJ=104,qJ=200,XJ=201,YJ=202,KJ=203,Ux=204,kx=205,ZJ=206,JJ=207,QJ=208,eQ=209,tQ=210,nQ=211,iQ=212,rQ=213,sQ=214,Bx=0,Vx=1,zx=2,wc=3,Hx=4,Gx=5,$x=6,Wx=7,Cm=0,oQ=1,aQ=2,Uo=0,lQ=1,cQ=2,uQ=3,dQ=4,hQ=5,fQ=6,pQ=7,ko=301,Ra=302,Tm=303,Am=304,Gd=306,Dm=1e3,Vr=1001,Im=1002,ri=1003,JL=1004,$d=1005,kn=1006,Rm=1007,$s=1008,Ws=1009,QL=1010,eO=1011,Wd=1012,qx=1013,Bo=1014,Ji=1015,jd=1016,Xx=1017,Yx=1018,qd=1020,tO=35902,nO=1021,iO=1022,Pi=1023,rO=1024,sO=1025,Xd=1026,Yd=1027,Kx=1028,Pm=1029,oO=1030,Zx=1031,Jx=1033,Nm=33776,Lm=33777,Om=33778,Fm=33779,Qx=35840,eE=35841,tE=35842,nE=35843,iE=36196,rE=37492,sE=37496,oE=37808,aE=37809,lE=37810,cE=37811,uE=37812,dE=37813,hE=37814,fE=37815,pE=37816,mE=37817,gE=37818,_E=37819,yE=37820,vE=37821,Um=36492,bE=36494,xE=36495,aO=36283,EE=36284,SE=36285,wE=36286,bQ=3201,Pa=0,xQ=1,Vo="",Qi="srgb",Tc="srgb-linear",Vm="linear",qt="srgb",Ac=7680,EQ=512,SQ=513,wQ=514,uO=515,MQ=516,CQ=517,TQ=518,AQ=519,dO="300 es",ds=2e3;class Dc{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return void 0!==i&&void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){const i=this._listeners;if(void 0===i)return;const r=i[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const i=t[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const si=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Na=Math.PI/180,Ic=180/Math.PI;function er(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(si[255&n]+si[n>>8&255]+si[n>>16&255]+si[n>>24&255]+"-"+si[255&e]+si[e>>8&255]+"-"+si[e>>16&15|64]+si[e>>24&255]+"-"+si[63&t|128]+si[t>>8&255]+"-"+si[t>>16&255]+si[t>>24&255]+si[255&i]+si[i>>8&255]+si[i>>16&255]+si[i>>24&255]).toLowerCase()}function ht(n,e,t){return Math.max(e,Math.min(t,n))}function Kd(n,e,t){return(1-t)*n+t*e}function yi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function mt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}class le{constructor(e=0,t=0){le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ht(this.x,e.x,t.x),this.y=ht(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ht(this.x,e,t),this.y=ht(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ht(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ht(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gt{constructor(e,t,i,r,s,o,a,l,c){gt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],_=r[0],g=r[3],m=r[6],b=r[1],y=r[4],v=r[7],M=r[2],w=r[5],A=r[8];return s[0]=o*_+a*b+l*M,s[3]=o*g+a*y+l*w,s[6]=o*m+a*v+l*A,s[1]=c*_+u*b+d*M,s[4]=c*g+u*y+d*w,s[7]=c*m+u*v+d*A,s[2]=h*_+f*b+p*M,s[5]=h*g+f*y+p*w,s[8]=h*m+f*v+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const _=1/p;return e[0]=d*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=h*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=f*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(DE.makeScale(e,t)),this}rotate(e){return this.premultiply(DE.makeRotation(-e)),this}translate(e,t){return this.premultiply(DE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const DE=new gt;function fO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Zd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function jQ(){const n=Zd("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const pO={};function Gm(n){n in pO||(pO[n]=!0,console.warn(n))}const mO=(new gt).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),gO=(new gt).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function KQ(){const n={enabled:!0,workingColorSpace:Tc,spaces:{},convert:function(r,s,o){return!1===this.enabled||s===o||!s||!o||(this.spaces[s].transfer===qt&&(r.r=js(r.r),r.g=js(r.g),r.b=js(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===qt&&(r.r=Pc(r.r),r.g=Pc(r.g),r.b=Pc(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Vo?Vm:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Tc]:{primaries:e,whitePoint:i,transfer:Vm,toXYZ:mO,fromXYZ:gO,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Qi},outputColorSpaceConfig:{drawingBufferColorSpace:Qi}},[Qi]:{primaries:e,whitePoint:i,transfer:qt,toXYZ:mO,fromXYZ:gO,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Qi}}}),n}const Ot=KQ();function js(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Pc(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Nc;class ZQ{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{void 0===Nc&&(Nc=Zd("canvas")),Nc.width=e.width,Nc.height=e.height;const r=Nc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Nc}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Zd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*js(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*js(t[i]/255)):js(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let JQ=0;class La{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JQ++}),this.uuid=er(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(IE(r[o].isDataTexture?r[o].image:r[o]))}else s=IE(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function IE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ZQ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let QQ=0,qs=(()=>{class n extends Dc{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Vr,s=Vr,o=kn,a=$s,l=Pi,c=Ws,u=n.DEFAULT_ANISOTROPY,d=Vo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:QQ++}),this.uuid=er(),this.name="",this.source=new La(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new le(0,0),this.repeat=new le(1,1),this.center=new le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Dm:t.x=t.x-Math.floor(t.x);break;case Vr:t.x=t.x<0?0:1;break;case Im:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Dm:t.y=t.y-Math.floor(t.y);break;case Vr:t.y=t.y<0?0:1;break;case Im:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Ft{constructor(e=0,t=0,i=0,r=1){Ft.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],_=l[2],g=l[6],m=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-_)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+_)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,v=(f+1)/2,M=(m+1)/2,w=(u+h)/4,A=(d+_)/4,I=(p+g)/4;return y>v&&y>M?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=w/i,s=A/i):v>M?v<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),i=w/r,s=I/r):M<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=A/s,r=I/s),this.set(i,r,s,t),this}let b=Math.sqrt((g-p)*(g-p)+(d-_)*(d-_)+(h-u)*(h-u));return Math.abs(b)<.001&&(b=1),this.x=(g-p)/b,this.y=(d-_)/b,this.z=(h-u)/b,this.w=Math.acos((c+f+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ht(this.x,e.x,t.x),this.y=ht(this.y,e.y,t.y),this.z=ht(this.z,e.z,t.z),this.w=ht(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ht(this.x,e,t),this.y=ht(this.y,e,t),this.z=ht(this.z,e,t),this.w=ht(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ht(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eee extends Dc{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ft(0,0,e,t),this.scissorTest=!1,this.viewport=new Ft(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:kn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new qs(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new La(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Oa extends eee{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class $m extends qs{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ri,this.minFilter=ri,this.wrapR=Vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class RE extends qs{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ri,this.minFilter=ri,this.wrapR=Vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],_=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=_);if(d!==_||l!==h||c!==f||u!==p){let g=1-a;const m=l*h+c*f+u*p+d*_,b=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){const M=Math.sqrt(y),w=Math.atan2(M,m*b);g=Math.sin(g*w)/M,a=Math.sin(a*w)/M}const v=a*b;if(l=l*g+h*v,c=c*g+f*v,u=u*g+p*v,d=d*g+_*v,g===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ht(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class D{constructor(e=0,t=0,i=0){D.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_O.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_O.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*u,this.y=i+l*u+a*c-s*d,this.z=r+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ht(this.x,e.x,t.x),this.y=ht(this.y,e.y,t.y),this.z=ht(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ht(this.x,e,t),this.y=ht(this.y,e,t),this.z=ht(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ht(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return PE.copy(this).projectOnVector(e),this.sub(PE)}reflect(e){return this.sub(PE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ht(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const PE=new D,_O=new tr;class Ni{constructor(e=new D(1/0,1/0,1/0),t=new D(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(zr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(zr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=zr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,zr):zr.fromBufferAttribute(s,o),zr.applyMatrix4(e.matrixWorld),this.expandByPoint(zr);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Wm.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),Wm.copy(i.boundingBox)),Wm.applyMatrix4(e.matrixWorld),this.union(Wm)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,zr),zr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jd),jm.subVectors(this.max,Jd),Lc.subVectors(e.a,Jd),Oc.subVectors(e.b,Jd),Fc.subVectors(e.c,Jd),zo.subVectors(Oc,Lc),Ho.subVectors(Fc,Oc),Fa.subVectors(Lc,Fc);let t=[0,-zo.z,zo.y,0,-Ho.z,Ho.y,0,-Fa.z,Fa.y,zo.z,0,-zo.x,Ho.z,0,-Ho.x,Fa.z,0,-Fa.x,-zo.y,zo.x,0,-Ho.y,Ho.x,0,-Fa.y,Fa.x,0];return!(!NE(t,Lc,Oc,Fc,jm)||(t=[1,0,0,0,1,0,0,0,1],!NE(t,Lc,Oc,Fc,jm)))&&(qm.crossVectors(zo,Ho),t=[qm.x,qm.y,qm.z],NE(t,Lc,Oc,Fc,jm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(zr).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Xs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xs=[new D,new D,new D,new D,new D,new D,new D,new D],zr=new D,Wm=new Ni,Lc=new D,Oc=new D,Fc=new D,zo=new D,Ho=new D,Fa=new D,Jd=new D,jm=new D,qm=new D,Ua=new D;function NE(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ua.fromArray(n,s);const a=r.x*Math.abs(Ua.x)+r.y*Math.abs(Ua.y)+r.z*Math.abs(Ua.z),l=e.dot(Ua),c=t.dot(Ua),u=i.dot(Ua);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const tee=new Ni,Qd=new D,LE=new D;class vi{constructor(e=new D,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):tee.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qd.subVectors(e,this.center);const t=Qd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Qd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(LE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qd.copy(e.center).add(LE)),this.expandByPoint(Qd.copy(e.center).sub(LE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ys=new D,OE=new D,Xm=new D,Go=new D,FE=new D,Ym=new D,UE=new D;class eh{constructor(e=new D,t=new D(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ys)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ys.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ys.copy(this.origin).addScaledVector(this.direction,t),Ys.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){OE.copy(e).add(t).multiplyScalar(.5),Xm.copy(t).sub(e).normalize(),Go.copy(this.origin).sub(OE);const s=.5*e.distanceTo(t),o=-this.direction.dot(Xm),a=Go.dot(this.direction),l=-Go.dot(Xm),c=Go.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const _=1/u;d*=_,h*=_,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(OE).addScaledVector(Xm,h),f}intersectSphere(e,t){Ys.subVectors(e.center,this.origin);const i=Ys.dot(this.direction),r=Ys.dot(Ys)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Ys)}intersectTriangle(e,t,i,r,s){FE.subVectors(t,e),Ym.subVectors(i,e),UE.crossVectors(FE,Ym);let a,o=this.direction.dot(UE);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Go.subVectors(this.origin,e);const l=a*this.direction.dot(Ym.crossVectors(Go,Ym));if(l<0)return null;const c=a*this.direction.dot(FE.cross(Go));if(c<0||l+c>o)return null;const u=-a*Go.dot(UE);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ot{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f,p,_,g){ot.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,_,g)}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,_,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=d,m[14]=h,m[3]=f,m[7]=p,m[11]=_,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ot).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Uc.setFromMatrixColumn(e,0).length(),s=1/Uc.setFromMatrixColumn(e,1).length(),o=1/Uc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,_=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-_*c,t[9]=-a*l,t[2]=_-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,_=c*d;t[0]=h+_*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=_+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,_=c*d;t[0]=h-_*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=_-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,_=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+_,t[1]=l*d,t[5]=_*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,_=a*c;t[0]=l*u,t[4]=_-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-_*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,_=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+_,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=_*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nee,e,iee)}lookAt(e,t,i){const r=this.elements;return nr.subVectors(e,t),0===nr.lengthSq()&&(nr.z=1),nr.normalize(),$o.crossVectors(i,nr),0===$o.lengthSq()&&(1===Math.abs(i.z)?nr.x+=1e-4:nr.z+=1e-4,nr.normalize(),$o.crossVectors(i,nr)),$o.normalize(),Km.crossVectors(nr,$o),r[0]=$o.x,r[4]=Km.x,r[8]=nr.x,r[1]=$o.y,r[5]=Km.y,r[9]=nr.y,r[2]=$o.z,r[6]=Km.z,r[10]=nr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],_=i[6],g=i[10],m=i[14],b=i[3],y=i[7],v=i[11],M=i[15],w=r[0],A=r[4],I=r[8],S=r[12],E=r[1],R=r[5],z=r[9],B=r[13],j=r[2],Q=r[6],N=r[10],V=r[14],L=r[3],ne=r[7],he=r[11],_e=r[15];return s[0]=o*w+a*E+l*j+c*L,s[4]=o*A+a*R+l*Q+c*ne,s[8]=o*I+a*z+l*N+c*he,s[12]=o*S+a*B+l*V+c*_e,s[1]=u*w+d*E+h*j+f*L,s[5]=u*A+d*R+h*Q+f*ne,s[9]=u*I+d*z+h*N+f*he,s[13]=u*S+d*B+h*V+f*_e,s[2]=p*w+_*E+g*j+m*L,s[6]=p*A+_*R+g*Q+m*ne,s[10]=p*I+_*z+g*N+m*he,s[14]=p*S+_*B+g*V+m*_e,s[3]=b*w+y*E+v*j+M*L,s[7]=b*A+y*R+v*Q+M*ne,s[11]=b*I+y*z+v*N+M*he,s[15]=b*S+y*B+v*V+M*_e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],_=e[13],g=e[14],m=e[15],b=d*g*c-_*h*c+_*l*f-a*g*f-d*l*m+a*h*m,y=p*h*c-u*g*c-p*l*f+o*g*f+u*l*m-o*h*m,v=u*_*c-p*d*c+p*a*f-o*_*f-u*a*m+o*d*m,M=p*d*l-u*_*l-p*a*h+o*_*h+u*a*g-o*d*g,w=t*b+i*y+r*v+s*M;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=b*A,e[1]=(_*h*s-d*g*s-_*r*f+i*g*f+d*r*m-i*h*m)*A,e[2]=(a*g*s-_*l*s+_*r*c-i*g*c-a*r*m+i*l*m)*A,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*A,e[4]=y*A,e[5]=(u*g*s-p*h*s+p*r*f-t*g*f-u*r*m+t*h*m)*A,e[6]=(p*l*s-o*g*s-p*r*c+t*g*c+o*r*m-t*l*m)*A,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*A,e[8]=v*A,e[9]=(p*d*s-u*_*s-p*i*f+t*_*f+u*i*m-t*d*m)*A,e[10]=(o*_*s-p*a*s+p*i*c-t*_*c-o*i*m+t*a*m)*A,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*A,e[12]=M*A,e[13]=(u*_*r-p*d*r+p*i*h-t*_*h-u*i*g+t*d*g)*A,e[14]=(p*a*r-o*_*r-p*i*l+t*_*l+o*i*g-t*a*g)*A,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,_=o*u,g=o*d,m=a*d,b=l*c,y=l*u,v=l*d,M=i.x,w=i.y,A=i.z;return r[0]=(1-(_+m))*M,r[1]=(f+v)*M,r[2]=(p-y)*M,r[3]=0,r[4]=(f-v)*w,r[5]=(1-(h+m))*w,r[6]=(g+b)*w,r[7]=0,r[8]=(p+y)*A,r[9]=(g-b)*A,r[10]=(1-(h+_))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Uc.set(r[0],r[1],r[2]).length();const o=Uc.set(r[4],r[5],r[6]).length(),a=Uc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Hr.copy(this);const c=1/s,u=1/o,d=1/a;return Hr.elements[0]*=c,Hr.elements[1]*=c,Hr.elements[2]*=c,Hr.elements[4]*=u,Hr.elements[5]*=u,Hr.elements[6]*=u,Hr.elements[8]*=d,Hr.elements[9]*=d,Hr.elements[10]*=d,t.setFromRotationMatrix(Hr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ds){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r);let f,p;if(a===ds)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),p=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ds){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*c,f=(i+r)*u;let p,_;if(a===ds)p=(o+s)*d,_=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,_=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=_,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Uc=new D,Hr=new ot,nee=new D(0,0,0),iee=new D(1,1,1),$o=new D,Km=new D,nr=new D,yO=new ot,vO=new tr;let Ks=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(ht(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ht(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(ht(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-ht(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ht(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-ht(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return yO.makeRotationFromQuaternion(t),this.setFromRotationMatrix(yO,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return vO.setFromEuler(this),this.setFromQuaternion(vO,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class kE{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let ree=0;const bO=new D,kc=new tr,Zs=new ot,Zm=new D,th=new D,see=new D,oee=new tr,xO=new D(1,0,0),EO=new D(0,1,0),SO=new D(0,0,1),wO={type:"added"},aee={type:"removed"},Bc={type:"childadded",child:null},BE={type:"childremoved",child:null};let Li=(()=>{class n extends Dc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ree++}),this.uuid=er(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new D,i=new Ks,r=new tr,s=new D(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ot},normalMatrix:{value:new gt}}),this.matrix=new ot,this.matrixWorld=new ot,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new kE,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return kc.setFromAxisAngle(t,i),this.quaternion.multiply(kc),this}rotateOnWorldAxis(t,i){return kc.setFromAxisAngle(t,i),this.quaternion.premultiply(kc),this}rotateX(t){return this.rotateOnAxis(xO,t)}rotateY(t){return this.rotateOnAxis(EO,t)}rotateZ(t){return this.rotateOnAxis(SO,t)}translateOnAxis(t,i){return bO.copy(t).applyQuaternion(this.quaternion),this.position.add(bO.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(xO,t)}translateY(t){return this.translateOnAxis(EO,t)}translateZ(t){return this.translateOnAxis(SO,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Zs.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Zm.copy(t):Zm.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),th.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zs.lookAt(th,Zm,this.up):Zs.lookAt(Zm,th,this.up),this.quaternion.setFromRotationMatrix(Zs),s&&(Zs.extractRotation(s.matrixWorld),kc.setFromRotationMatrix(Zs),this.quaternion.premultiply(kc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(wO),Bc.child=t,this.dispatchEvent(Bc),Bc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(aee),BE.child=t,this.dispatchEvent(BE),BE.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Zs.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Zs.multiply(t.parent.matrixWorld)),t.applyMatrix4(Zs),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(wO),Bc.child=t,this.dispatchEvent(Bc),Bc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(th,t,see),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(th,oee,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),_=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new D(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Gr=new D,Js=new D,VE=new D,Qs=new D,Vc=new D,zc=new D,MO=new D,zE=new D,HE=new D,GE=new D,$E=new Ft,WE=new Ft,jE=new Ft;class ir{constructor(e=new D,t=new D,i=new D){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Gr.subVectors(e,t),r.cross(Gr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Gr.subVectors(r,t),Js.subVectors(i,t),VE.subVectors(e,t);const o=Gr.dot(Gr),a=Gr.dot(Js),l=Gr.dot(VE),c=Js.dot(Js),u=Js.dot(VE),d=o*c-a*a;if(0===d)return s.set(0,0,0),null;const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,Qs)&&Qs.x>=0&&Qs.y>=0&&Qs.x+Qs.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return null===this.getBarycoord(e,t,i,r,Qs)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Qs.x),l.addScaledVector(o,Qs.y),l.addScaledVector(a,Qs.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return $E.setScalar(0),WE.setScalar(0),jE.setScalar(0),$E.fromBufferAttribute(e,t),WE.fromBufferAttribute(e,i),jE.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector($E,s.x),o.addScaledVector(WE,s.y),o.addScaledVector(jE,s.z),o}static isFrontFacing(e,t,i,r){return Gr.subVectors(i,t),Js.subVectors(e,t),Gr.cross(Js).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gr.subVectors(this.c,this.b),Js.subVectors(this.a,this.b),.5*Gr.cross(Js).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ir.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ir.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return ir.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ir.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ir.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Vc.subVectors(r,i),zc.subVectors(s,i),zE.subVectors(e,i);const l=Vc.dot(zE),c=zc.dot(zE);if(l<=0&&c<=0)return t.copy(i);HE.subVectors(e,r);const u=Vc.dot(HE),d=zc.dot(HE);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Vc,o);GE.subVectors(e,s);const f=Vc.dot(GE),p=zc.dot(GE);if(p>=0&&f<=p)return t.copy(s);const _=f*c-l*p;if(_<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(zc,a);const g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return MO.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(MO,a);const m=1/(g+_+h);return o=_*m,a=h*m,t.copy(i).addScaledVector(Vc,o).addScaledVector(zc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const CO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wo={h:0,s:0,l:0},Jm={h:0,s:0,l:0};function qE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class we{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ot.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ot.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ot.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ot.workingColorSpace){if(e=function AE(n,e){return(n%e+e)%e}(e,1),t=ht(t,0,1),i=ht(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=qE(o,s,e+1/3),this.g=qE(o,s,e),this.b=qE(o,s,e-1/3)}return Ot.toWorkingColorSpace(this,r),this}setStyle(e,t=Qi){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qi){const i=CO[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=js(e.r),this.g=js(e.g),this.b=js(e.b),this}copyLinearToSRGB(e){return this.r=Pc(e.r),this.g=Pc(e.g),this.b=Pc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qi){return Ot.fromWorkingColorSpace(oi.copy(this),e),65536*Math.round(ht(255*oi.r,0,255))+256*Math.round(ht(255*oi.g,0,255))+Math.round(ht(255*oi.b,0,255))}getHexString(e=Qi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ot.workingColorSpace){Ot.fromWorkingColorSpace(oi.copy(this),t);const i=oi.r,r=oi.g,s=oi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ot.workingColorSpace){return Ot.fromWorkingColorSpace(oi.copy(this),t),e.r=oi.r,e.g=oi.g,e.b=oi.b,e}getStyle(e=Qi){Ot.fromWorkingColorSpace(oi.copy(this),e);const t=oi.r,i=oi.g,r=oi.b;return e!==Qi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(Wo),this.setHSL(Wo.h+e,Wo.s+t,Wo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Wo),e.getHSL(Jm);const i=Kd(Wo.h,Jm.h,t),r=Kd(Wo.s,Jm.s,t),s=Kd(Wo.l,Jm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const oi=new we;we.NAMES=CO;let lee=0;class Hc extends Dc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lee++}),this.uuid=er(),this.name="",this.type="Material",this.blending=Sc,this.side=Oo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ux,this.blendDst=kx,this.blendEquation=Ia,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new we(0,0,0),this.blendAlpha=0,this.depthFunc=wc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ac,this.stencilZFail=Ac,this.stencilZPass=Ac,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Sc&&(i.blending=this.blending),this.side!==Oo&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==Ux&&(i.blendSrc=this.blendSrc),this.blendDst!==kx&&(i.blendDst=this.blendDst),this.blendEquation!==Ia&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==wc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ac&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ac&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ac&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ka extends Hc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ks,this.combine=Cm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Dn=new D,Qm=new le;let cee=0;class In{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:cee++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=Ji,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Qm.fromBufferAttribute(this,t),Qm.applyMatrix3(e),this.setXY(t,Qm.x,Qm.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix3(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=yi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=mt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=yi(t,this.array)),t}setX(e,t){return this.normalized&&(t=mt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=yi(t,this.array)),t}setY(e,t){return this.normalized&&(t=mt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=yi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=yi(t,this.array)),t}setW(e,t){return this.normalized&&(t=mt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=mt(t,this.array),i=mt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=mt(t,this.array),i=mt(i,this.array),r=mt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=mt(t,this.array),i=mt(i,this.array),r=mt(r,this.array),s=mt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class TO extends In{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class AO extends In{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Ve extends In{constructor(e,t,i){super(new Float32Array(e),t,i)}}let uee=0;const Sr=new ot,XE=new Li,Gc=new D,rr=new Ni,ih=new Ni,Bn=new D;class Mt extends Dc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uee++}),this.uuid=er(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(fO(e)?AO:TO)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new gt).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sr.makeRotationFromQuaternion(e),this.applyMatrix4(Sr),this}rotateX(e){return Sr.makeRotationX(e),this.applyMatrix4(Sr),this}rotateY(e){return Sr.makeRotationY(e),this.applyMatrix4(Sr),this}rotateZ(e){return Sr.makeRotationZ(e),this.applyMatrix4(Sr),this}translate(e,t,i){return Sr.makeTranslation(e,t,i),this.applyMatrix4(Sr),this}scale(e,t,i){return Sr.makeScale(e,t,i),this.applyMatrix4(Sr),this}lookAt(e){return XE.lookAt(e),XE.updateMatrix(),this.applyMatrix4(XE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gc).negate(),this.translate(Gc.x,Gc.y,Gc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ve(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ni);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)rr.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Bn.addVectors(this.boundingBox.min,rr.min),this.boundingBox.expandByPoint(Bn),Bn.addVectors(this.boundingBox.max,rr.max),this.boundingBox.expandByPoint(Bn)):(this.boundingBox.expandByPoint(rr.min),this.boundingBox.expandByPoint(rr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new D,1/0);if(e){const i=this.boundingSphere.center;if(rr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)ih.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Bn.addVectors(rr.min,ih.min),rr.expandByPoint(Bn),Bn.addVectors(rr.max,ih.max),rr.expandByPoint(Bn)):(rr.expandByPoint(ih.min),rr.expandByPoint(ih.max));rr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Bn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Bn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Bn.fromBufferAttribute(a,c),l&&(Gc.fromBufferAttribute(e,c),Bn.add(Gc)),r=Math.max(r,i.distanceToSquared(Bn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new In(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new D,l[I]=new D;const c=new D,u=new D,d=new D,h=new le,f=new le,p=new le,_=new D,g=new D;function m(I,S,E){c.fromBufferAttribute(i,I),u.fromBufferAttribute(i,S),d.fromBufferAttribute(i,E),h.fromBufferAttribute(s,I),f.fromBufferAttribute(s,S),p.fromBufferAttribute(s,E),u.sub(c),d.sub(c),f.sub(h),p.sub(h);const R=1/(f.x*p.y-p.x*f.y);isFinite(R)&&(_.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(R),g.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(R),a[I].add(_),a[S].add(_),a[E].add(_),l[I].add(g),l[S].add(g),l[E].add(g))}let b=this.groups;0===b.length&&(b=[{start:0,count:e.count}]);for(let I=0,S=b.length;I<S;++I){const E=b[I],R=E.start;for(let B=R,j=R+E.count;B<j;B+=3)m(e.getX(B+0),e.getX(B+1),e.getX(B+2))}const y=new D,v=new D,M=new D,w=new D;function A(I){M.fromBufferAttribute(r,I),w.copy(M);const S=a[I];y.copy(S),y.sub(M.multiplyScalar(M.dot(S))).normalize(),v.crossVectors(w,S);const R=v.dot(l[I])<0?-1:1;o.setXYZW(I,y.x,y.y,y.z,R)}for(let I=0,S=b.length;I<S;++I){const E=b[I],R=E.start;for(let B=R,j=R+E.count;B<j;B+=3)A(e.getX(B+0)),A(e.getX(B+1)),A(e.getX(B+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new In(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new D,s=new D,o=new D,a=new D,l=new D,c=new D,u=new D,d=new D;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),_=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Bn.fromBufferAttribute(e,t),Bn.normalize(),e.setXYZ(t,Bn.x,Bn.y,Bn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let _=0,g=l.length;_<g;_++){f=a.isInterleavedBufferAttribute?l[_]*a.data.stride+a.offset:l[_]*u;for(let m=0;m<u;m++)h[p++]=c[f++]}return new In(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone());const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const DO=new ot,Ba=new eh,eg=new vi,IO=new D,tg=new D,ng=new D,ig=new D,YE=new D,rg=new D,RO=new D,sg=new D;class un extends Li{constructor(e=new Mt,t=new ka){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){rg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(YE.fromBufferAttribute(s[l],e),rg.addScaledVector(o?YE:YE.sub(t),u))}t.add(rg)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),eg.copy(i.boundingSphere),eg.applyMatrix4(s),Ba.copy(e.ray).recast(e.near),(!1!==eg.containsPoint(Ba.origin)||!(null===Ba.intersectSphere(eg,IO)||Ba.origin.distanceToSquared(IO)>(e.far-e.near)**2))&&(DO.copy(s).invert(),Ba.copy(e.ray).applyMatrix4(DO),(null===i.boundingBox||!1!==Ba.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,Ba)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,_=h.length;p<_;p++){const g=h[p],m=o[g.materialIndex];for(let v=Math.max(g.start,f.start),M=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));v<M;v+=3)r=og(this,m,e,i,c,u,d,a.getX(v),a.getX(v+1),a.getX(v+2)),r&&(r.faceIndex=Math.floor(v/3),r.face.materialIndex=g.materialIndex,t.push(r))}else for(let g=Math.max(0,f.start),m=Math.min(a.count,f.start+f.count);g<m;g+=3)r=og(this,o,e,i,c,u,d,a.getX(g),a.getX(g+1),a.getX(g+2)),r&&(r.faceIndex=Math.floor(g/3),t.push(r));else if(void 0!==l)if(Array.isArray(o))for(let p=0,_=h.length;p<_;p++){const g=h[p],m=o[g.materialIndex];for(let v=Math.max(g.start,f.start),M=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));v<M;v+=3)r=og(this,m,e,i,c,u,d,v,v+1,v+2),r&&(r.faceIndex=Math.floor(v/3),r.face.materialIndex=g.materialIndex,t.push(r))}else for(let g=Math.max(0,f.start),m=Math.min(l.count,f.start+f.count);g<m;g+=3)r=og(this,o,e,i,c,u,d,g,g+1,g+2),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}function og(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,tg),n.getVertexPosition(l,ng),n.getVertexPosition(c,ig);const u=function dee(n,e,t,i,r,s,o,a){let l;if(l=e.side===Ri?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side===Oo,a),null===l)return null;sg.copy(a),sg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(sg);return c<t.near||c>t.far?null:{distance:c,point:sg.clone(),object:n}}(n,e,t,i,tg,ng,ig,RO);if(u){const d=new D;ir.getBarycoord(RO,tg,ng,ig,d),r&&(u.uv=ir.getInterpolatedAttribute(r,a,l,c,d,new le)),s&&(u.uv1=ir.getInterpolatedAttribute(s,a,l,c,d,new le)),o&&(u.normal=ir.getInterpolatedAttribute(o,a,l,c,d,new D),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new D,materialIndex:0};ir.getNormal(tg,ng,ig,h.normal),u.face=h,u.barycoord=d}return u}class hs extends Mt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(_,g,m,b,y,v,M,w,A,I,S){const E=v/A,R=M/I,z=v/2,B=M/2,j=w/2,Q=A+1,N=I+1;let V=0,L=0;const ne=new D;for(let he=0;he<N;he++){const _e=he*R-B;for(let Ue=0;Ue<Q;Ue++)ne[_]=(Ue*E-z)*b,ne[g]=_e*y,ne[m]=j,c.push(ne.x,ne.y,ne.z),ne[_]=0,ne[g]=0,ne[m]=w>0?1:-1,u.push(ne.x,ne.y,ne.z),d.push(Ue/A),d.push(1-he/I),V+=1}for(let he=0;he<I;he++)for(let _e=0;_e<A;_e++){const ft=h+_e+Q*(he+1),H=h+(_e+1)+Q*(he+1),ue=h+(_e+1)+Q*he;l.push(h+_e+Q*he,ft,ue),l.push(ft,H,ue),L+=6}a.addGroup(f,L,S),f+=L,h+=V}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ve(c,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hs(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $c(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function bi(n){const e={};for(let t=0;t<n.length;t++){const i=$c(n[t]);for(const r in i)e[r]=i[r]}return e}function PO(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:Ot.workingColorSpace}const fee={clone:$c,merge:bi};class to extends Hc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$c(e.uniforms),this.uniformsGroups=function hee(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class KE extends Li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ot,this.projectionMatrix=new ot,this.projectionMatrixInverse=new ot,this.coordinateSystem=ds}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const jo=new D,NO=new le,LO=new le;class qn extends KE{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ic*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Na*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ic*Math.atan(Math.tan(.5*Na*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){jo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(jo.x,jo.y).multiplyScalar(-e/jo.z),jo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(jo.x,jo.y).multiplyScalar(-e/jo.z)}getViewSize(e,t){return this.getViewBounds(e,NO,LO),t.subVectors(LO,NO)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Na*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class gee extends Li{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new qn(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new qn(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new qn(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new qn(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new qn(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new qn(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ds)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class ag extends qs{constructor(e=[],t=ko,i,r,s,o,a,l,c,u){super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _ee extends Oa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new ag([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:kn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new hs(5,5,5),s=new to({name:"CubemapFromEquirect",uniforms:$c(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:Ri,blending:Fo});s.uniforms.tEquirect.value=t;const o=new un(r,s),a=t.minFilter;return t.minFilter===$s&&(t.minFilter=kn),new gee(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class qo extends Li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yee={type:"move"};class ZE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const g=t.getJointPose(_,i),m=this._getHandJoint(c,_);null!==g&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(yee)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new qo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class OO extends Li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ks,this.environmentIntensity=1,this.environmentRotation=new Ks,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const rS=new D,Cee=new D,Tee=new gt;class Va{constructor(e=new D(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=rS.subVectors(i,t).cross(Cee.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(rS),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Tee.getNormalMatrix(e),r=this.coplanarPoint(rS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const za=new vi,pg=new D;class mg{constructor(e=new Va,t=new Va,i=new Va,r=new Va,s=new Va,o=new Va){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ds){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],_=r[10],g=r[11],m=r[12],b=r[13],y=r[14],v=r[15];if(i[0].setComponents(l-s,h-c,g-f,v-m).normalize(),i[1].setComponents(l+s,h+c,g+f,v+m).normalize(),i[2].setComponents(l+o,h+u,g+p,v+b).normalize(),i[3].setComponents(l-o,h-u,g-p,v-b).normalize(),i[4].setComponents(l-a,h-d,g-_,v-y).normalize(),t===ds)i[5].setComponents(l+a,h+d,g+_,v+y).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,_,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),za.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),za.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(za)}intersectsSprite(e){return za.center.set(0,0,0),za.radius=.7071067811865476,za.applyMatrix4(e.matrixWorld),this.intersectsSphere(za)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(pg.x=r.normal.x>0?e.max.x:e.min.x,pg.y=r.normal.y>0?e.max.y:e.min.y,pg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class oF extends qs{constructor(e,t,i=Bo,r,s,o,a=ri,l=ri,c,u=Xd){if(u!==Xd&&u!==Yd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new La(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class tu extends Mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],_=[],g=[];for(let m=0;m<u;m++){const b=m*h-o;for(let y=0;y<c;y++)p.push(y*d-s,-b,0),_.push(0,0,1),g.push(y/a),g.push(1-m/l)}for(let m=0;m<l;m++)for(let b=0;b<a;b++){const v=b+c*(m+1),M=b+1+c*(m+1),w=b+1+c*m;f.push(b+c*m,v,w),f.push(v,M,w)}this.setIndex(f),this.setAttribute("position",new Ve(p,3)),this.setAttribute("normal",new Ve(_,3)),this.setAttribute("uv",new Ve(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tu(e.width,e.height,e.widthSegments,e.heightSegments)}}class vh extends Mt{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new D,h=new D,f=[],p=[],_=[],g=[];for(let m=0;m<=i;m++){const b=[],y=m/i;let v=0;0===m&&0===o?v=.5/t:m===i&&l===Math.PI&&(v=-.5/t);for(let M=0;M<=t;M++){const w=M/t;d.x=-e*Math.cos(r+w*s)*Math.sin(o+y*a),d.y=e*Math.cos(o+y*a),d.z=e*Math.sin(r+w*s)*Math.sin(o+y*a),p.push(d.x,d.y,d.z),h.copy(d).normalize(),_.push(h.x,h.y,h.z),g.push(w+v,1-y),b.push(c++)}u.push(b)}for(let m=0;m<i;m++)for(let b=0;b<t;b++){const v=u[m][b],M=u[m+1][b],w=u[m+1][b+1];(0!==m||o>0)&&f.push(u[m][b+1],v,w),(m!==i-1||l<Math.PI)&&f.push(v,M,w)}this.setIndex(f),this.setAttribute("position",new Ve(p,3)),this.setAttribute("normal",new Ve(_,3)),this.setAttribute("uv",new Ve(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ja extends Hc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new we(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pa,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ks,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EF extends Hc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class SF extends Hc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function qa(n,e){return n&&n.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n):n}class Og{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ite extends Og{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),_=p*p,g=_*p,m=-h*g+2*h*_-h*p,b=(1+h)*g+(-1.5-2*h)*_+(-.5+h)*p+1,y=(-1-f)*g+(1.5+f)*_+.5*p,v=f*g-f*_;for(let M=0;M!==a;++M)s[M]=m*o[u+M]+b*o[c+M]+y*o[l+M]+v*o[d+M];return s}}class CF extends Og{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class Rte extends Og{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $r{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qa(t,this.TimeBufferType),this.values=qa(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:qa(e.times,Array),values:qa(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Rte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new CF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ite(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&function wF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const _=t[d+p];if(_!==t[h+p]||_!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$r.prototype.ValueTypeName="",$r.prototype.TimeBufferType=Float32Array,$r.prototype.ValueBufferType=Float32Array,$r.prototype.DefaultInterpolation=2301;class nu extends $r{constructor(e,t,i){super(e,t,i)}}nu.prototype.ValueTypeName="bool",nu.prototype.ValueBufferType=Array,nu.prototype.DefaultInterpolation=2300,nu.prototype.InterpolantFactoryMethodLinear=void 0,nu.prototype.InterpolantFactoryMethodSmooth=void 0;(class TF extends $r{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="color";(class Fg extends $r{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="number";class Pte extends Og{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)tr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ug extends $r{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Pte(this.times,this.values,this.getValueSize(),e)}}Ug.prototype.ValueTypeName="quaternion",Ug.prototype.InterpolantFactoryMethodSmooth=void 0;class iu extends $r{constructor(e,t,i){super(e,t,i)}}iu.prototype.ValueTypeName="string",iu.prototype.ValueBufferType=Array,iu.prototype.DefaultInterpolation=2300,iu.prototype.InterpolantFactoryMethodLinear=void 0,iu.prototype.InterpolantFactoryMethodSmooth=void 0;(class kg extends $r{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="vector";class Ote extends Error{constructor(e,t){super(e),this.response=t}}class DF extends Li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new we(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const PS=new ot,IF=new D,RF=new D;class Ute{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new le(512,512),this.map=null,this.mapPass=null,this.matrix=new ot,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mg,this._frameExtents=new le(1,1),this._viewportCount=1,this._viewports=[new Ft(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;IF.setFromMatrixPosition(e.matrixWorld),t.position.copy(IF),RF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(RF),t.updateMatrixWorld(),PS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(PS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class LS extends KE{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Hte extends Ute{constructor(){super(new LS(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class NF extends DF{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.shadow=new Hte}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class LF extends DF{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Yte extends qn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const FS="\\[\\]\\.:\\/",ene=new RegExp("["+FS+"]","g"),US="[^"+FS+"]",tne="[^"+FS.replace("\\.","")+"]",one=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",US)+/(WCOD+)?/.source.replace("WCOD",tne)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",US)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",US)+"$"),ane=["material","materials","bones","map"];class lne{constructor(e,t,i){const r=i||tn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let tn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ene,"")}static parseTrackName(t){const i=one.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==ane.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?l=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=lne,n})();function zS(n,e,t,i){const r=function gne(n){switch(n){case Ws:case QL:return{byteLength:1,components:1};case Wd:case eO:case jd:return{byteLength:2,components:1};case Xx:case Yx:return{byteLength:2,components:4};case Bo:case qx:case Ji:return{byteLength:4,components:1};case tO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case nO:case rO:return n*e;case sO:return n*e*2;case Kx:case Pm:return n*e/r.components*r.byteLength;case oO:case Zx:return n*e*2/r.components*r.byteLength;case iO:return n*e*3/r.components*r.byteLength;case Pi:case Jx:return n*e*4/r.components*r.byteLength;case Nm:case Lm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Om:case Fm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case eE:case nE:return Math.max(n,16)*Math.max(e,8)/4;case Qx:case tE:return Math.max(n,8)*Math.max(e,8)/2;case iE:case rE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case sE:case oE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case aE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case lE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case cE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case uE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case dE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case hE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case fE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case pE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case mE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case gE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case _E:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case yE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case vE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Um:case bE:case xE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case aO:case EE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case SE:case wE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function i2(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _ne(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))},update:function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);return void((!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const c=e.get(a);if(void 0===c)e.set(a,function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,h=n.createBuffer();let f;if(n.bindBuffer(l,h),n.bufferData(l,c,u),a.onUploadCallback(),c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)f=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);f=n.UNSIGNED_BYTE}return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),0===d.length)n.bufferSubData(c,0,u);else{d.sort((f,p)=>f.start-p.start);let h=0;for(let f=1;f<d.length;f++){const p=d[h],_=d[f];_.start<=p.start+p.count+1?p.count=Math.max(p.count,_.start+_.count-p.start):(++h,d[h]=_)}d.length=h+1;for(let f=0,p=d.length;f<p;f++){const _=d[f];n.bufferSubData(c,_.start*u.BYTES_PER_ELEMENT,u,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}tn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},tn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},tn.prototype.GetterByBindingType=[tn.prototype._getValue_direct,tn.prototype._getValue_array,tn.prototype._getValue_arrayElement,tn.prototype._getValue_toArray],tn.prototype.SetterByBindingTypeAndVersioning=[[tn.prototype._setValue_direct,tn.prototype._setValue_direct_setNeedsUpdate,tn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_array,tn.prototype._setValue_array_setNeedsUpdate,tn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_arrayElement,tn.prototype._setValue_arrayElement_setNeedsUpdate,tn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_fromArray,tn.prototype._setValue_fromArray_setNeedsUpdate,tn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"175"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="175");const Et={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ye={common:{diffuse:{value:new we(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gt}},envmap:{envMap:{value:null},envMapRotation:{value:new gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gt},normalScale:{value:new le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new we(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new we(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0},uvTransform:{value:new gt}},sprite:{diffuse:{value:new we(16777215)},opacity:{value:1},center:{value:new le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}}},ps={basic:{uniforms:bi([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:bi([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,ye.lights,{emissive:{value:new we(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:bi([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,ye.lights,{emissive:{value:new we(0)},specular:{value:new we(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:bi([ye.common,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.roughnessmap,ye.metalnessmap,ye.fog,ye.lights,{emissive:{value:new we(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:bi([ye.common,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.gradientmap,ye.fog,ye.lights,{emissive:{value:new we(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:bi([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:bi([ye.points,ye.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:bi([ye.common,ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:bi([ye.common,ye.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:bi([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:bi([ye.sprite,ye.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gt}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:bi([ye.common,ye.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:bi([ye.lights,ye.fog,{color:{value:new we(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};ps.physical={uniforms:bi([ps.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gt},clearcoatNormalScale:{value:new le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gt},sheen:{value:0},sheenColor:{value:new we(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gt},transmissionSamplerSize:{value:new le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gt},attenuationDistance:{value:0},attenuationColor:{value:new we(0)},specularColor:{value:new we(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gt},anisotropyVector:{value:new le},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gt}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};const Xg={r:0,b:0,g:0},Qa=new Ks,_re=new ot;function yre(n,e,t,i,r,s,o){const a=new we(0);let c,u,l=!0===s?0:1,d=null,h=0,f=null;function p(y){let v=!0===y.isScene?y.background:null;return v&&v.isTexture&&(v=(y.backgroundBlurriness>0?t:e).get(v)),v}function m(y,v){y.getRGB(Xg,PO(n)),i.buffers.color.setClear(Xg.r,Xg.g,Xg.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,m(a,l)},render:function _(y){let v=!1;const M=p(y);null===M?m(a,l):M&&M.isColor&&(m(M,1),v=!0);const w=n.xr.getEnvironmentBlendMode();"additive"===w?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===w&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||v)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function g(y,v){const M=p(v);M&&(M.isCubeTexture||M.mapping===Gd)?(void 0===u&&(u=new un(new hs(1,1,1),new to({name:"BackgroundCubeMaterial",uniforms:$c(ps.backgroundCube.uniforms),vertexShader:ps.backgroundCube.vertexShader,fragmentShader:ps.backgroundCube.fragmentShader,side:Ri,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,A,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Qa.copy(v.backgroundRotation),Qa.x*=-1,Qa.y*=-1,Qa.z*=-1,M.isCubeTexture&&!1===M.isRenderTargetTexture&&(Qa.y*=-1,Qa.z*=-1),u.material.uniforms.envMap.value=M,u.material.uniforms.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(_re.makeRotationFromEuler(Qa)),u.material.toneMapped=Ot.getTransfer(M.colorSpace)!==qt,(d!==M||h!==M.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=M,h=M.version,f=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):M&&M.isTexture&&(void 0===c&&(c=new un(new tu(2,2),new to({name:"BackgroundMaterial",uniforms:$c(ps.background.uniforms),vertexShader:ps.background.vertexShader,fragmentShader:ps.background.fragmentShader,side:Oo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Ot.getTransfer(M.colorSpace)!==qt,!0===M.matrixAutoUpdate&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||h!==M.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=M,h=M.version,f=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))},dispose:function b(){void 0!==u&&(u.geometry.dispose(),u.material.dispose(),u=void 0),void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}}}function vre(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,o=!1;function c(E){return n.bindVertexArray(E)}function u(E){return n.deleteVertexArray(E)}function h(E){const R=[],z=[],B=[];for(let j=0;j<t;j++)R[j]=0,z[j]=0,B[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:z,attributeDivisors:B,object:E,attributes:{},index:null}}function _(){const E=s.newAttributes;for(let R=0,z=E.length;R<z;R++)E[R]=0}function g(E){m(E,0)}function m(E,R){const B=s.enabledAttributes,j=s.attributeDivisors;s.newAttributes[E]=1,0===B[E]&&(n.enableVertexAttribArray(E),B[E]=1),j[E]!==R&&(n.vertexAttribDivisor(E,R),j[E]=R)}function b(){const E=s.newAttributes,R=s.enabledAttributes;for(let z=0,B=R.length;z<B;z++)R[z]!==E[z]&&(n.disableVertexAttribArray(z),R[z]=0)}function y(E,R,z,B,j,Q,N){!0===N?n.vertexAttribIPointer(E,R,z,j,Q):n.vertexAttribPointer(E,R,z,B,j,Q)}function I(){S(),o=!0,s!==r&&(s=r,c(s.object))}function S(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(E,R,z,B,j){let Q=!1;const N=function d(E,R,z){const B=!0===z.wireframe;let j=i[E.id];void 0===j&&(j={},i[E.id]=j);let Q=j[R.id];void 0===Q&&(Q={},j[R.id]=Q);let N=Q[B];return void 0===N&&(N=h(function l(){return n.createVertexArray()}()),Q[B]=N),N}(B,z,R);s!==N&&(s=N,c(s.object)),Q=function f(E,R,z,B){const j=s.attributes,Q=R.attributes;let N=0;const V=z.getAttributes();for(const L in V)if(V[L].location>=0){const he=j[L];let _e=Q[L];if(void 0===_e&&("instanceMatrix"===L&&E.instanceMatrix&&(_e=E.instanceMatrix),"instanceColor"===L&&E.instanceColor&&(_e=E.instanceColor)),void 0===he||he.attribute!==_e||_e&&he.data!==_e.data)return!0;N++}return s.attributesNum!==N||s.index!==B}(E,B,z,j),Q&&function p(E,R,z,B){const j={},Q=R.attributes;let N=0;const V=z.getAttributes();for(const L in V)if(V[L].location>=0){let he=Q[L];void 0===he&&("instanceMatrix"===L&&E.instanceMatrix&&(he=E.instanceMatrix),"instanceColor"===L&&E.instanceColor&&(he=E.instanceColor));const _e={};_e.attribute=he,he&&he.data&&(_e.data=he.data),j[L]=_e,N++}s.attributes=j,s.attributesNum=N,s.index=B}(E,B,z,j),null!==j&&e.update(j,n.ELEMENT_ARRAY_BUFFER),(Q||o)&&(o=!1,function v(E,R,z,B){_();const j=B.attributes,Q=z.getAttributes(),N=R.defaultAttributeValues;for(const V in Q){const L=Q[V];if(L.location>=0){let ne=j[V];if(void 0===ne&&("instanceMatrix"===V&&E.instanceMatrix&&(ne=E.instanceMatrix),"instanceColor"===V&&E.instanceColor&&(ne=E.instanceColor)),void 0!==ne){const he=ne.normalized,_e=ne.itemSize,Ue=e.get(ne);if(void 0===Ue)continue;const ft=Ue.buffer,H=Ue.type,ue=Ue.bytesPerElement,Ae=H===n.INT||H===n.UNSIGNED_INT||ne.gpuType===qx;if(ne.isInterleavedBufferAttribute){const de=ne.data,Re=de.stride,Xe=ne.offset;if(de.isInstancedInterleavedBuffer){for(let He=0;He<L.locationSize;He++)m(L.location+He,de.meshPerAttribute);!0!==E.isInstancedMesh&&void 0===B._maxInstanceCount&&(B._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let He=0;He<L.locationSize;He++)g(L.location+He);n.bindBuffer(n.ARRAY_BUFFER,ft);for(let He=0;He<L.locationSize;He++)y(L.location+He,_e/L.locationSize,H,he,Re*ue,(Xe+_e/L.locationSize*He)*ue,Ae)}else{if(ne.isInstancedBufferAttribute){for(let de=0;de<L.locationSize;de++)m(L.location+de,ne.meshPerAttribute);!0!==E.isInstancedMesh&&void 0===B._maxInstanceCount&&(B._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let de=0;de<L.locationSize;de++)g(L.location+de);n.bindBuffer(n.ARRAY_BUFFER,ft);for(let de=0;de<L.locationSize;de++)y(L.location+de,_e/L.locationSize,H,he,_e*ue,_e/L.locationSize*de*ue,Ae)}}else if(void 0!==N){const he=N[V];if(void 0!==he)switch(he.length){case 2:n.vertexAttrib2fv(L.location,he);break;case 3:n.vertexAttrib3fv(L.location,he);break;case 4:n.vertexAttrib4fv(L.location,he);break;default:n.vertexAttrib1fv(L.location,he)}}}}b()}(E,R,z,B),null!==j&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(j).buffer))},reset:I,resetDefaultState:S,dispose:function M(){I();for(const E in i){const R=i[E];for(const z in R){const B=R[z];for(const j in B)u(B[j].object),delete B[j];delete R[z]}delete i[E]}},releaseStatesOfGeometry:function w(E){if(void 0===i[E.id])return;const R=i[E.id];for(const z in R){const B=R[z];for(const j in B)u(B[j].object),delete B[j];delete R[z]}delete i[E.id]},releaseStatesOfProgram:function A(E){for(const R in i){const z=i[R];if(void 0===z[E.id])continue;const B=z[E.id];for(const j in B)u(B[j].object),delete B[j];delete z[E.id]}},initAttributes:_,enableAttribute:g,disableUnusedAttributes:b}}function bre(n,e,t){let i;function o(c,u,d){0!==d&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}this.setMode=function r(c){i=c},this.render=function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,u,d){if(0===d)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,i,1)},this.renderMultiDrawInstances=function l(c,u,d,h){if(0===d)return;const f=e.get("WEBGL_multi_draw");if(null===f)for(let p=0;p<c.length;p++)o(c[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,d);let p=0;for(let _=0;_<d;_++)p+=u[_]*h[_];t.update(p,i,1)}}}function xre(n,e,t,i){let r;function l(A){if("highp"===A){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return"mediump"===A&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==t.precision?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=!0===t.logarithmicDepthBuffer,h=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(A){return!(A!==Pi&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(A){const I=A===jd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==Ws&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==Ji&&!I)},precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:p>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function Ere(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Va,a=new gt,l={value:null,needsUpdate:!1};function u(d,h,f,p){const _=null!==d?d.length:0;let g=null;if(0!==_){if(g=l.value,!0!==p||null===g){const m=f+4*_,b=h.matrixWorldInverse;a.getNormalMatrix(b),(null===g||g.length<m)&&(g=new Float32Array(m));for(let y=0,v=f;y!==_;++y,v+=4)o.copy(d[y]).applyMatrix4(b,a),o.normal.toArray(g,v),g[v+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=0!==d.length||h||0!==i||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,_=d.clipIntersection,g=d.clipShadows,m=n.get(d);if(!r||null===p||0===p.length||s&&!g)s?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const b=s?0:i,y=4*b;let v=m.clippingState||null;l.value=v,v=u(p,h,y,f);for(let M=0;M!==y;++M)v[M]=t[M];m.clippingState=v,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}}}function Sre(n){let e=new WeakMap;function t(o,a){return a===Tm?o.mapping=ko:a===Am&&(o.mapping=Ra),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Tm||a===Am){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new _ee(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}const r2=[.125,.215,.35,.446,.526,.582],HS=new LS,s2=new we;let GS=null,$S=0,WS=0,jS=!1;const tl=(1+Math.sqrt(5))/2,su=1/tl,o2=[new D(-tl,su,0),new D(tl,su,0),new D(-su,0,tl),new D(su,0,tl),new D(0,tl,-su),new D(0,tl,su),new D(-1,1,-1),new D(1,1,-1),new D(-1,1,1),new D(1,1,1)],wre=new D;class a2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=wre}=s;GS=this._renderer.getRenderTarget(),$S=this._renderer.getActiveCubeFace(),WS=this._renderer.getActiveMipmapLevel(),jS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=u2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=c2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(GS,$S,WS),this._renderer.xr.enabled=jS,e.scissorTest=!1,Yg(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===ko||e.mapping===Ra?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),GS=this._renderer.getRenderTarget(),$S=this._renderer.getActiveCubeFace(),WS=this._renderer.getActiveMipmapLevel(),jS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:kn,minFilter:kn,generateMipmaps:!1,type:jd,format:Pi,colorSpace:Tc,depthBuffer:!1},r=l2(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=l2(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Mre(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+r2.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=r2[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,_=3,g=2,m=1,b=new Float32Array(_*p*f),y=new Float32Array(g*p*f),v=new Float32Array(m*p*f);for(let w=0;w<f;w++){const A=w%3*2/3-1,I=w>2?0:-1;b.set([A,I,0,A+2/3,I,0,A+2/3,I+1,0,A,I,0,A+2/3,I+1,0,A,I+1,0],_*p*w),y.set(h,g*p*w),v.set([w,w,w,w,w,w],m*p*w)}const M=new Mt;M.setAttribute("position",new In(b,_)),M.setAttribute("uv",new In(y,g)),M.setAttribute("faceIndex",new In(v,m)),e.push(M),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Cre(n,e,t){const i=new Float32Array(20),r=new D(0,1,0);return new to({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Fo,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new un(this._lodPlanes[0],e);this._renderer.compile(t,HS)}_sceneToCubeUV(e,t,i,r,s){const l=new qn(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(s2),d.toneMapping=Uo,d.autoClear=!1;const p=new ka({name:"PMREM.Background",side:Ri,depthWrite:!1,depthTest:!1}),_=new un(new hs,p);let g=!1;const m=e.background;m?m.isColor&&(p.color.copy(m),e.background=null,g=!0):(p.color.copy(s2),g=!0);for(let b=0;b<6;b++){const y=b%3;0===y?(l.up.set(0,c[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[b],s.y,s.z)):1===y?(l.up.set(0,0,c[b]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[b],s.z)):(l.up.set(0,c[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[b]));const v=this._cubeSize;Yg(r,y*v,b>2?v:0,v,v),d.setRenderTarget(r),g&&d.render(_,l),d.render(e,l)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===ko||e.mapping===Ra;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=u2()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=c2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new un(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;Yg(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,HS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,o2[(r-s-1)%o2.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new un(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,_=s/p,g=isFinite(s)?1+Math.floor(3*_):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const m=[];let b=0;for(let A=0;A<20;++A){const I=A/_,S=Math.exp(-I*I/2);m.push(S),0===A?b+=S:A<g&&(b+=2*S)}for(let A=0;A<m.length;A++)m[A]=m[A]/b;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=m,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const v=this._sizeLods[r];Yg(t,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),l.setRenderTarget(t),l.render(d,HS)}}function l2(n,e,t){const i=new Oa(n,e,t);return i.texture.mapping=Gd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Yg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function c2(){return new to({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Fo,depthTest:!1,depthWrite:!1})}function u2(){return new to({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Fo,depthTest:!1,depthWrite:!1})}function Tre(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Tm||l===Am,u=l===ko||l===Ra;if(c||u){let d=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==d?d.texture.pmremVersion:0))return null===t&&(t=new a2(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(void 0!==d)return d.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(f)?(null===t&&(t=new a2(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Are(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&Gm("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Dre(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let _=0;if(null!==f){const b=f.array;_=f.version;for(let y=0,v=b.length;y<v;y+=3){const M=b[y+0],w=b[y+1],A=b[y+2];h.push(M,w,w,A,A,M)}}else{if(void 0===p)return;_=p.version;for(let y=0,v=p.array.length/3-1;y<v;y+=3){const M=y+0,w=y+1,A=y+2;h.push(M,w,w,A,A,M)}}const g=new(fO(h)?AO:TO)(h,1);g.version=_;const m=s.get(d);m&&e.remove(m),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const f in h)e.update(h[f],n.ARRAY_BUFFER)},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function Ire(n,e,t){let i,s,o;function c(h,f,p){0!==p&&(n.drawElementsInstanced(i,f,s,h*o,p),t.update(f,i,p))}this.setMode=function r(h){i=h},this.setIndex=function a(h){s=h.type,o=h.bytesPerElement},this.render=function l(h,f){n.drawElements(i,f,s,h*o),t.update(f,i,1)},this.renderInstances=c,this.renderMultiDraw=function u(h,f,p){if(0===p)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,h,0,p);let g=0;for(let m=0;m<p;m++)g+=f[m];t.update(g,i,1)},this.renderMultiDrawInstances=function d(h,f,p,_){if(0===p)return;const g=e.get("WEBGL_multi_draw");if(null===g)for(let m=0;m<h.length;m++)c(h[m]/o,f[m],_[m]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,s,h,0,_,0,p);let m=0;for(let b=0;b<p;b++)m+=f[b]*_[b];t.update(m,i,1)}}}function Rre(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Pre(n,e,t){const i=new WeakMap,r=new Ft;return{update:function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==u?u.length:0;let h=i.get(a);if(void 0===h||h.count!==d){let S=function(){A.dispose(),i.delete(a),a.removeEventListener("dispose",S)};void 0!==h&&h.texture.dispose();const f=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,_=void 0!==a.morphAttributes.color,g=a.morphAttributes.position||[],m=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let y=0;!0===f&&(y=1),!0===p&&(y=2),!0===_&&(y=3);let v=a.attributes.position.count*y,M=1;v>e.maxTextureSize&&(M=Math.ceil(v/e.maxTextureSize),v=e.maxTextureSize);const w=new Float32Array(v*M*4*d),A=new $m(w,v,M,d);A.type=Ji,A.needsUpdate=!0;const I=4*y;for(let E=0;E<d;E++){const R=g[E],z=m[E],B=b[E],j=v*M*4*E;for(let Q=0;Q<R.count;Q++){const N=Q*I;!0===f&&(r.fromBufferAttribute(R,Q),w[j+N+0]=r.x,w[j+N+1]=r.y,w[j+N+2]=r.z,w[j+N+3]=0),!0===p&&(r.fromBufferAttribute(z,Q),w[j+N+4]=r.x,w[j+N+5]=r.y,w[j+N+6]=r.z,w[j+N+7]=0),!0===_&&(r.fromBufferAttribute(B,Q),w[j+N+8]=r.x,w[j+N+9]=r.y,w[j+N+10]=r.z,w[j+N+11]=4===B.itemSize?r.w:1)}}h={count:d,texture:A,size:new le(v,M)},i.set(a,h),a.addEventListener("dispose",S)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let f=0;for(let _=0;_<c.length;_++)f+=c[_];const p=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(n,"morphTargetBaseInfluence",p),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}}}function Nre(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return d},dispose:function o(){r=new WeakMap}}}const d2=new qs,h2=new oF(1,1),f2=new $m,p2=new RE,m2=new ag,g2=[],_2=[],y2=new Float32Array(16),v2=new Float32Array(9),b2=new Float32Array(4);function ou(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=g2[r];if(void 0===s&&(s=new Float32Array(r),g2[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function On(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Fn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Kg(n,e){let t=_2[e];void 0===t&&(t=new Int32Array(e),_2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Lre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Ore(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2fv(this.addr,e),Fn(t,e)}}function Fre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(On(t,e))return;n.uniform3fv(this.addr,e),Fn(t,e)}}function Ure(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4fv(this.addr,e),Fn(t,e)}}function kre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(On(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fn(t,e)}else{if(On(t,i))return;b2.set(i),n.uniformMatrix2fv(this.addr,!1,b2),Fn(t,i)}}function Bre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(On(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fn(t,e)}else{if(On(t,i))return;v2.set(i),n.uniformMatrix3fv(this.addr,!1,v2),Fn(t,i)}}function Vre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(On(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fn(t,e)}else{if(On(t,i))return;y2.set(i),n.uniformMatrix4fv(this.addr,!1,y2),Fn(t,i)}}function zre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Hre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2iv(this.addr,e),Fn(t,e)}}function Gre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(On(t,e))return;n.uniform3iv(this.addr,e),Fn(t,e)}}function $re(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4iv(this.addr,e),Fn(t,e)}}function Wre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function jre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2uiv(this.addr,e),Fn(t,e)}}function qre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(On(t,e))return;n.uniform3uiv(this.addr,e),Fn(t,e)}}function Xre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4uiv(this.addr,e),Fn(t,e)}}function Yre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let s;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(h2.compareFunction=uO,s=h2):s=d2,t.setTexture2D(e||s,r)}function Kre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||p2,r)}function Zre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||m2,r)}function Jre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||f2,r)}function ese(n,e){n.uniform1fv(this.addr,e)}function tse(n,e){const t=ou(e,this.size,2);n.uniform2fv(this.addr,t)}function nse(n,e){const t=ou(e,this.size,3);n.uniform3fv(this.addr,t)}function ise(n,e){const t=ou(e,this.size,4);n.uniform4fv(this.addr,t)}function rse(n,e){const t=ou(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function sse(n,e){const t=ou(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ose(n,e){const t=ou(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ase(n,e){n.uniform1iv(this.addr,e)}function lse(n,e){n.uniform2iv(this.addr,e)}function cse(n,e){n.uniform3iv(this.addr,e)}function use(n,e){n.uniform4iv(this.addr,e)}function dse(n,e){n.uniform1uiv(this.addr,e)}function hse(n,e){n.uniform2uiv(this.addr,e)}function fse(n,e){n.uniform3uiv(this.addr,e)}function pse(n,e){n.uniform4uiv(this.addr,e)}function mse(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||d2,s[o])}function gse(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||p2,s[o])}function _se(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||m2,s[o])}function yse(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||f2,s[o])}class bse{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function Qre(n){switch(n){case 5126:return Lre;case 35664:return Ore;case 35665:return Fre;case 35666:return Ure;case 35674:return kre;case 35675:return Bre;case 35676:return Vre;case 5124:case 35670:return zre;case 35667:case 35671:return Hre;case 35668:case 35672:return Gre;case 35669:case 35673:return $re;case 5125:return Wre;case 36294:return jre;case 36295:return qre;case 36296:return Xre;case 35678:case 36198:case 36298:case 36306:case 35682:return Yre;case 35679:case 36299:case 36307:return Kre;case 35680:case 36300:case 36308:case 36293:return Zre;case 36289:case 36303:case 36311:case 36292:return Jre}}(t.type)}}class xse{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function vse(n){switch(n){case 5126:return ese;case 35664:return tse;case 35665:return nse;case 35666:return ise;case 35674:return rse;case 35675:return sse;case 35676:return ose;case 5124:case 35670:return ase;case 35667:case 35671:return lse;case 35668:case 35672:return cse;case 35669:case 35673:return use;case 5125:return dse;case 36294:return hse;case 36295:return fse;case 36296:return pse;case 35678:case 36198:case 36298:case 36306:case 35682:return mse;case 35679:case 36299:case 36307:return gse;case 35680:case 36300:case 36308:case 36293:return _se;case 36289:case 36303:case 36311:case 36292:return yse}}(t.type)}}class Ese{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const XS=/(\w+)(\])?(\[|\.)?/g;function x2(n,e){n.seq.push(e),n.map[e.id]=e}function Sse(n,e,t){const i=n.name,r=i.length;for(XS.lastIndex=0;;){const s=XS.exec(i);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&XS.lastIndex+2===r){x2(t,void 0===c?new bse(a,n,e):new xse(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new Ese(a),x2(t,d)),t=d}}}class Zg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);Sse(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function E2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const wse=37297;let Mse=0;const S2=new gt;function w2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Cse(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function Ase(n,e){const t=function Tse(n){Ot._getMatrix(S2,Ot.workingColorSpace,n);const e=`mat3( ${S2.elements.map(t=>t.toFixed(4))} )`;switch(Ot.getTransfer(n)){case Vm:return[e,"LinearTransferOETF"];case qt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${n}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function Dse(n,e){let t;switch(e){case lQ:t="Linear";break;case cQ:t="Reinhard";break;case uQ:t="Cineon";break;case dQ:t="ACESFilmic";break;case fQ:t="AgX";break;case pQ:t="Neutral";break;case hQ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Jg=new D;function xh(n){return""!==n}function M2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function C2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Lse=/^[ \t]*#include +<([\w\d./]+)>/gm;function YS(n){return n.replace(Lse,Fse)}const Ose=new Map;function Fse(n,e){let t=Et[e];if(void 0===t){const i=Ose.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=Et[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return YS(t)}const Use=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function T2(n){return n.replace(Use,kse)}function kse(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function A2(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function $se(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Bse(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===qL?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===zJ?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Hs&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Vse(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ko:case Ra:e="ENVMAP_TYPE_CUBE";break;case Gd:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function zse(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Ra&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Hse(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Cm:e="ENVMAP_BLENDING_MULTIPLY";break;case oQ:e="ENVMAP_BLENDING_MIX";break;case aQ:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function Gse(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=function Rse(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(xh).join("\n")}(t),p=function Pse(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),_=r.createProgram();let g,m,b=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(xh).join("\n"),g.length>0&&(g+="\n"),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(xh).join("\n"),m.length>0&&(m+="\n")):(g=[A2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xh).join("\n"),m=[A2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Uo?"#define TONE_MAPPING":"",t.toneMapping!==Uo?Et.tonemapping_pars_fragment:"",t.toneMapping!==Uo?Dse("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Et.colorspace_pars_fragment,Ase("linearToOutputTexel",t.outputColorSpace),(Ot.getLuminanceCoefficients(Jg),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Jg.x.toFixed(4)}, ${Jg.y.toFixed(4)}, ${Jg.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(xh).join("\n")),o=YS(o),o=M2(o,t),o=C2(o,t),a=YS(a),a=M2(a,t),a=C2(a,t),o=T2(o),a=T2(a),!0!==t.isRawShaderMaterial&&(b="#version 300 es\n",g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,m=["#define varying in",t.glslVersion===dO?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===dO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+m);const v=b+m+a,M=E2(r,r.VERTEX_SHADER,b+g+o),w=E2(r,r.FRAGMENT_SHADER,v);function A(R){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(_).trim(),B=r.getShaderInfoLog(M).trim(),j=r.getShaderInfoLog(w).trim();let Q=!0,N=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(Q=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,_,M,w);else{const V=w2(r,M,"vertex"),L=w2(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+R.name+"\nMaterial Type: "+R.type+"\n\nProgram Info Log: "+z+"\n"+V+"\n"+L)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===B||""===j)&&(N=!1);N&&(R.diagnostics={runnable:Q,programLog:z,vertexShader:{log:B,prefix:g},fragmentShader:{log:j,prefix:m}})}r.deleteShader(M),r.deleteShader(w),I=new Zg(r,_),S=function Nse(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,_)}let I,S;r.attachShader(_,M),r.attachShader(_,w),void 0!==t.index0AttributeName?r.bindAttribLocation(_,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),this.getUniforms=function(){return void 0===I&&A(this),I},this.getAttributes=function(){return void 0===S&&A(this),S};let E=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===E&&(E=r.getProgramParameter(_,wse)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Mse++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=w,this}let Wse=0;class jse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new qse(e),t.set(e,i)),i}}class qse{constructor(e){this.id=Wse++,this.code=e,this.usedTimes=0}}function Xse(n,e,t,i,r,s,o){const a=new kE,l=new jse,c=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(S){return c.add(S),0===S?"uv":`uv${S}`}return{getParameters:function g(S,E,R,z,B){const j=z.fog,Q=B.geometry,V=(S.isMeshStandardMaterial?t:e).get(S.envMap||(S.isMeshStandardMaterial?z.environment:null)),L=V&&V.mapping===Gd?V.image.height:null,ne=p[S.type];null!==S.precision&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));const he=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,_e=void 0!==he?he.length:0;let ft,H,ue,Ae,Ue=0;if(void 0!==Q.morphAttributes.position&&(Ue=1),void 0!==Q.morphAttributes.normal&&(Ue=2),void 0!==Q.morphAttributes.color&&(Ue=3),ne){const Wt=ps[ne];ft=Wt.vertexShader,H=Wt.fragmentShader}else ft=S.vertexShader,H=S.fragmentShader,l.update(S),ue=l.getVertexShaderID(S),Ae=l.getFragmentShaderID(S);const de=n.getRenderTarget(),Re=n.state.buffers.depth.getReversed(),Xe=!0===B.isInstancedMesh,He=!0===B.isBatchedMesh,Ct=!!S.map,Tt=!!V,P=!!S.aoMap,rn=!!S.lightMap,ie=!!S.bumpMap,se=!!S.normalMap,te=!!S.displacementMap,ge=!!S.emissiveMap,K=!!S.metalnessMap,T=!!S.roughnessMap,x=S.anisotropy>0,U=S.clearcoat>0,ee=S.iridescence>0,X=S.sheen>0,Ne=S.transmission>0,me=x&&!!S.anisotropyMap,Ie=U&&!!S.clearcoatMap,Rt=U&&!!S.clearcoatNormalMap,pe=U&&!!S.clearcoatRoughnessMap,Le=ee&&!!S.iridescenceMap,tt=ee&&!!S.iridescenceThicknessMap,rt=X&&!!S.sheenColorMap,Pe=X&&!!S.sheenRoughnessMap,Lt=!!S.specularMap,St=!!S.specularColorMap,Jt=!!S.specularIntensityMap,O=Ne&&!!S.transmissionMap,xe=Ne&&!!S.thicknessMap,oe=!!S.alphaMap,vt=!!S.extensions;let _n=Uo;S.toneMapped&&(null===de||!0===de.isXRRenderTarget)&&(_n=n.toneMapping);const li={shaderID:ne,shaderType:S.type,shaderName:S.name,vertexShader:ft,fragmentShader:H,defines:S.defines,customVertexShaderID:ue,customFragmentShaderID:Ae,isRawShaderMaterial:!0===S.isRawShaderMaterial,glslVersion:S.glslVersion,precision:f,batching:He,batchingColor:He&&null!==B._colorsTexture,instancing:Xe,instancingColor:Xe&&null!==B.instanceColor,instancingMorph:Xe&&null!==B.morphTexture,supportsVertexTextures:h,outputColorSpace:null===de?n.outputColorSpace:!0===de.isXRRenderTarget?de.texture.colorSpace:Tc,alphaToCoverage:!!S.alphaToCoverage,map:Ct,matcap:!!S.matcap,envMap:Tt,envMapMode:Tt&&V.mapping,envMapCubeUVHeight:L,aoMap:P,lightMap:rn,bumpMap:ie,normalMap:se,displacementMap:h&&te,emissiveMap:ge,normalMapObjectSpace:se&&S.normalMapType===xQ,normalMapTangentSpace:se&&S.normalMapType===Pa,metalnessMap:K,roughnessMap:T,anisotropy:x,anisotropyMap:me,clearcoat:U,clearcoatMap:Ie,clearcoatNormalMap:Rt,clearcoatRoughnessMap:pe,dispersion:S.dispersion>0,iridescence:ee,iridescenceMap:Le,iridescenceThicknessMap:tt,sheen:X,sheenColorMap:rt,sheenRoughnessMap:Pe,specularMap:Lt,specularColorMap:St,specularIntensityMap:Jt,transmission:Ne,transmissionMap:O,thicknessMap:xe,gradientMap:!!S.gradientMap,opaque:!1===S.transparent&&S.blending===Sc&&!1===S.alphaToCoverage,alphaMap:oe,alphaTest:S.alphaTest>0,alphaHash:!!S.alphaHash,combine:S.combine,mapUv:Ct&&_(S.map.channel),aoMapUv:P&&_(S.aoMap.channel),lightMapUv:rn&&_(S.lightMap.channel),bumpMapUv:ie&&_(S.bumpMap.channel),normalMapUv:se&&_(S.normalMap.channel),displacementMapUv:te&&_(S.displacementMap.channel),emissiveMapUv:ge&&_(S.emissiveMap.channel),metalnessMapUv:K&&_(S.metalnessMap.channel),roughnessMapUv:T&&_(S.roughnessMap.channel),anisotropyMapUv:me&&_(S.anisotropyMap.channel),clearcoatMapUv:Ie&&_(S.clearcoatMap.channel),clearcoatNormalMapUv:Rt&&_(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pe&&_(S.clearcoatRoughnessMap.channel),iridescenceMapUv:Le&&_(S.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&_(S.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&_(S.sheenColorMap.channel),sheenRoughnessMapUv:Pe&&_(S.sheenRoughnessMap.channel),specularMapUv:Lt&&_(S.specularMap.channel),specularColorMapUv:St&&_(S.specularColorMap.channel),specularIntensityMapUv:Jt&&_(S.specularIntensityMap.channel),transmissionMapUv:O&&_(S.transmissionMap.channel),thicknessMapUv:xe&&_(S.thicknessMap.channel),alphaMapUv:oe&&_(S.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(se||x),vertexColors:S.vertexColors,vertexAlphas:!0===S.vertexColors&&!!Q.attributes.color&&4===Q.attributes.color.itemSize,pointsUvs:!0===B.isPoints&&!!Q.attributes.uv&&(Ct||oe),fog:!!j,useFog:!0===S.fog,fogExp2:!!j&&j.isFogExp2,flatShading:!0===S.flatShading,sizeAttenuation:!0===S.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:Re,skinning:!0===B.isSkinnedMesh,morphTargets:void 0!==Q.morphAttributes.position,morphNormals:void 0!==Q.morphAttributes.normal,morphColors:void 0!==Q.morphAttributes.color,morphTargetsCount:_e,morphTextureStride:Ue,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:_n,decodeVideoTexture:Ct&&!0===S.map.isVideoTexture&&Ot.getTransfer(S.map.colorSpace)===qt,decodeVideoTextureEmissive:ge&&!0===S.emissiveMap.isVideoTexture&&Ot.getTransfer(S.emissiveMap.colorSpace)===qt,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Gs,flipSided:S.side===Ri,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:vt&&!0===S.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&!0===S.extensions.multiDraw||He)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return li.vertexUv1s=c.has(1),li.vertexUv2s=c.has(2),li.vertexUv3s=c.has(3),c.clear(),li},getProgramCacheKey:function m(S){const E=[];if(S.shaderID?E.push(S.shaderID):(E.push(S.customVertexShaderID),E.push(S.customFragmentShaderID)),void 0!==S.defines)for(const R in S.defines)E.push(R),E.push(S.defines[R]);return!1===S.isRawShaderMaterial&&(function b(S,E){S.push(E.precision),S.push(E.outputColorSpace),S.push(E.envMapMode),S.push(E.envMapCubeUVHeight),S.push(E.mapUv),S.push(E.alphaMapUv),S.push(E.lightMapUv),S.push(E.aoMapUv),S.push(E.bumpMapUv),S.push(E.normalMapUv),S.push(E.displacementMapUv),S.push(E.emissiveMapUv),S.push(E.metalnessMapUv),S.push(E.roughnessMapUv),S.push(E.anisotropyMapUv),S.push(E.clearcoatMapUv),S.push(E.clearcoatNormalMapUv),S.push(E.clearcoatRoughnessMapUv),S.push(E.iridescenceMapUv),S.push(E.iridescenceThicknessMapUv),S.push(E.sheenColorMapUv),S.push(E.sheenRoughnessMapUv),S.push(E.specularMapUv),S.push(E.specularColorMapUv),S.push(E.specularIntensityMapUv),S.push(E.transmissionMapUv),S.push(E.thicknessMapUv),S.push(E.combine),S.push(E.fogExp2),S.push(E.sizeAttenuation),S.push(E.morphTargetsCount),S.push(E.morphAttributeCount),S.push(E.numDirLights),S.push(E.numPointLights),S.push(E.numSpotLights),S.push(E.numSpotLightMaps),S.push(E.numHemiLights),S.push(E.numRectAreaLights),S.push(E.numDirLightShadows),S.push(E.numPointLightShadows),S.push(E.numSpotLightShadows),S.push(E.numSpotLightShadowsWithMaps),S.push(E.numLightProbes),S.push(E.shadowMapType),S.push(E.toneMapping),S.push(E.numClippingPlanes),S.push(E.numClipIntersection),S.push(E.depthPacking)}(E,S),function y(S,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),E.batchingColor&&a.enable(21),S.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.reverseDepthBuffer&&a.enable(4),E.skinning&&a.enable(5),E.morphTargets&&a.enable(6),E.morphNormals&&a.enable(7),E.morphColors&&a.enable(8),E.premultipliedAlpha&&a.enable(9),E.shadowMapEnabled&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),E.decodeVideoTexture&&a.enable(19),E.decodeVideoTextureEmissive&&a.enable(20),E.alphaToCoverage&&a.enable(21),S.push(a.mask)}(E,S),E.push(n.outputColorSpace)),E.push(S.customProgramCacheKey),E.join()},getUniforms:function v(S){const E=p[S.type];let R;return R=E?fee.clone(ps[E].uniforms):S.uniforms,R},acquireProgram:function M(S,E){let R;for(let z=0,B=u.length;z<B;z++){const j=u[z];if(j.cacheKey===E){R=j,++R.usedTimes;break}}return void 0===R&&(R=new $se(n,E,S,s),u.push(R)),R},releaseProgram:function w(S){if(0==--S.usedTimes){const E=u.indexOf(S);u[E]=u[u.length-1],u.pop(),S.destroy()}},releaseShaderCache:function A(S){l.remove(S)},programs:u,dispose:function I(){l.dispose()}}}function Yse(){let n=new WeakMap;return{has:function e(o){return n.has(o)},get:function t(o){let a=n.get(o);return void 0===a&&(a={},n.set(o,a)),a},remove:function i(o){n.delete(o)},update:function r(o,a,l){n.get(o)[a]=l},dispose:function s(){n=new WeakMap}}}function Kse(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function D2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function I2(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,_,g){let m=n[e];return void 0===m?(m={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:_,group:g},n[e]=m):(m.id=d.id,m.object=d,m.geometry=h,m.material=f,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=_,m.group=g),e++,m}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,_,g){const m=o(d,h,f,p,_,g);f.transmission>0?i.push(m):!0===f.transparent?r.push(m):t.push(m)},unshift:function l(d,h,f,p,_,g){const m=o(d,h,f,p,_,g);f.transmission>0?i.unshift(m):!0===f.transparent?r.unshift(m):t.unshift(m)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||Kse),i.length>1&&i.sort(h||D2),r.length>1&&r.sort(h||D2)}}}function Zse(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new I2,n.set(i,[o])):r>=s.length?(o=new I2,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function Jse(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new D,color:new we};break;case"SpotLight":t={position:new D,direction:new D,color:new we,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new D,color:new we,distance:0,decay:0};break;case"HemisphereLight":t={direction:new D,skyColor:new we,groundColor:new we};break;case"RectAreaLight":t={color:new we,position:new D,halfWidth:new D,halfHeight:new D}}return n[e.id]=t,t}}}let eoe=0;function toe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function noe(n){const e=new Jse,t=function Qse(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new D);const r=new D,s=new ot,o=new ot;return{setup:function a(c){let u=0,d=0,h=0;for(let S=0;S<9;S++)i.probe[S].set(0,0,0);let f=0,p=0,_=0,g=0,m=0,b=0,y=0,v=0,M=0,w=0,A=0;c.sort(toe);for(let S=0,E=c.length;S<E;S++){const R=c[S],z=R.color,B=R.intensity,j=R.distance,Q=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)u+=z.r*B,d+=z.g*B,h+=z.b*B;else if(R.isLightProbe){for(let N=0;N<9;N++)i.probe[N].addScaledVector(R.sh.coefficients[N],B);A++}else if(R.isDirectionalLight){const N=e.get(R);if(N.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const V=R.shadow,L=t.get(R);L.shadowIntensity=V.intensity,L.shadowBias=V.bias,L.shadowNormalBias=V.normalBias,L.shadowRadius=V.radius,L.shadowMapSize=V.mapSize,i.directionalShadow[f]=L,i.directionalShadowMap[f]=Q,i.directionalShadowMatrix[f]=R.shadow.matrix,b++}i.directional[f]=N,f++}else if(R.isSpotLight){const N=e.get(R);N.position.setFromMatrixPosition(R.matrixWorld),N.color.copy(z).multiplyScalar(B),N.distance=j,N.coneCos=Math.cos(R.angle),N.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),N.decay=R.decay,i.spot[_]=N;const V=R.shadow;if(R.map&&(i.spotLightMap[M]=R.map,M++,V.updateMatrices(R),R.castShadow&&w++),i.spotLightMatrix[_]=V.matrix,R.castShadow){const L=t.get(R);L.shadowIntensity=V.intensity,L.shadowBias=V.bias,L.shadowNormalBias=V.normalBias,L.shadowRadius=V.radius,L.shadowMapSize=V.mapSize,i.spotShadow[_]=L,i.spotShadowMap[_]=Q,v++}_++}else if(R.isRectAreaLight){const N=e.get(R);N.color.copy(z).multiplyScalar(B),N.halfWidth.set(.5*R.width,0,0),N.halfHeight.set(0,.5*R.height,0),i.rectArea[g]=N,g++}else if(R.isPointLight){const N=e.get(R);if(N.color.copy(R.color).multiplyScalar(R.intensity),N.distance=R.distance,N.decay=R.decay,R.castShadow){const V=R.shadow,L=t.get(R);L.shadowIntensity=V.intensity,L.shadowBias=V.bias,L.shadowNormalBias=V.normalBias,L.shadowRadius=V.radius,L.shadowMapSize=V.mapSize,L.shadowCameraNear=V.camera.near,L.shadowCameraFar=V.camera.far,i.pointShadow[p]=L,i.pointShadowMap[p]=Q,i.pointShadowMatrix[p]=R.shadow.matrix,y++}i.point[p]=N,p++}else if(R.isHemisphereLight){const N=e.get(R);N.skyColor.copy(R.color).multiplyScalar(B),N.groundColor.copy(R.groundColor).multiplyScalar(B),i.hemi[m]=N,m++}}g>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=ye.LTC_FLOAT_1,i.rectAreaLTC2=ye.LTC_FLOAT_2):(i.rectAreaLTC1=ye.LTC_HALF_1,i.rectAreaLTC2=ye.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;const I=i.hash;(I.directionalLength!==f||I.pointLength!==p||I.spotLength!==_||I.rectAreaLength!==g||I.hemiLength!==m||I.numDirectionalShadows!==b||I.numPointShadows!==y||I.numSpotShadows!==v||I.numSpotMaps!==M||I.numLightProbes!==A)&&(i.directional.length=f,i.spot.length=_,i.rectArea.length=g,i.point.length=p,i.hemi.length=m,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=v+M-w,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=w,i.numLightProbes=A,I.directionalLength=f,I.pointLength=p,I.spotLength=_,I.rectAreaLength=g,I.hemiLength=m,I.numDirectionalShadows=b,I.numPointShadows=y,I.numSpotShadows=v,I.numSpotMaps=M,I.numLightProbes=A,i.version=eoe++)},setupView:function l(c,u){let d=0,h=0,f=0,p=0,_=0;const g=u.matrixWorldInverse;for(let m=0,b=c.length;m<b;m++){const y=c[m];if(y.isDirectionalLight){const v=i.directional[d];v.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(g),d++}else if(y.isSpotLight){const v=i.spot[f];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(g),v.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(g),f++}else if(y.isRectAreaLight){const v=i.rectArea[p];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(g),o.identity(),s.copy(y.matrixWorld),s.premultiply(g),o.extractRotation(s),v.halfWidth.set(.5*y.width,0,0),v.halfHeight.set(0,.5*y.height,0),v.halfWidth.applyMatrix4(o),v.halfHeight.applyMatrix4(o),p++}else if(y.isPointLight){const v=i.point[h];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(g),h++}else if(y.isHemisphereLight){const v=i.hemi[_];v.direction.setFromMatrixPosition(y.matrixWorld),v.direction.transformDirection(g),_++}}},state:i}}function R2(n){const e=new noe(n),t=[],i=[],c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(u){c.camera=u,t.length=0,i.length=0},state:c,setupLights:function a(){e.setup(t)},setupLightsView:function l(u){e.setupView(t,u)},pushLight:function s(u){t.push(u)},pushShadow:function o(u){i.push(u)}}}function ioe(n){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new R2(n),e.set(r,[a])):s>=o.length?(a=new R2(n),o.push(a)):a=o[s],a},dispose:function i(){e=new WeakMap}}}const roe="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",soe="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function ooe(n,e,t){let i=new mg;const r=new le,s=new le,o=new Ft,a=new EF({depthPacking:bQ}),l=new SF,c={},u=t.maxTextureSize,d={[Oo]:Ri,[Ri]:Oo,[Gs]:Gs},h=new to({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new le},radius:{value:4}},vertexShader:roe,fragmentShader:soe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Mt;p.setAttribute("position",new In(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new un(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qL;let m=this.type;function b(w,A){const I=e.update(_);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===w.mapPass&&(w.mapPass=new Oa(r.x,r.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(A,null,I,h,_,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(A,null,I,f,_,null)}function y(w,A,I,S){let E=null;const R=!0===I.isPointLight?w.customDistanceMaterial:w.customDepthMaterial;if(void 0!==R)E=R;else if(E=!0===I.isPointLight?l:a,n.localClippingEnabled&&!0===A.clipShadows&&Array.isArray(A.clippingPlanes)&&0!==A.clippingPlanes.length||A.displacementMap&&0!==A.displacementScale||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const z=E.uuid,B=A.uuid;let j=c[z];void 0===j&&(j={},c[z]=j);let Q=j[B];void 0===Q&&(Q=E.clone(),j[B]=Q,A.addEventListener("dispose",M)),E=Q}return E.visible=A.visible,E.wireframe=A.wireframe,E.side=S===Hs?null!==A.shadowSide?A.shadowSide:A.side:null!==A.shadowSide?A.shadowSide:d[A.side],E.alphaMap=A.alphaMap,E.alphaTest=A.alphaTest,E.map=A.map,E.clipShadows=A.clipShadows,E.clippingPlanes=A.clippingPlanes,E.clipIntersection=A.clipIntersection,E.displacementMap=A.displacementMap,E.displacementScale=A.displacementScale,E.displacementBias=A.displacementBias,E.wireframeLinewidth=A.wireframeLinewidth,E.linewidth=A.linewidth,!0===I.isPointLight&&!0===E.isMeshDistanceMaterial&&(n.properties.get(E).light=I),E}function v(w,A,I,S,E){if(!1===w.visible)return;if(w.layers.test(A.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&E===Hs)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,w.matrixWorld);const B=e.update(w),j=w.material;if(Array.isArray(j)){const Q=B.groups;for(let N=0,V=Q.length;N<V;N++){const L=Q[N],ne=j[L.materialIndex];if(ne&&ne.visible){const he=y(w,ne,S,E);w.onBeforeShadow(n,w,A,I,B,he,L),n.renderBufferDirect(I,null,B,he,w,L),w.onAfterShadow(n,w,A,I,B,he,L)}}}else if(j.visible){const Q=y(w,j,S,E);w.onBeforeShadow(n,w,A,I,B,Q,null),n.renderBufferDirect(I,null,B,Q,w,null),w.onAfterShadow(n,w,A,I,B,Q,null)}}const z=w.children;for(let B=0,j=z.length;B<j;B++)v(z[B],A,I,S,E)}function M(w){w.target.removeEventListener("dispose",M);for(const I in c){const S=c[I],E=w.target.uuid;E in S&&(S[E].dispose(),delete S[E])}}this.render=function(w,A,I){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===w.length)return;const S=n.getRenderTarget(),E=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Fo),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const B=m!==Hs&&this.type===Hs,j=m===Hs&&this.type!==Hs;for(let Q=0,N=w.length;Q<N;Q++){const V=w[Q],L=V.shadow;if(void 0===L){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(!1===L.autoUpdate&&!1===L.needsUpdate)continue;r.copy(L.mapSize);const ne=L.getFrameExtents();if(r.multiply(ne),s.copy(L.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ne.x),r.x=s.x*ne.x,L.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ne.y),r.y=s.y*ne.y,L.mapSize.y=s.y)),null===L.map||!0===B||!0===j){const _e=this.type!==Hs?{minFilter:ri,magFilter:ri}:{};null!==L.map&&L.map.dispose(),L.map=new Oa(r.x,r.y,_e),L.map.texture.name=V.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const he=L.getViewportCount();for(let _e=0;_e<he;_e++){const Ue=L.getViewport(_e);o.set(s.x*Ue.x,s.y*Ue.y,s.x*Ue.z,s.y*Ue.w),z.viewport(o),L.updateMatrices(V,_e),i=L.getFrustum(),v(A,I,L.camera,V,this.type)}!0!==L.isPointLightShadow&&this.type===Hs&&b(L,I),L.needsUpdate=!1}m=this.type,g.needsUpdate=!1,n.setRenderTarget(S,E,R)}}const aoe={[Bx]:Vx,[zx]:$x,[Hx]:Wx,[wc]:Gx,[Vx]:Bx,[$x]:zx,[Wx]:Hx,[Gx]:wc};function loe(n,e){const s=new function t(){let O=!1;const xe=new Ft;let Y=null;const oe=new Ft(0,0,0,0);return{setMask:function(Me){Y!==Me&&!O&&(n.colorMask(Me,Me,Me,Me),Y=Me)},setLocked:function(Me){O=Me},setClear:function(Me,Ee,vt,_n,li){!0===li&&(Me*=_n,Ee*=_n,vt*=_n),xe.set(Me,Ee,vt,_n),!1===oe.equals(xe)&&(n.clearColor(Me,Ee,vt,_n),oe.copy(xe))},reset:function(){O=!1,Y=null,oe.set(-1,0,0,0)}}},o=new function i(){let O=!1,xe=!1,Y=null,oe=null,Me=null;return{setReversed:function(Ee){if(xe!==Ee){const vt=e.get("EXT_clip_control");vt.clipControlEXT(vt.LOWER_LEFT_EXT,Ee?vt.ZERO_TO_ONE_EXT:vt.NEGATIVE_ONE_TO_ONE_EXT),xe=Ee;const _n=Me;Me=null,this.setClear(_n)}},getReversed:function(){return xe},setTest:function(Ee){Ee?de(n.DEPTH_TEST):Re(n.DEPTH_TEST)},setMask:function(Ee){Y!==Ee&&!O&&(n.depthMask(Ee),Y=Ee)},setFunc:function(Ee){if(xe&&(Ee=aoe[Ee]),oe!==Ee){switch(Ee){case Bx:n.depthFunc(n.NEVER);break;case Vx:n.depthFunc(n.ALWAYS);break;case zx:n.depthFunc(n.LESS);break;case wc:n.depthFunc(n.LEQUAL);break;case Hx:n.depthFunc(n.EQUAL);break;case Gx:n.depthFunc(n.GEQUAL);break;case $x:n.depthFunc(n.GREATER);break;case Wx:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}oe=Ee}},setLocked:function(Ee){O=Ee},setClear:function(Ee){Me!==Ee&&(xe&&(Ee=1-Ee),n.clearDepth(Ee),Me=Ee)},reset:function(){O=!1,Y=null,oe=null,Me=null,xe=!1}}},a=new function r(){let O=!1,xe=null,Y=null,oe=null,Me=null,Ee=null,vt=null,_n=null,li=null;return{setTest:function(Wt){O||(Wt?de(n.STENCIL_TEST):Re(n.STENCIL_TEST))},setMask:function(Wt){xe!==Wt&&!O&&(n.stencilMask(Wt),xe=Wt)},setFunc:function(Wt,Wr,so){(Y!==Wt||oe!==Wr||Me!==so)&&(n.stencilFunc(Wt,Wr,so),Y=Wt,oe=Wr,Me=so)},setOp:function(Wt,Wr,so){(Ee!==Wt||vt!==Wr||_n!==so)&&(n.stencilOp(Wt,Wr,so),Ee=Wt,vt=Wr,_n=so)},setLocked:function(Wt){O=Wt},setClear:function(Wt){li!==Wt&&(n.clearStencil(Wt),li=Wt)},reset:function(){O=!1,xe=null,Y=null,oe=null,Me=null,Ee=null,vt=null,_n=null,li=null}}},l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,f=[],p=null,_=!1,g=null,m=null,b=null,y=null,v=null,M=null,w=null,A=new we(0,0,0),I=0,S=!1,E=null,R=null,z=null,B=null,j=null;const Q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,V=0;const L=n.getParameter(n.VERSION);-1!==L.indexOf("WebGL")?(V=parseFloat(/^WebGL (\d)/.exec(L)[1]),N=V>=1):-1!==L.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),N=V>=2);let ne=null,he={};const _e=n.getParameter(n.SCISSOR_BOX),Ue=n.getParameter(n.VIEWPORT),ft=(new Ft).fromArray(_e),H=(new Ft).fromArray(Ue);function ue(O,xe,Y,oe){const Me=new Uint8Array(4),Ee=n.createTexture();n.bindTexture(O,Ee),n.texParameteri(O,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(O,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let vt=0;vt<Y;vt++)O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY?n.texImage3D(xe,0,n.RGBA,1,1,oe,0,n.RGBA,n.UNSIGNED_BYTE,Me):n.texImage2D(xe+vt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Me);return Ee}const Ae={};function de(O){!0!==u[O]&&(n.enable(O),u[O]=!0)}function Re(O){!1!==u[O]&&(n.disable(O),u[O]=!1)}Ae[n.TEXTURE_2D]=ue(n.TEXTURE_2D,n.TEXTURE_2D,1),Ae[n.TEXTURE_CUBE_MAP]=ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ae[n.TEXTURE_2D_ARRAY]=ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ae[n.TEXTURE_3D]=ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),de(n.DEPTH_TEST),o.setFunc(wc),ie(!1),se(jL),de(n.CULL_FACE),P(Fo);const Ht={[Ia]:n.FUNC_ADD,[GJ]:n.FUNC_SUBTRACT,[$J]:n.FUNC_REVERSE_SUBTRACT};Ht[WJ]=n.MIN,Ht[jJ]=n.MAX;const Tt={[qJ]:n.ZERO,[XJ]:n.ONE,[YJ]:n.SRC_COLOR,[Ux]:n.SRC_ALPHA,[tQ]:n.SRC_ALPHA_SATURATE,[QJ]:n.DST_COLOR,[ZJ]:n.DST_ALPHA,[KJ]:n.ONE_MINUS_SRC_COLOR,[kx]:n.ONE_MINUS_SRC_ALPHA,[eQ]:n.ONE_MINUS_DST_COLOR,[JJ]:n.ONE_MINUS_DST_ALPHA,[nQ]:n.CONSTANT_COLOR,[iQ]:n.ONE_MINUS_CONSTANT_COLOR,[rQ]:n.CONSTANT_ALPHA,[sQ]:n.ONE_MINUS_CONSTANT_ALPHA};function P(O,xe,Y,oe,Me,Ee,vt,_n,li,Wt){if(O!==Fo){if(!1===_&&(de(n.BLEND),_=!0),O===HJ)Me=Me||xe,Ee=Ee||Y,vt=vt||oe,(xe!==m||Me!==v)&&(n.blendEquationSeparate(Ht[xe],Ht[Me]),m=xe,v=Me),(Y!==b||oe!==y||Ee!==M||vt!==w)&&(n.blendFuncSeparate(Tt[Y],Tt[oe],Tt[Ee],Tt[vt]),b=Y,y=oe,M=Ee,w=vt),(!1===_n.equals(A)||li!==I)&&(n.blendColor(_n.r,_n.g,_n.b,li),A.copy(_n),I=li),g=O,S=!1;else if(O!==g||Wt!==S){if((m!==Ia||v!==Ia)&&(n.blendEquation(n.FUNC_ADD),m=Ia,v=Ia),Wt)switch(O){case Sc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case XL:n.blendFunc(n.ONE,n.ONE);break;case YL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case KL:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",O)}else switch(O){case Sc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case XL:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case YL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case KL:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",O)}b=null,y=null,M=null,w=null,A.set(0,0,0),I=0,g=O,S=Wt}}else!0===_&&(Re(n.BLEND),_=!1)}function ie(O){E!==O&&(n.frontFace(O?n.CW:n.CCW),E=O)}function se(O){O!==BJ?(de(n.CULL_FACE),O!==R&&n.cullFace(O===jL?n.BACK:O===VJ?n.FRONT:n.FRONT_AND_BACK)):Re(n.CULL_FACE),R=O}function ge(O,xe,Y){O?(de(n.POLYGON_OFFSET_FILL),(B!==xe||j!==Y)&&(n.polygonOffset(xe,Y),B=xe,j=Y)):Re(n.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:o,stencil:a},enable:de,disable:Re,bindFramebuffer:function Xe(O,xe){return d[O]!==xe&&(n.bindFramebuffer(O,xe),d[O]=xe,O===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=xe),O===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=xe),!0)},drawBuffers:function He(O,xe){let Y=f,oe=!1;if(O){Y=h.get(xe),void 0===Y&&(Y=[],h.set(xe,Y));const Me=O.textures;if(Y.length!==Me.length||Y[0]!==n.COLOR_ATTACHMENT0){for(let Ee=0,vt=Me.length;Ee<vt;Ee++)Y[Ee]=n.COLOR_ATTACHMENT0+Ee;Y.length=Me.length,oe=!0}}else Y[0]!==n.BACK&&(Y[0]=n.BACK,oe=!0);oe&&n.drawBuffers(Y)},useProgram:function Ct(O){return p!==O&&(n.useProgram(O),p=O,!0)},setBlending:P,setMaterial:function rn(O,xe){O.side===Gs?Re(n.CULL_FACE):de(n.CULL_FACE);let Y=O.side===Ri;xe&&(Y=!Y),ie(Y),O.blending===Sc&&!1===O.transparent?P(Fo):P(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),o.setFunc(O.depthFunc),o.setTest(O.depthTest),o.setMask(O.depthWrite),s.setMask(O.colorWrite);const oe=O.stencilWrite;a.setTest(oe),oe&&(a.setMask(O.stencilWriteMask),a.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),a.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),ge(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),!0===O.alphaToCoverage?de(n.SAMPLE_ALPHA_TO_COVERAGE):Re(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ie,setCullFace:se,setLineWidth:function te(O){O!==z&&(N&&n.lineWidth(O),z=O)},setPolygonOffset:ge,setScissorTest:function K(O){O?de(n.SCISSOR_TEST):Re(n.SCISSOR_TEST)},activeTexture:function T(O){void 0===O&&(O=n.TEXTURE0+Q-1),ne!==O&&(n.activeTexture(O),ne=O)},bindTexture:function x(O,xe,Y){void 0===Y&&(Y=null===ne?n.TEXTURE0+Q-1:ne);let oe=he[Y];void 0===oe&&(oe={type:void 0,texture:void 0},he[Y]=oe),(oe.type!==O||oe.texture!==xe)&&(ne!==Y&&(n.activeTexture(Y),ne=Y),n.bindTexture(O,xe||Ae[O]),oe.type=O,oe.texture=xe)},unbindTexture:function U(){const O=he[ne];void 0!==O&&void 0!==O.type&&(n.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)},compressedTexImage2D:function q(){try{n.compressedTexImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},compressedTexImage3D:function ee(){try{n.compressedTexImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texImage2D:function Le(){try{n.texImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texImage3D:function tt(){try{n.texImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},updateUBOMapping:function Lt(O,xe){let Y=c.get(xe);void 0===Y&&(Y=new WeakMap,c.set(xe,Y));let oe=Y.get(O);void 0===oe&&(oe=n.getUniformBlockIndex(xe,O.name),Y.set(O,oe))},uniformBlockBinding:function St(O,xe){const oe=c.get(xe).get(O);l.get(xe)!==oe&&(n.uniformBlockBinding(xe,oe,O.__bindingPointIndex),l.set(xe,oe))},texStorage2D:function Rt(){try{n.texStorage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texStorage3D:function pe(){try{n.texStorage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texSubImage2D:function X(){try{n.texSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texSubImage3D:function Ne(){try{n.texSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},compressedTexSubImage2D:function me(){try{n.compressedTexSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},compressedTexSubImage3D:function Ie(){try{n.compressedTexSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},scissor:function rt(O){!1===ft.equals(O)&&(n.scissor(O.x,O.y,O.z,O.w),ft.copy(O))},viewport:function Pe(O){!1===H.equals(O)&&(n.viewport(O.x,O.y,O.z,O.w),H.copy(O))},reset:function Jt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ne=null,he={},d={},h=new WeakMap,f=[],p=null,_=!1,g=null,m=null,b=null,y=null,v=null,M=null,w=null,A=new we(0,0,0),I=0,S=!1,E=null,R=null,z=null,B=null,j=null,ft.set(0,0,n.canvas.width,n.canvas.height),H.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}}}function coe(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new le,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function p(T,x){return f?new OffscreenCanvas(T,x):Zd("canvas")}function _(T,x,U){let q=1;const ee=K(T);if((ee.width>U||ee.height>U)&&(q=U/Math.max(ee.width,ee.height)),q<1){if(typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&T instanceof ImageBitmap||typeof VideoFrame<"u"&&T instanceof VideoFrame){const X=Math.floor(q*ee.width),Ne=Math.floor(q*ee.height);void 0===d&&(d=p(X,Ne));const me=x?p(X,Ne):d;return me.width=X,me.height=Ne,me.getContext("2d").drawImage(T,0,0,X,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+X+"x"+Ne+")."),me}return"data"in T&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),T}return T}function g(T){return T.generateMipmaps}function m(T){n.generateMipmap(T)}function b(T){return T.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:T.isWebGL3DRenderTarget?n.TEXTURE_3D:T.isWebGLArrayRenderTarget||T.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function y(T,x,U,q,ee=!1){if(null!==T){if(void 0!==n[T])return n[T];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+T+"'")}let X=x;if(x===n.RED&&(U===n.FLOAT&&(X=n.R32F),U===n.HALF_FLOAT&&(X=n.R16F),U===n.UNSIGNED_BYTE&&(X=n.R8)),x===n.RED_INTEGER&&(U===n.UNSIGNED_BYTE&&(X=n.R8UI),U===n.UNSIGNED_SHORT&&(X=n.R16UI),U===n.UNSIGNED_INT&&(X=n.R32UI),U===n.BYTE&&(X=n.R8I),U===n.SHORT&&(X=n.R16I),U===n.INT&&(X=n.R32I)),x===n.RG&&(U===n.FLOAT&&(X=n.RG32F),U===n.HALF_FLOAT&&(X=n.RG16F),U===n.UNSIGNED_BYTE&&(X=n.RG8)),x===n.RG_INTEGER&&(U===n.UNSIGNED_BYTE&&(X=n.RG8UI),U===n.UNSIGNED_SHORT&&(X=n.RG16UI),U===n.UNSIGNED_INT&&(X=n.RG32UI),U===n.BYTE&&(X=n.RG8I),U===n.SHORT&&(X=n.RG16I),U===n.INT&&(X=n.RG32I)),x===n.RGB_INTEGER&&(U===n.UNSIGNED_BYTE&&(X=n.RGB8UI),U===n.UNSIGNED_SHORT&&(X=n.RGB16UI),U===n.UNSIGNED_INT&&(X=n.RGB32UI),U===n.BYTE&&(X=n.RGB8I),U===n.SHORT&&(X=n.RGB16I),U===n.INT&&(X=n.RGB32I)),x===n.RGBA_INTEGER&&(U===n.UNSIGNED_BYTE&&(X=n.RGBA8UI),U===n.UNSIGNED_SHORT&&(X=n.RGBA16UI),U===n.UNSIGNED_INT&&(X=n.RGBA32UI),U===n.BYTE&&(X=n.RGBA8I),U===n.SHORT&&(X=n.RGBA16I),U===n.INT&&(X=n.RGBA32I)),x===n.RGB&&U===n.UNSIGNED_INT_5_9_9_9_REV&&(X=n.RGB9_E5),x===n.RGBA){const Ne=ee?Vm:Ot.getTransfer(q);U===n.FLOAT&&(X=n.RGBA32F),U===n.HALF_FLOAT&&(X=n.RGBA16F),U===n.UNSIGNED_BYTE&&(X=Ne===qt?n.SRGB8_ALPHA8:n.RGBA8),U===n.UNSIGNED_SHORT_4_4_4_4&&(X=n.RGBA4),U===n.UNSIGNED_SHORT_5_5_5_1&&(X=n.RGB5_A1)}return(X===n.R16F||X===n.R32F||X===n.RG16F||X===n.RG32F||X===n.RGBA16F||X===n.RGBA32F)&&e.get("EXT_color_buffer_float"),X}function v(T,x){let U;return T?null===x||x===Bo||x===qd?U=n.DEPTH24_STENCIL8:x===Ji?U=n.DEPTH32F_STENCIL8:x===Wd&&(U=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===x||x===Bo||x===qd?U=n.DEPTH_COMPONENT24:x===Ji?U=n.DEPTH_COMPONENT32F:x===Wd&&(U=n.DEPTH_COMPONENT16),U}function M(T,x){return!0===g(T)||T.isFramebufferTexture&&T.minFilter!==ri&&T.minFilter!==kn?Math.log2(Math.max(x.width,x.height))+1:void 0!==T.mipmaps&&T.mipmaps.length>0?T.mipmaps.length:T.isCompressedTexture&&Array.isArray(T.image)?x.mipmaps.length:1}function w(T){const x=T.target;x.removeEventListener("dispose",w),function I(T){const x=i.get(T);if(void 0===x.__webglInit)return;const U=T.source,q=h.get(U);if(q){const ee=q[x.__cacheKey];ee.usedTimes--,0===ee.usedTimes&&S(T),0===Object.keys(q).length&&h.delete(U)}i.remove(T)}(x),x.isVideoTexture&&u.delete(x)}function A(T){const x=T.target;x.removeEventListener("dispose",A),function E(T){const x=i.get(T);if(T.depthTexture&&(T.depthTexture.dispose(),i.remove(T.depthTexture)),T.isWebGLCubeRenderTarget)for(let q=0;q<6;q++){if(Array.isArray(x.__webglFramebuffer[q]))for(let ee=0;ee<x.__webglFramebuffer[q].length;ee++)n.deleteFramebuffer(x.__webglFramebuffer[q][ee]);else n.deleteFramebuffer(x.__webglFramebuffer[q]);x.__webglDepthbuffer&&n.deleteRenderbuffer(x.__webglDepthbuffer[q])}else{if(Array.isArray(x.__webglFramebuffer))for(let q=0;q<x.__webglFramebuffer.length;q++)n.deleteFramebuffer(x.__webglFramebuffer[q]);else n.deleteFramebuffer(x.__webglFramebuffer);if(x.__webglDepthbuffer&&n.deleteRenderbuffer(x.__webglDepthbuffer),x.__webglMultisampledFramebuffer&&n.deleteFramebuffer(x.__webglMultisampledFramebuffer),x.__webglColorRenderbuffer)for(let q=0;q<x.__webglColorRenderbuffer.length;q++)x.__webglColorRenderbuffer[q]&&n.deleteRenderbuffer(x.__webglColorRenderbuffer[q]);x.__webglDepthRenderbuffer&&n.deleteRenderbuffer(x.__webglDepthRenderbuffer)}const U=T.textures;for(let q=0,ee=U.length;q<ee;q++){const X=i.get(U[q]);X.__webglTexture&&(n.deleteTexture(X.__webglTexture),o.memory.textures--),i.remove(U[q])}i.remove(T)}(x)}function S(T){const x=i.get(T);n.deleteTexture(x.__webglTexture),delete h.get(T.source)[x.__cacheKey],o.memory.textures--}let R=0;function Q(T,x){const U=i.get(T);if(T.isVideoTexture&&function te(T){const x=o.render.frame;u.get(T)!==x&&(u.set(T,x),T.update())}(T),!1===T.isRenderTargetTexture&&T.version>0&&U.__version!==T.version){const q=T.image;if(null===q)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==q.complete)return void H(U,T,x);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,U.__webglTexture,n.TEXTURE0+x)}const ne={[Dm]:n.REPEAT,[Vr]:n.CLAMP_TO_EDGE,[Im]:n.MIRRORED_REPEAT},he={[ri]:n.NEAREST,[JL]:n.NEAREST_MIPMAP_NEAREST,[$d]:n.NEAREST_MIPMAP_LINEAR,[kn]:n.LINEAR,[Rm]:n.LINEAR_MIPMAP_NEAREST,[$s]:n.LINEAR_MIPMAP_LINEAR},_e={[EQ]:n.NEVER,[AQ]:n.ALWAYS,[SQ]:n.LESS,[uO]:n.LEQUAL,[wQ]:n.EQUAL,[TQ]:n.GEQUAL,[MQ]:n.GREATER,[CQ]:n.NOTEQUAL};function Ue(T,x){if(x.type===Ji&&!1===e.has("OES_texture_float_linear")&&(x.magFilter===kn||x.magFilter===Rm||x.magFilter===$d||x.magFilter===$s||x.minFilter===kn||x.minFilter===Rm||x.minFilter===$d||x.minFilter===$s)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(T,n.TEXTURE_WRAP_S,ne[x.wrapS]),n.texParameteri(T,n.TEXTURE_WRAP_T,ne[x.wrapT]),(T===n.TEXTURE_3D||T===n.TEXTURE_2D_ARRAY)&&n.texParameteri(T,n.TEXTURE_WRAP_R,ne[x.wrapR]),n.texParameteri(T,n.TEXTURE_MAG_FILTER,he[x.magFilter]),n.texParameteri(T,n.TEXTURE_MIN_FILTER,he[x.minFilter]),x.compareFunction&&(n.texParameteri(T,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(T,n.TEXTURE_COMPARE_FUNC,_e[x.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(x.magFilter===ri||x.minFilter!==$d&&x.minFilter!==$s||x.type===Ji&&!1===e.has("OES_texture_float_linear"))return;if(x.anisotropy>1||i.get(x).__currentAnisotropy){const U=e.get("EXT_texture_filter_anisotropic");n.texParameterf(T,U.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(x.anisotropy,r.getMaxAnisotropy())),i.get(x).__currentAnisotropy=x.anisotropy}}}function ft(T,x){let U=!1;void 0===T.__webglInit&&(T.__webglInit=!0,x.addEventListener("dispose",w));const q=x.source;let ee=h.get(q);void 0===ee&&(ee={},h.set(q,ee));const X=function j(T){const x=[];return x.push(T.wrapS),x.push(T.wrapT),x.push(T.wrapR||0),x.push(T.magFilter),x.push(T.minFilter),x.push(T.anisotropy),x.push(T.internalFormat),x.push(T.format),x.push(T.type),x.push(T.generateMipmaps),x.push(T.premultiplyAlpha),x.push(T.flipY),x.push(T.unpackAlignment),x.push(T.colorSpace),x.join()}(x);if(X!==T.__cacheKey){void 0===ee[X]&&(ee[X]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,U=!0),ee[X].usedTimes++;const Ne=ee[T.__cacheKey];void 0!==Ne&&(ee[T.__cacheKey].usedTimes--,0===Ne.usedTimes&&S(x)),T.__cacheKey=X,T.__webglTexture=ee[X].texture}return U}function H(T,x,U){let q=n.TEXTURE_2D;(x.isDataArrayTexture||x.isCompressedArrayTexture)&&(q=n.TEXTURE_2D_ARRAY),x.isData3DTexture&&(q=n.TEXTURE_3D);const ee=ft(T,x),X=x.source;t.bindTexture(q,T.__webglTexture,n.TEXTURE0+U);const Ne=i.get(X);if(X.version!==Ne.__version||!0===ee){t.activeTexture(n.TEXTURE0+U);const me=Ot.getPrimaries(Ot.workingColorSpace),Ie=x.colorSpace===Vo?null:Ot.getPrimaries(x.colorSpace),Rt=x.colorSpace===Vo||me===Ie?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,x.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,x.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);let pe=_(x.image,!1,r.maxTextureSize);pe=ge(x,pe);const Le=s.convert(x.format,x.colorSpace),tt=s.convert(x.type);let Pe,rt=y(x.internalFormat,Le,tt,x.colorSpace,x.isVideoTexture);Ue(q,x);const Lt=x.mipmaps,St=!0!==x.isVideoTexture,Jt=void 0===Ne.__version||!0===ee,O=X.dataReady,xe=M(x,pe);if(x.isDepthTexture)rt=v(x.format===Yd,x.type),Jt&&(St?t.texStorage2D(n.TEXTURE_2D,1,rt,pe.width,pe.height):t.texImage2D(n.TEXTURE_2D,0,rt,pe.width,pe.height,0,Le,tt,null));else if(x.isDataTexture)if(Lt.length>0){St&&Jt&&t.texStorage2D(n.TEXTURE_2D,xe,rt,Lt[0].width,Lt[0].height);for(let Y=0,oe=Lt.length;Y<oe;Y++)Pe=Lt[Y],St?O&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Pe.width,Pe.height,Le,tt,Pe.data):t.texImage2D(n.TEXTURE_2D,Y,rt,Pe.width,Pe.height,0,Le,tt,Pe.data);x.generateMipmaps=!1}else St?(Jt&&t.texStorage2D(n.TEXTURE_2D,xe,rt,pe.width,pe.height),O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,pe.width,pe.height,Le,tt,pe.data)):t.texImage2D(n.TEXTURE_2D,0,rt,pe.width,pe.height,0,Le,tt,pe.data);else if(x.isCompressedTexture)if(x.isCompressedArrayTexture){St&&Jt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,xe,rt,Lt[0].width,Lt[0].height,pe.depth);for(let Y=0,oe=Lt.length;Y<oe;Y++)if(Pe=Lt[Y],x.format!==Pi)if(null!==Le)if(St){if(O)if(x.layerUpdates.size>0){const Me=zS(Pe.width,Pe.height,x.format,x.type);for(const Ee of x.layerUpdates){const vt=Pe.data.subarray(Ee*Me/Pe.data.BYTES_PER_ELEMENT,(Ee+1)*Me/Pe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,Ee,Pe.width,Pe.height,1,Le,vt)}x.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,Pe.width,Pe.height,pe.depth,Le,Pe.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Y,rt,Pe.width,Pe.height,pe.depth,0,Pe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else St?O&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,Pe.width,Pe.height,pe.depth,Le,tt,Pe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Y,rt,Pe.width,Pe.height,pe.depth,0,Le,tt,Pe.data)}else{St&&Jt&&t.texStorage2D(n.TEXTURE_2D,xe,rt,Lt[0].width,Lt[0].height);for(let Y=0,oe=Lt.length;Y<oe;Y++)Pe=Lt[Y],x.format!==Pi?null!==Le?St?O&&t.compressedTexSubImage2D(n.TEXTURE_2D,Y,0,0,Pe.width,Pe.height,Le,Pe.data):t.compressedTexImage2D(n.TEXTURE_2D,Y,rt,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?O&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Pe.width,Pe.height,Le,tt,Pe.data):t.texImage2D(n.TEXTURE_2D,Y,rt,Pe.width,Pe.height,0,Le,tt,Pe.data)}else if(x.isDataArrayTexture)if(St){if(Jt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,xe,rt,pe.width,pe.height,pe.depth),O)if(x.layerUpdates.size>0){const Y=zS(pe.width,pe.height,x.format,x.type);for(const oe of x.layerUpdates){const Me=pe.data.subarray(oe*Y/pe.data.BYTES_PER_ELEMENT,(oe+1)*Y/pe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,oe,pe.width,pe.height,1,Le,tt,Me)}x.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,pe.width,pe.height,pe.depth,Le,tt,pe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,rt,pe.width,pe.height,pe.depth,0,Le,tt,pe.data);else if(x.isData3DTexture)St?(Jt&&t.texStorage3D(n.TEXTURE_3D,xe,rt,pe.width,pe.height,pe.depth),O&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,pe.width,pe.height,pe.depth,Le,tt,pe.data)):t.texImage3D(n.TEXTURE_3D,0,rt,pe.width,pe.height,pe.depth,0,Le,tt,pe.data);else if(x.isFramebufferTexture){if(Jt)if(St)t.texStorage2D(n.TEXTURE_2D,xe,rt,pe.width,pe.height);else{let Y=pe.width,oe=pe.height;for(let Me=0;Me<xe;Me++)t.texImage2D(n.TEXTURE_2D,Me,rt,Y,oe,0,Le,tt,null),Y>>=1,oe>>=1}}else if(Lt.length>0){if(St&&Jt){const Y=K(Lt[0]);t.texStorage2D(n.TEXTURE_2D,xe,rt,Y.width,Y.height)}for(let Y=0,oe=Lt.length;Y<oe;Y++)Pe=Lt[Y],St?O&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Le,tt,Pe):t.texImage2D(n.TEXTURE_2D,Y,rt,Le,tt,Pe);x.generateMipmaps=!1}else if(St){if(Jt){const Y=K(pe);t.texStorage2D(n.TEXTURE_2D,xe,rt,Y.width,Y.height)}O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le,tt,pe)}else t.texImage2D(n.TEXTURE_2D,0,rt,Le,tt,pe);g(x)&&m(q),Ne.__version=X.version,x.onUpdate&&x.onUpdate(x)}T.__version=x.version}function Ae(T,x,U,q,ee,X){const Ne=s.convert(U.format,U.colorSpace),me=s.convert(U.type),Ie=y(U.internalFormat,Ne,me,U.colorSpace),Rt=i.get(x),pe=i.get(U);if(pe.__renderTarget=x,!Rt.__hasExternalTextures){const Le=Math.max(1,x.width>>X),tt=Math.max(1,x.height>>X);ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?t.texImage3D(ee,X,Ie,Le,tt,x.depth,0,Ne,me,null):t.texImage2D(ee,X,Ie,Le,tt,0,Ne,me,null)}t.bindFramebuffer(n.FRAMEBUFFER,T),se(x)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,q,ee,pe.__webglTexture,0,ie(x)):(ee===n.TEXTURE_2D||ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,q,ee,pe.__webglTexture,X),t.bindFramebuffer(n.FRAMEBUFFER,null)}function de(T,x,U){if(n.bindRenderbuffer(n.RENDERBUFFER,T),x.depthBuffer){const q=x.depthTexture,X=v(x.stencilBuffer,q&&q.isDepthTexture?q.type:null),Ne=x.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=ie(x);se(x)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,X,x.width,x.height):U?n.renderbufferStorageMultisample(n.RENDERBUFFER,me,X,x.width,x.height):n.renderbufferStorage(n.RENDERBUFFER,X,x.width,x.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ne,n.RENDERBUFFER,T)}else{const q=x.textures;for(let ee=0;ee<q.length;ee++){const X=q[ee],Ne=s.convert(X.format,X.colorSpace),me=s.convert(X.type),Ie=y(X.internalFormat,Ne,me,X.colorSpace),Rt=ie(x);U&&!1===se(x)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Rt,Ie,x.width,x.height):se(x)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Rt,Ie,x.width,x.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,x.width,x.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Xe(T){const x=i.get(T),U=!0===T.isWebGLCubeRenderTarget;if(x.__boundDepthTexture!==T.depthTexture){const q=T.depthTexture;if(x.__depthDisposeCallback&&x.__depthDisposeCallback(),q){const ee=()=>{delete x.__boundDepthTexture,delete x.__depthDisposeCallback,q.removeEventListener("dispose",ee)};q.addEventListener("dispose",ee),x.__depthDisposeCallback=ee}x.__boundDepthTexture=q}if(T.depthTexture&&!x.__autoAllocateDepthBuffer){if(U)throw new Error("target.depthTexture not supported in Cube render targets");!function Re(T,x){if(x&&x.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,T),!x.depthTexture||!x.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const q=i.get(x.depthTexture);q.__renderTarget=x,(!q.__webglTexture||x.depthTexture.image.width!==x.width||x.depthTexture.image.height!==x.height)&&(x.depthTexture.image.width=x.width,x.depthTexture.image.height=x.height,x.depthTexture.needsUpdate=!0),Q(x.depthTexture,0);const ee=q.__webglTexture,X=ie(x);if(x.depthTexture.format===Xd)se(x)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0,X):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0);else{if(x.depthTexture.format!==Yd)throw new Error("Unknown depthTexture format");se(x)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0,X):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0)}}(x.__webglFramebuffer,T)}else if(U){x.__webglDepthbuffer=[];for(let q=0;q<6;q++)if(t.bindFramebuffer(n.FRAMEBUFFER,x.__webglFramebuffer[q]),void 0===x.__webglDepthbuffer[q])x.__webglDepthbuffer[q]=n.createRenderbuffer(),de(x.__webglDepthbuffer[q],T,!1);else{const ee=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,X=x.__webglDepthbuffer[q];n.bindRenderbuffer(n.RENDERBUFFER,X),n.framebufferRenderbuffer(n.FRAMEBUFFER,ee,n.RENDERBUFFER,X)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,x.__webglFramebuffer),void 0===x.__webglDepthbuffer)x.__webglDepthbuffer=n.createRenderbuffer(),de(x.__webglDepthbuffer,T,!1);else{const q=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ee=x.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ee),n.framebufferRenderbuffer(n.FRAMEBUFFER,q,n.RENDERBUFFER,ee)}t.bindFramebuffer(n.FRAMEBUFFER,null)}const Tt=[],P=[];function ie(T){return Math.min(r.maxSamples,T.samples)}function se(T){const x=i.get(T);return T.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==x.__useRenderToTexture}function ge(T,x){const U=T.colorSpace,q=T.format,ee=T.type;return!0===T.isCompressedTexture||!0===T.isVideoTexture||U!==Tc&&U!==Vo&&(Ot.getTransfer(U)===qt?(q!==Pi||ee!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",U)),x}function K(T){return typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement?(c.width=T.naturalWidth||T.width,c.height=T.naturalHeight||T.height):typeof VideoFrame<"u"&&T instanceof VideoFrame?(c.width=T.displayWidth,c.height=T.displayHeight):(c.width=T.width,c.height=T.height),c}this.allocateTextureUnit=function B(){const T=R;return T>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+T+" texture units while this GPU supports only "+r.maxTextures),R+=1,T},this.resetTextureUnits=function z(){R=0},this.setTexture2D=Q,this.setTexture2DArray=function N(T,x){const U=i.get(T);T.version>0&&U.__version!==T.version?H(U,T,x):t.bindTexture(n.TEXTURE_2D_ARRAY,U.__webglTexture,n.TEXTURE0+x)},this.setTexture3D=function V(T,x){const U=i.get(T);T.version>0&&U.__version!==T.version?H(U,T,x):t.bindTexture(n.TEXTURE_3D,U.__webglTexture,n.TEXTURE0+x)},this.setTextureCube=function L(T,x){const U=i.get(T);T.version>0&&U.__version!==T.version?function ue(T,x,U){if(6!==x.image.length)return;const q=ft(T,x),ee=x.source;t.bindTexture(n.TEXTURE_CUBE_MAP,T.__webglTexture,n.TEXTURE0+U);const X=i.get(ee);if(ee.version!==X.__version||!0===q){t.activeTexture(n.TEXTURE0+U);const Ne=Ot.getPrimaries(Ot.workingColorSpace),me=x.colorSpace===Vo?null:Ot.getPrimaries(x.colorSpace),Ie=x.colorSpace===Vo||Ne===me?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,x.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,x.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ie);const Rt=x.isCompressedTexture||x.image[0].isCompressedTexture,pe=x.image[0]&&x.image[0].isDataTexture,Le=[];for(let oe=0;oe<6;oe++)Le[oe]=Rt||pe?pe?x.image[oe].image:x.image[oe]:_(x.image[oe],!0,r.maxCubemapSize),Le[oe]=ge(x,Le[oe]);const tt=Le[0],rt=s.convert(x.format,x.colorSpace),Pe=s.convert(x.type),Lt=y(x.internalFormat,rt,Pe,x.colorSpace),St=!0!==x.isVideoTexture,Jt=void 0===X.__version||!0===q,O=ee.dataReady;let Y,xe=M(x,tt);if(Ue(n.TEXTURE_CUBE_MAP,x),Rt){St&&Jt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,xe,Lt,tt.width,tt.height);for(let oe=0;oe<6;oe++){Y=Le[oe].mipmaps;for(let Me=0;Me<Y.length;Me++){const Ee=Y[Me];x.format!==Pi?null!==rt?St?O&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me,0,0,Ee.width,Ee.height,rt,Ee.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me,Lt,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):St?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me,0,0,Ee.width,Ee.height,rt,Pe,Ee.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me,Lt,Ee.width,Ee.height,0,rt,Pe,Ee.data)}}}else{if(Y=x.mipmaps,St&&Jt){Y.length>0&&xe++;const oe=K(Le[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,xe,Lt,oe.width,oe.height)}for(let oe=0;oe<6;oe++)if(pe){St?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,Le[oe].width,Le[oe].height,rt,Pe,Le[oe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Lt,Le[oe].width,Le[oe].height,0,rt,Pe,Le[oe].data);for(let Me=0;Me<Y.length;Me++){const vt=Y[Me].image[oe].image;St?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me+1,0,0,vt.width,vt.height,rt,Pe,vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me+1,Lt,vt.width,vt.height,0,rt,Pe,vt.data)}}else{St?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,rt,Pe,Le[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Lt,rt,Pe,Le[oe]);for(let Me=0;Me<Y.length;Me++){const Ee=Y[Me];St?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me+1,0,0,rt,Pe,Ee.image[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Me+1,Lt,rt,Pe,Ee.image[oe])}}}g(x)&&m(n.TEXTURE_CUBE_MAP),X.__version=ee.version,x.onUpdate&&x.onUpdate(x)}T.__version=x.version}(U,T,x):t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+x)},this.rebindTextures=function He(T,x,U){const q=i.get(T);void 0!==x&&Ae(q.__webglFramebuffer,T,T.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==U&&Xe(T)},this.setupRenderTarget=function Ct(T){const x=T.texture,U=i.get(T),q=i.get(x);T.addEventListener("dispose",A);const ee=T.textures,X=!0===T.isWebGLCubeRenderTarget,Ne=ee.length>1;if(Ne||(void 0===q.__webglTexture&&(q.__webglTexture=n.createTexture()),q.__version=x.version,o.memory.textures++),X){U.__webglFramebuffer=[];for(let me=0;me<6;me++)if(x.mipmaps&&x.mipmaps.length>0){U.__webglFramebuffer[me]=[];for(let Ie=0;Ie<x.mipmaps.length;Ie++)U.__webglFramebuffer[me][Ie]=n.createFramebuffer()}else U.__webglFramebuffer[me]=n.createFramebuffer()}else{if(x.mipmaps&&x.mipmaps.length>0){U.__webglFramebuffer=[];for(let me=0;me<x.mipmaps.length;me++)U.__webglFramebuffer[me]=n.createFramebuffer()}else U.__webglFramebuffer=n.createFramebuffer();if(Ne)for(let me=0,Ie=ee.length;me<Ie;me++){const Rt=i.get(ee[me]);void 0===Rt.__webglTexture&&(Rt.__webglTexture=n.createTexture(),o.memory.textures++)}if(T.samples>0&&!1===se(T)){U.__webglMultisampledFramebuffer=n.createFramebuffer(),U.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,U.__webglMultisampledFramebuffer);for(let me=0;me<ee.length;me++){const Ie=ee[me];U.__webglColorRenderbuffer[me]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,U.__webglColorRenderbuffer[me]);const Rt=s.convert(Ie.format,Ie.colorSpace),pe=s.convert(Ie.type),Le=y(Ie.internalFormat,Rt,pe,Ie.colorSpace,!0===T.isXRRenderTarget),tt=ie(T);n.renderbufferStorageMultisample(n.RENDERBUFFER,tt,Le,T.width,T.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+me,n.RENDERBUFFER,U.__webglColorRenderbuffer[me])}n.bindRenderbuffer(n.RENDERBUFFER,null),T.depthBuffer&&(U.__webglDepthRenderbuffer=n.createRenderbuffer(),de(U.__webglDepthRenderbuffer,T,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(X){t.bindTexture(n.TEXTURE_CUBE_MAP,q.__webglTexture),Ue(n.TEXTURE_CUBE_MAP,x);for(let me=0;me<6;me++)if(x.mipmaps&&x.mipmaps.length>0)for(let Ie=0;Ie<x.mipmaps.length;Ie++)Ae(U.__webglFramebuffer[me][Ie],T,x,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie);else Ae(U.__webglFramebuffer[me],T,x,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0);g(x)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ne){for(let me=0,Ie=ee.length;me<Ie;me++){const Rt=ee[me],pe=i.get(Rt);t.bindTexture(n.TEXTURE_2D,pe.__webglTexture),Ue(n.TEXTURE_2D,Rt),Ae(U.__webglFramebuffer,T,Rt,n.COLOR_ATTACHMENT0+me,n.TEXTURE_2D,0),g(Rt)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let me=n.TEXTURE_2D;if((T.isWebGL3DRenderTarget||T.isWebGLArrayRenderTarget)&&(me=T.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(me,q.__webglTexture),Ue(me,x),x.mipmaps&&x.mipmaps.length>0)for(let Ie=0;Ie<x.mipmaps.length;Ie++)Ae(U.__webglFramebuffer[Ie],T,x,n.COLOR_ATTACHMENT0,me,Ie);else Ae(U.__webglFramebuffer,T,x,n.COLOR_ATTACHMENT0,me,0);g(x)&&m(me),t.unbindTexture()}T.depthBuffer&&Xe(T)},this.updateRenderTargetMipmap=function Ht(T){const x=T.textures;for(let U=0,q=x.length;U<q;U++){const ee=x[U];if(g(ee)){const X=b(T),Ne=i.get(ee).__webglTexture;t.bindTexture(X,Ne),m(X),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function rn(T){if(T.samples>0)if(!1===se(T)){const x=T.textures,U=T.width,q=T.height;let ee=n.COLOR_BUFFER_BIT;const X=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=i.get(T),me=x.length>1;if(me)for(let Ie=0;Ie<x.length;Ie++)t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let Ie=0;Ie<x.length;Ie++){if(T.resolveDepthBuffer&&(T.depthBuffer&&(ee|=n.DEPTH_BUFFER_BIT),T.stencilBuffer&&T.resolveStencilBuffer&&(ee|=n.STENCIL_BUFFER_BIT)),me){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[Ie]);const Rt=i.get(x[Ie]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Rt,0)}n.blitFramebuffer(0,0,U,q,0,0,U,q,ee,n.NEAREST),!0===l&&(Tt.length=0,P.length=0,Tt.push(n.COLOR_ATTACHMENT0+Ie),T.depthBuffer&&!1===T.resolveDepthBuffer&&(Tt.push(X),P.push(X),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,P)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Tt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),me)for(let Ie=0;Ie<x.length;Ie++){t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[Ie]);const Rt=i.get(x[Ie]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.TEXTURE_2D,Rt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}else T.depthBuffer&&!1===T.resolveDepthBuffer&&l&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=Ae,this.useMultisampledRTT=se}function uoe(n,e){return{convert:function t(i,r=Vo){let s;const o=Ot.getTransfer(r);if(i===Ws)return n.UNSIGNED_BYTE;if(i===Xx)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Yx)return n.UNSIGNED_SHORT_5_5_5_1;if(i===tO)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===QL)return n.BYTE;if(i===eO)return n.SHORT;if(i===Wd)return n.UNSIGNED_SHORT;if(i===qx)return n.INT;if(i===Bo)return n.UNSIGNED_INT;if(i===Ji)return n.FLOAT;if(i===jd)return n.HALF_FLOAT;if(i===nO)return n.ALPHA;if(i===iO)return n.RGB;if(i===Pi)return n.RGBA;if(i===rO)return n.LUMINANCE;if(i===sO)return n.LUMINANCE_ALPHA;if(i===Xd)return n.DEPTH_COMPONENT;if(i===Yd)return n.DEPTH_STENCIL;if(i===Kx)return n.RED;if(i===Pm)return n.RED_INTEGER;if(i===oO)return n.RG;if(i===Zx)return n.RG_INTEGER;if(i===Jx)return n.RGBA_INTEGER;if(i===Nm||i===Lm||i===Om||i===Fm)if(o===qt){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===Nm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Lm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Om)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Fm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===Nm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Lm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Om)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Fm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===Qx||i===eE||i===tE||i===nE){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===Qx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===eE)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===tE)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===nE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===iE||i===rE||i===sE){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(i===iE||i===rE)return o===qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===sE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(i===oE||i===aE||i===lE||i===cE||i===uE||i===dE||i===hE||i===fE||i===pE||i===mE||i===gE||i===_E||i===yE||i===vE){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(i===oE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===aE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===lE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===cE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===uE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===dE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===hE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===fE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===pE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===mE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===gE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===_E)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===yE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===vE)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===Um||i===bE||i===xE){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===Um)return o===qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===bE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===xE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===aO||i===EE||i===SE||i===wE){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===Um)return s.COMPRESSED_RED_RGTC1_EXT;if(i===EE)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===SE)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===wE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===qd?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class foe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new qs;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new to({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new un(new tu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class poe extends Dc{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,p=null;const _=new foe,g=t.getContextAttributes();let m=null,b=null;const y=[],v=[],M=new le;let w=null;const A=new qn;A.viewport=new Ft;const I=new qn;I.viewport=new Ft;const S=[A,I],E=new Yte;let R=null,z=null;function B(H){const ue=v.indexOf(H.inputSource);if(-1===ue)return;const Ae=y[ue];void 0!==Ae&&(Ae.update(H.inputSource,H.frame,c||o),Ae.dispatchEvent({type:H.type,data:H.inputSource}))}function j(){r.removeEventListener("select",B),r.removeEventListener("selectstart",B),r.removeEventListener("selectend",B),r.removeEventListener("squeeze",B),r.removeEventListener("squeezestart",B),r.removeEventListener("squeezeend",B),r.removeEventListener("end",j),r.removeEventListener("inputsourceschange",Q);for(let H=0;H<y.length;H++){const ue=v[H];null!==ue&&(v[H]=null,y[H].disconnect(ue))}R=null,z=null,_.reset(),e.setRenderTarget(m),f=null,h=null,d=null,r=null,b=null,ft.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}function Q(H){for(let ue=0;ue<H.removed.length;ue++){const Ae=H.removed[ue],de=v.indexOf(Ae);de>=0&&(v[de]=null,y[de].disconnect(Ae))}for(let ue=0;ue<H.added.length;ue++){const Ae=H.added[ue];let de=v.indexOf(Ae);if(-1===de){for(let Xe=0;Xe<y.length;Xe++){if(Xe>=v.length){v.push(Ae),de=Xe;break}if(null===v[Xe]){v[Xe]=Ae,de=Xe;break}}if(-1===de)break}const Re=y[de];Re&&Re.connect(Ae)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let ue=y[H];return void 0===ue&&(ue=new ZE,y[H]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(H){let ue=y[H];return void 0===ue&&(ue=new ZE,y[H]=ue),ue.getGripSpace()},this.getHand=function(H){let ue=y[H];return void 0===ue&&(ue=new ZE,y[H]=ue),ue.getHandSpace()},this.setFramebufferScaleFactor=function(H){s=H,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){a=H,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(H){c=H},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var H=Ox(function*(ue){if(r=ue,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",j),r.addEventListener("inputsourceschange",Q),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),w=e.getPixelRatio(),e.getSize(M),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let de=null,Re=null,Xe=null;g.depth&&(Xe=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,de=g.stencil?Yd:Xd,Re=g.stencil?qd:Bo);const He={colorFormat:t.RGBA8,depthFormat:Xe,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(He),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new Oa(h.textureWidth,h.textureHeight,{format:Pi,type:Ws,depthTexture:new oF(h.textureWidth,h.textureHeight,Re,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}else f=new XRWebGLLayer(r,t,{antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),b=new Oa(f.framebufferWidth,f.framebufferHeight,{format:Pi,type:Ws,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:!1===f.ignoreDepthValues,resolveStencilBuffer:!1===f.ignoreDepthValues});b.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),ft.setContext(r),ft.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ue){return H.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};const N=new D,V=new D;function ne(H,ue){null===ue?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices(ue.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(null===r)return;let ue=H.near,Ae=H.far;null!==_.texture&&(_.depthNear>0&&(ue=_.depthNear),_.depthFar>0&&(Ae=_.depthFar)),E.near=I.near=A.near=ue,E.far=I.far=A.far=Ae,(R!==E.near||z!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),R=E.near,z=E.far),A.layers.mask=2|H.layers.mask,I.layers.mask=4|H.layers.mask,E.layers.mask=A.layers.mask|I.layers.mask;const de=H.parent,Re=E.cameras;ne(E,de);for(let Xe=0;Xe<Re.length;Xe++)ne(Re[Xe],de);2===Re.length?function L(H,ue,Ae){N.setFromMatrixPosition(ue.matrixWorld),V.setFromMatrixPosition(Ae.matrixWorld);const de=N.distanceTo(V),Re=ue.projectionMatrix.elements,Xe=Ae.projectionMatrix.elements,He=Re[14]/(Re[10]-1),Ct=Re[14]/(Re[10]+1),Ht=(Re[9]+1)/Re[5],Tt=(Re[9]-1)/Re[5],P=(Re[8]-1)/Re[0],rn=(Xe[8]+1)/Xe[0],ie=He*P,se=He*rn,te=de/(-P+rn),ge=te*-P;if(ue.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(ge),H.translateZ(te),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert(),-1===Re[10])H.projectionMatrix.copy(ue.projectionMatrix),H.projectionMatrixInverse.copy(ue.projectionMatrixInverse);else{const K=He+te,T=Ct+te;H.projectionMatrix.makePerspective(ie-ge,se+(de-ge),Ht*Ct/T*K,Tt*Ct/T*K,K,T),H.projectionMatrixInverse.copy(H.projectionMatrix).invert()}}(E,A,I):E.projectionMatrix.copy(A.projectionMatrix),function he(H,ue,Ae){null===Ae?H.matrix.copy(ue.matrixWorld):(H.matrix.copy(Ae.matrixWorld),H.matrix.invert(),H.matrix.multiply(ue.matrixWorld)),H.matrix.decompose(H.position,H.quaternion,H.scale),H.updateMatrixWorld(!0),H.projectionMatrix.copy(ue.projectionMatrix),H.projectionMatrixInverse.copy(ue.projectionMatrixInverse),H.isPerspectiveCamera&&(H.fov=2*Ic*Math.atan(1/H.projectionMatrix.elements[5]),H.zoom=1)}(H,E,de)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==f)return l},this.setFoveation=function(H){l=H,null!==h&&(h.fixedFoveation=H),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=H)},this.hasDepthSensing=function(){return null!==_.texture},this.getDepthSensingMesh=function(){return _.getMesh(E)};let _e=null;const ft=new i2;ft.setAnimationLoop(function Ue(H,ue){if(u=ue.getViewerPose(c||o),p=ue,null!==u){const Ae=u.views;null!==f&&(e.setRenderTargetFramebuffer(b,f.framebuffer),e.setRenderTarget(b));let de=!1;Ae.length!==E.cameras.length&&(E.cameras.length=0,de=!0);for(let He=0;He<Ae.length;He++){const Ct=Ae[He];let Ht=null;if(null!==f)Ht=f.getViewport(Ct);else{const P=d.getViewSubImage(h,Ct);Ht=P.viewport,0===He&&(e.setRenderTargetTextures(b,P.colorTexture,P.depthStencilTexture),e.setRenderTarget(b))}let Tt=S[He];void 0===Tt&&(Tt=new qn,Tt.layers.enable(He),Tt.viewport=new Ft,S[He]=Tt),Tt.matrix.fromArray(Ct.transform.matrix),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale),Tt.projectionMatrix.fromArray(Ct.projectionMatrix),Tt.projectionMatrixInverse.copy(Tt.projectionMatrix).invert(),Tt.viewport.set(Ht.x,Ht.y,Ht.width,Ht.height),0===He&&(E.matrix.copy(Tt.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===de&&E.cameras.push(Tt)}const Re=r.enabledFeatures;if(Re&&Re.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&d){const He=d.getDepthInformation(Ae[0]);He&&He.isValid&&He.texture&&_.init(e,He,r.renderState)}}for(let Ae=0;Ae<y.length;Ae++){const de=v[Ae],Re=y[Ae];null!==de&&void 0!==Re&&Re.update(de,ue,c||o)}_e&&_e(H,ue),ue.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ue}),p=null}),this.setAnimationLoop=function(H){_e=H},this.dispose=function(){}}}const nl=new Ks,moe=new ot;function goe(n,e){function t(g,m){!0===g.matrixAutoUpdate&&g.updateMatrix(),m.value.copy(g.matrix)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,t(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===Ri&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,t(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===Ri&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,t(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,t(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const b=e.get(m),y=b.envMap,v=b.envMapRotation;y&&(g.envMap.value=y,nl.copy(v),nl.x*=-1,nl.y*=-1,nl.z*=-1,y.isCubeTexture&&!1===y.isRenderTargetTexture&&(nl.y*=-1,nl.z*=-1),g.envMapRotation.value.setFromMatrix4(moe.makeRotationFromEuler(nl)),g.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,g.aoMapTransform))}return{refreshFogUniforms:function i(g,m){m.color.getRGB(g.fogColor.value,PO(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)},refreshMaterialUniforms:function r(g,m,b,y,v){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),function d(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}(g,m)):m.isMeshPhongMaterial?(s(g,m),function u(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}(g,m)):m.isMeshStandardMaterial?(s(g,m),function h(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}(g,m),m.isMeshPhysicalMaterial&&function f(g,m,b){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Ri&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,g.specularIntensityMapTransform))}(g,m,v)):m.isMeshMatcapMaterial?(s(g,m),function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),function _(g,m){const b=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(b.matrixWorld),g.nearDistance.value=b.shadow.camera.near,g.farDistance.value=b.shadow.camera.far}(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform))}(g,m),m.isLineDashedMaterial&&function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}(g,m)):m.isPointsMaterial?function l(g,m,b,y){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*b,g.scale.value=.5*y,m.map&&(g.map.value=m.map,t(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}(g,m,b,y):m.isSpriteMaterial?function c(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function _oe(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(b,y,v,M){const w=b.value,A=y+"_"+v;if(void 0===M[A])return M[A]="number"==typeof w||"boolean"==typeof w?w:w.clone(),!0;{const I=M[A];if("number"==typeof w||"boolean"==typeof w){if(I!==w)return M[A]=w,!0}else if(!1===I.equals(w))return I.copy(w),!0}return!1}function _(b){const y={boundary:0,storage:0};return"number"==typeof b||"boolean"==typeof b?(y.boundary=4,y.storage=4):b.isVector2?(y.boundary=8,y.storage=8):b.isVector3||b.isColor?(y.boundary=16,y.storage=12):b.isVector4?(y.boundary=16,y.storage=16):b.isMatrix3?(y.boundary=48,y.storage=48):b.isMatrix4?(y.boundary=64,y.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),y}function g(b){const y=b.target;y.removeEventListener("dispose",g);const v=o.indexOf(y.__bindingPointIndex);o.splice(v,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function l(b,y){i.uniformBlockBinding(b,y.program)},update:function c(b,y){let v=r[b.id];void 0===v&&(function p(b){const y=b.uniforms;let v=0;for(let A=0,I=y.length;A<I;A++){const S=Array.isArray(y[A])?y[A]:[y[A]];for(let E=0,R=S.length;E<R;E++){const z=S[E],B=Array.isArray(z.value)?z.value:[z.value];for(let j=0,Q=B.length;j<Q;j++){const V=_(B[j]),L=v%16,ne=L%V.boundary,he=L+ne;v+=ne,0!==he&&16-he<V.storage&&(v+=16-he),z.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=v,v+=V.storage}}}const w=v%16;w>0&&(v+=16-w),b.__size=v,b.__cache={}}(b),v=function u(b){const y=function d(){for(let b=0;b<a;b++)if(-1===o.indexOf(b))return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=y;const v=n.createBuffer(),M=b.__size,w=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,v),n.bufferData(n.UNIFORM_BUFFER,M,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,v),v}(b),r[b.id]=v,b.addEventListener("dispose",g)),i.updateUBOMapping(b,y.program);const w=e.render.frame;s[b.id]!==w&&(function h(b){const v=b.uniforms,M=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[b.id]);for(let w=0,A=v.length;w<A;w++){const I=Array.isArray(v[w])?v[w]:[v[w]];for(let S=0,E=I.length;S<E;S++){const R=I[S];if(!0===f(R,w,S,M)){const z=R.__offset,B=Array.isArray(R.value)?R.value:[R.value];let j=0;for(let Q=0;Q<B.length;Q++){const N=B[Q],V=_(N);"number"==typeof N||"boolean"==typeof N?(R.__data[0]=N,n.bufferSubData(n.UNIFORM_BUFFER,z+j,R.__data)):N.isMatrix3?(R.__data[0]=N.elements[0],R.__data[1]=N.elements[1],R.__data[2]=N.elements[2],R.__data[3]=0,R.__data[4]=N.elements[3],R.__data[5]=N.elements[4],R.__data[6]=N.elements[5],R.__data[7]=0,R.__data[8]=N.elements[6],R.__data[9]=N.elements[7],R.__data[10]=N.elements[8],R.__data[11]=0):(N.toArray(R.__data,j),j+=V.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(b),s[b.id]=w)},dispose:function m(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}}}class yoe{constructor(e={}){const{canvas:t=jQ(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;let f;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=o;const p=new Uint32Array(4),_=new Int32Array(4);let g=null,m=null;const b=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Uo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const v=this;let M=!1;this._outputColorSpace=Qi;let w=0,A=0,I=null,S=-1,E=null;const R=new Ft,z=new Ft;let B=null;const j=new we(0);let Q=0,N=t.width,V=t.height,L=1,ne=null,he=null;const _e=new Ft(0,0,N,V),Ue=new Ft(0,0,N,V);let ft=!1;const H=new mg;let ue=!1,Ae=!1;const de=new ot,Re=new ot,Xe=new D,He=new Ft,Ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ht=!1;function Tt(){return null===I?L:1}let ie,se,te,ge,K,T,x,U,q,ee,X,Ne,me,Ie,Rt,pe,Le,tt,rt,Pe,Lt,St,Jt,O,P=i;function rn(C,F){return t.getContext(C,F)}try{const C={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r175"),t.addEventListener("webglcontextlost",oe,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===P){const F="webgl2";if(P=rn(F,C),null===P)throw rn(F)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(C){throw console.error("THREE.WebGLRenderer: "+C.message),C}function xe(){ie=new Are(P),ie.init(),St=new uoe(P,ie),se=new xre(P,ie,e,St),te=new loe(P,ie),se.reverseDepthBuffer&&h&&te.buffers.depth.setReversed(!0),ge=new Rre(P),K=new Yse,T=new coe(P,ie,te,K,se,St,ge),x=new Sre(v),U=new Tre(v),q=new _ne(P),Jt=new vre(P,q),ee=new Dre(P,q,ge,Jt),X=new Nre(P,ee,q,ge),rt=new Pre(P,se,T),pe=new Ere(K),Ne=new Xse(v,x,U,ie,se,Jt,pe),me=new goe(v,K),Ie=new Zse,Rt=new ioe(ie),tt=new yre(v,x,U,te,X,f,l),Le=new ooe(v,X,se),O=new _oe(P,ge,se,te),Pe=new bre(P,ie,ge),Lt=new Ire(P,ie,ge),ge.programs=Ne.programs,v.capabilities=se,v.extensions=ie,v.properties=K,v.renderLists=Ie,v.shadowMap=Le,v.state=te,v.info=ge}xe();const Y=new poe(v,P);function oe(C){C.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const C=ge.autoReset,F=Le.enabled,G=Le.autoUpdate,$=Le.needsUpdate,k=Le.type;xe(),ge.autoReset=C,Le.enabled=F,Le.autoUpdate=G,Le.needsUpdate=$,Le.type=k}function Ee(C){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",C.statusMessage)}function vt(C){const F=C.target;F.removeEventListener("dispose",vt),function _n(C){(function li(C){const F=K.get(C).programs;void 0!==F&&(F.forEach(function(G){Ne.releaseProgram(G)}),C.isShaderMaterial&&Ne.releaseShaderCache(C))})(C),K.remove(C)}(F)}function Wt(C,F,G){!0===C.transparent&&C.side===Gs&&!1===C.forceSinglePass?(C.side=Ri,C.needsUpdate=!0,e_(C,F,G),C.side=Oo,C.needsUpdate=!0,e_(C,F,G),C.side=Gs):e_(C,F,G)}this.xr=Y,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){const C=ie.get("WEBGL_lose_context");C&&C.loseContext()},this.forceContextRestore=function(){const C=ie.get("WEBGL_lose_context");C&&C.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(C){void 0!==C&&(L=C,this.setSize(N,V,!1))},this.getSize=function(C){return C.set(N,V)},this.setSize=function(C,F,G=!0){Y.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=C,V=F,t.width=Math.floor(C*L),t.height=Math.floor(F*L),!0===G&&(t.style.width=C+"px",t.style.height=F+"px"),this.setViewport(0,0,C,F))},this.getDrawingBufferSize=function(C){return C.set(N*L,V*L).floor()},this.setDrawingBufferSize=function(C,F,G){N=C,V=F,L=G,t.width=Math.floor(C*G),t.height=Math.floor(F*G),this.setViewport(0,0,C,F)},this.getCurrentViewport=function(C){return C.copy(R)},this.getViewport=function(C){return C.copy(_e)},this.setViewport=function(C,F,G,$){C.isVector4?_e.set(C.x,C.y,C.z,C.w):_e.set(C,F,G,$),te.viewport(R.copy(_e).multiplyScalar(L).round())},this.getScissor=function(C){return C.copy(Ue)},this.setScissor=function(C,F,G,$){C.isVector4?Ue.set(C.x,C.y,C.z,C.w):Ue.set(C,F,G,$),te.scissor(z.copy(Ue).multiplyScalar(L).round())},this.getScissorTest=function(){return ft},this.setScissorTest=function(C){te.setScissorTest(ft=C)},this.setOpaqueSort=function(C){ne=C},this.setTransparentSort=function(C){he=C},this.getClearColor=function(C){return C.copy(tt.getClearColor())},this.setClearColor=function(){tt.setClearColor(...arguments)},this.getClearAlpha=function(){return tt.getClearAlpha()},this.setClearAlpha=function(){tt.setClearAlpha(...arguments)},this.clear=function(C=!0,F=!0,G=!0){let $=0;if(C){let k=!1;if(null!==I){const fe=I.texture.format;k=fe===Jx||fe===Zx||fe===Pm}if(k){const fe=I.texture.type,ve=fe===Ws||fe===Bo||fe===Wd||fe===qd||fe===Xx||fe===Yx,Fe=tt.getClearColor(),Oe=tt.getClearAlpha(),lt=Fe.r,at=Fe.g,Ye=Fe.b;ve?(p[0]=lt,p[1]=at,p[2]=Ye,p[3]=Oe,P.clearBufferuiv(P.COLOR,0,p)):(_[0]=lt,_[1]=at,_[2]=Ye,_[3]=Oe,P.clearBufferiv(P.COLOR,0,_))}else $|=P.COLOR_BUFFER_BIT}F&&($|=P.DEPTH_BUFFER_BIT),G&&($|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear($)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",oe,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),tt.dispose(),Ie.dispose(),Rt.dispose(),K.dispose(),x.dispose(),U.dispose(),X.dispose(),Jt.dispose(),O.dispose(),Ne.dispose(),Y.dispose(),Y.removeEventListener("sessionstart",P2),Y.removeEventListener("sessionend",N2),il.stop()},this.renderBufferDirect=function(C,F,G,$,k,fe){null===F&&(F=Ct);const ve=k.isMesh&&k.matrixWorld.determinant()<0,Fe=function Moe(C,F,G,$,k){!0!==F.isScene&&(F=Ct),T.resetTextureUnits();const fe=F.fog,Fe=null===I?v.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:Tc,Oe=($.isMeshStandardMaterial?U:x).get($.envMap||($.isMeshStandardMaterial?F.environment:null)),lt=!0===$.vertexColors&&!!G.attributes.color&&4===G.attributes.color.itemSize,at=!!G.attributes.tangent&&(!!$.normalMap||$.anisotropy>0),Ye=!!G.morphAttributes.position,Pt=!!G.morphAttributes.normal,jt=!!G.morphAttributes.color;let hn=Uo;$.toneMapped&&(null===I||!0===I.isXRRenderTarget)&&(hn=v.toneMapping);const yn=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,Ut=void 0!==yn?yn.length:0,Ke=K.get($),Xn=m.state.lights;!0!==ue||!0!==Ae&&C===E||pe.setState($,C,C===E&&$.id===S);let Gt=!1;$.version===Ke.__version?(Ke.needsLights&&Ke.lightsStateVersion!==Xn.state.version||Ke.outputColorSpace!==Fe||k.isBatchedMesh&&!1===Ke.batching||!k.isBatchedMesh&&!0===Ke.batching||k.isBatchedMesh&&!0===Ke.batchingColor&&null===k.colorTexture||k.isBatchedMesh&&!1===Ke.batchingColor&&null!==k.colorTexture||k.isInstancedMesh&&!1===Ke.instancing||!k.isInstancedMesh&&!0===Ke.instancing||k.isSkinnedMesh&&!1===Ke.skinning||!k.isSkinnedMesh&&!0===Ke.skinning||k.isInstancedMesh&&!0===Ke.instancingColor&&null===k.instanceColor||k.isInstancedMesh&&!1===Ke.instancingColor&&null!==k.instanceColor||k.isInstancedMesh&&!0===Ke.instancingMorph&&null===k.morphTexture||k.isInstancedMesh&&!1===Ke.instancingMorph&&null!==k.morphTexture||Ke.envMap!==Oe||!0===$.fog&&Ke.fog!==fe||void 0!==Ke.numClippingPlanes&&(Ke.numClippingPlanes!==pe.numPlanes||Ke.numIntersection!==pe.numIntersection)||Ke.vertexAlphas!==lt||Ke.vertexTangents!==at||Ke.morphTargets!==Ye||Ke.morphNormals!==Pt||Ke.morphColors!==jt||Ke.toneMapping!==hn||Ke.morphTargetsCount!==Ut)&&(Gt=!0):(Gt=!0,Ke.__version=$.version);let jr=Ke.currentProgram;!0===Gt&&(jr=e_($,F,k));let au=!1,or=!1,Eh=!1;const sn=jr.getUniforms(),wr=Ke.uniforms;if(te.useProgram(jr.program)&&(au=!0,or=!0,Eh=!0),$.id!==S&&(S=$.id,or=!0),au||E!==C){te.buffers.depth.getReversed()?(de.copy(C.projectionMatrix),function XQ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(de),function YQ(n){const e=n.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(de),sn.setValue(P,"projectionMatrix",de)):sn.setValue(P,"projectionMatrix",C.projectionMatrix),sn.setValue(P,"viewMatrix",C.matrixWorldInverse);const Ui=sn.map.cameraPosition;void 0!==Ui&&Ui.setValue(P,Xe.setFromMatrixPosition(C.matrixWorld)),se.logarithmicDepthBuffer&&sn.setValue(P,"logDepthBufFC",2/(Math.log(C.far+1)/Math.LN2)),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&&sn.setValue(P,"isOrthographic",!0===C.isOrthographicCamera),E!==C&&(E=C,or=!0,Eh=!0)}if(k.isSkinnedMesh){sn.setOptional(P,k,"bindMatrix"),sn.setOptional(P,k,"bindMatrixInverse");const Ei=k.skeleton;Ei&&(null===Ei.boneTexture&&Ei.computeBoneTexture(),sn.setValue(P,"boneTexture",Ei.boneTexture,T))}k.isBatchedMesh&&(sn.setOptional(P,k,"batchingTexture"),sn.setValue(P,"batchingTexture",k._matricesTexture,T),sn.setOptional(P,k,"batchingIdTexture"),sn.setValue(P,"batchingIdTexture",k._indirectTexture,T),sn.setOptional(P,k,"batchingColorTexture"),null!==k._colorsTexture&&sn.setValue(P,"batchingColorTexture",k._colorsTexture,T));const Mr=G.morphAttributes;if((void 0!==Mr.position||void 0!==Mr.normal||void 0!==Mr.color)&&rt.update(k,G,jr),(or||Ke.receiveShadow!==k.receiveShadow)&&(Ke.receiveShadow=k.receiveShadow,sn.setValue(P,"receiveShadow",k.receiveShadow)),$.isMeshGouraudMaterial&&null!==$.envMap&&(wr.envMap.value=Oe,wr.flipEnvMap.value=Oe.isCubeTexture&&!1===Oe.isRenderTargetTexture?-1:1),$.isMeshStandardMaterial&&null===$.envMap&&null!==F.environment&&(wr.envMapIntensity.value=F.environmentIntensity),or&&(sn.setValue(P,"toneMappingExposure",v.toneMappingExposure),Ke.needsLights&&function Coe(C,F){C.ambientLightColor.needsUpdate=F,C.lightProbe.needsUpdate=F,C.directionalLights.needsUpdate=F,C.directionalLightShadows.needsUpdate=F,C.pointLights.needsUpdate=F,C.pointLightShadows.needsUpdate=F,C.spotLights.needsUpdate=F,C.spotLightShadows.needsUpdate=F,C.rectAreaLights.needsUpdate=F,C.hemisphereLights.needsUpdate=F}(wr,Eh),fe&&!0===$.fog&&me.refreshFogUniforms(wr,fe),me.refreshMaterialUniforms(wr,$,L,V,m.state.transmissionRenderTarget[C.id]),Zg.upload(P,U2(Ke),wr,T)),$.isShaderMaterial&&!0===$.uniformsNeedUpdate&&(Zg.upload(P,U2(Ke),wr,T),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&&sn.setValue(P,"center",k.center),sn.setValue(P,"modelViewMatrix",k.modelViewMatrix),sn.setValue(P,"normalMatrix",k.normalMatrix),sn.setValue(P,"modelMatrix",k.matrixWorld),$.isShaderMaterial||$.isRawShaderMaterial){const Ei=$.uniformsGroups;for(let Ui=0,ZS=Ei.length;Ui<ZS;Ui++){const rl=Ei[Ui];O.update(rl,jr),O.bind(rl,jr)}}return jr}(C,F,G,$,k);te.setMaterial($,ve);let Oe=G.index,lt=1;if(!0===$.wireframe){if(Oe=ee.getWireframeAttribute(G),void 0===Oe)return;lt=2}const at=G.drawRange,Ye=G.attributes.position;let Pt=at.start*lt,jt=(at.start+at.count)*lt;null!==fe&&(Pt=Math.max(Pt,fe.start*lt),jt=Math.min(jt,(fe.start+fe.count)*lt)),null!==Oe?(Pt=Math.max(Pt,0),jt=Math.min(jt,Oe.count)):null!=Ye&&(Pt=Math.max(Pt,0),jt=Math.min(jt,Ye.count));const hn=jt-Pt;if(hn<0||hn===1/0)return;Jt.setup(k,$,Fe,G,Oe);let yn,Ut=Pe;if(null!==Oe&&(yn=q.get(Oe),Ut=Lt,Ut.setIndex(yn)),k.isMesh)!0===$.wireframe?(te.setLineWidth($.wireframeLinewidth*Tt()),Ut.setMode(P.LINES)):Ut.setMode(P.TRIANGLES);else if(k.isLine){let Ke=$.linewidth;void 0===Ke&&(Ke=1),te.setLineWidth(Ke*Tt()),Ut.setMode(k.isLineSegments?P.LINES:k.isLineLoop?P.LINE_LOOP:P.LINE_STRIP)}else k.isPoints?Ut.setMode(P.POINTS):k.isSprite&&Ut.setMode(P.TRIANGLES);if(k.isBatchedMesh)if(null!==k._multiDrawInstances)Gm("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ut.renderMultiDrawInstances(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount,k._multiDrawInstances);else if(ie.get("WEBGL_multi_draw"))Ut.renderMultiDraw(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount);else{const Ke=k._multiDrawStarts,Xn=k._multiDrawCounts,Gt=k._multiDrawCount,jr=Oe?q.get(Oe).bytesPerElement:1,au=K.get($).currentProgram.getUniforms();for(let or=0;or<Gt;or++)au.setValue(P,"_gl_DrawID",or),Ut.render(Ke[or]/jr,Xn[or])}else if(k.isInstancedMesh)Ut.renderInstances(Pt,hn,k.count);else if(G.isInstancedBufferGeometry){const Xn=Math.min(G.instanceCount,void 0!==G._maxInstanceCount?G._maxInstanceCount:1/0);Ut.renderInstances(Pt,hn,Xn)}else Ut.render(Pt,hn)},this.compile=function(C,F,G=null){null===G&&(G=C),m=Rt.get(G),m.init(F),y.push(m),G.traverseVisible(function(k){k.isLight&&k.layers.test(F.layers)&&(m.pushLight(k),k.castShadow&&m.pushShadow(k))}),C!==G&&C.traverseVisible(function(k){k.isLight&&k.layers.test(F.layers)&&(m.pushLight(k),k.castShadow&&m.pushShadow(k))}),m.setupLights();const $=new Set;return C.traverse(function(k){if(!(k.isMesh||k.isPoints||k.isLine||k.isSprite))return;const fe=k.material;if(fe)if(Array.isArray(fe))for(let ve=0;ve<fe.length;ve++){const Fe=fe[ve];Wt(Fe,G,k),$.add(Fe)}else Wt(fe,G,k),$.add(fe)}),m=y.pop(),$},this.compileAsync=function(C,F,G=null){const $=this.compile(C,F,G);return new Promise(k=>{function fe(){$.forEach(function(ve){K.get(ve).currentProgram.isReady()&&$.delete(ve)}),0!==$.size?setTimeout(fe,10):k(C)}null!==ie.get("KHR_parallel_shader_compile")?fe():setTimeout(fe,10)})};let Wr=null;function P2(){il.stop()}function N2(){il.start()}const il=new i2;function KS(C,F,G,$){if(!1===C.visible)return;if(C.layers.test(F.layers))if(C.isGroup)G=C.renderOrder;else if(C.isLOD)!0===C.autoUpdate&&C.update(F);else if(C.isLight)m.pushLight(C),C.castShadow&&m.pushShadow(C);else if(C.isSprite){if(!C.frustumCulled||H.intersectsSprite(C)){$&&He.setFromMatrixPosition(C.matrixWorld).applyMatrix4(Re);const ve=X.update(C),Fe=C.material;Fe.visible&&g.push(C,ve,Fe,G,He.z,null)}}else if((C.isMesh||C.isLine||C.isPoints)&&(!C.frustumCulled||H.intersectsObject(C))){const ve=X.update(C),Fe=C.material;if($&&(void 0!==C.boundingSphere?(null===C.boundingSphere&&C.computeBoundingSphere(),He.copy(C.boundingSphere.center)):(null===ve.boundingSphere&&ve.computeBoundingSphere(),He.copy(ve.boundingSphere.center)),He.applyMatrix4(C.matrixWorld).applyMatrix4(Re)),Array.isArray(Fe)){const Oe=ve.groups;for(let lt=0,at=Oe.length;lt<at;lt++){const Ye=Oe[lt],Pt=Fe[Ye.materialIndex];Pt&&Pt.visible&&g.push(C,ve,Pt,G,He.z,Ye)}}else Fe.visible&&g.push(C,ve,Fe,G,He.z,null)}const fe=C.children;for(let ve=0,Fe=fe.length;ve<Fe;ve++)KS(fe[ve],F,G,$)}function L2(C,F,G,$){const k=C.opaque,fe=C.transmissive,ve=C.transparent;m.setupLightsView(G),!0===ue&&pe.setGlobalState(v.clippingPlanes,G),$&&te.viewport(R.copy($)),k.length>0&&Qg(k,F,G),fe.length>0&&Qg(fe,F,G),ve.length>0&&Qg(ve,F,G),te.buffers.depth.setTest(!0),te.buffers.depth.setMask(!0),te.buffers.color.setMask(!0),te.setPolygonOffset(!1)}function O2(C,F,G,$){if(null!==(!0===G.isScene?G.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[$.id]&&(m.state.transmissionRenderTarget[$.id]=new Oa(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")||ie.has("EXT_color_buffer_float")?jd:Ws,minFilter:$s,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ot.workingColorSpace}));const fe=m.state.transmissionRenderTarget[$.id],ve=$.viewport||R;fe.setSize(ve.z*v.transmissionResolutionScale,ve.w*v.transmissionResolutionScale);const Fe=v.getRenderTarget();v.setRenderTarget(fe),v.getClearColor(j),Q=v.getClearAlpha(),Q<1&&v.setClearColor(16777215,.5),v.clear(),Ht&&tt.render(G);const Oe=v.toneMapping;v.toneMapping=Uo;const lt=$.viewport;if(void 0!==$.viewport&&($.viewport=void 0),m.setupLightsView($),!0===ue&&pe.setGlobalState(v.clippingPlanes,$),Qg(C,G,$),T.updateMultisampleRenderTarget(fe),T.updateRenderTargetMipmap(fe),!1===ie.has("WEBGL_multisampled_render_to_texture")){let at=!1;for(let Ye=0,Pt=F.length;Ye<Pt;Ye++){const jt=F[Ye],hn=jt.object,yn=jt.geometry,Ut=jt.material,Ke=jt.group;if(Ut.side===Gs&&hn.layers.test($.layers)){const Xn=Ut.side;Ut.side=Ri,Ut.needsUpdate=!0,F2(hn,G,$,yn,Ut,Ke),Ut.side=Xn,Ut.needsUpdate=!0,at=!0}}!0===at&&(T.updateMultisampleRenderTarget(fe),T.updateRenderTargetMipmap(fe))}v.setRenderTarget(Fe),v.setClearColor(j,Q),void 0!==lt&&($.viewport=lt),v.toneMapping=Oe}function Qg(C,F,G){const $=!0===F.isScene?F.overrideMaterial:null;for(let k=0,fe=C.length;k<fe;k++){const ve=C[k],Fe=ve.object,Oe=ve.geometry,lt=ve.group;let at=ve.material;!0===at.allowOverride&&null!==$&&(at=$),Fe.layers.test(G.layers)&&F2(Fe,F,G,Oe,at,lt)}}function F2(C,F,G,$,k,fe){C.onBeforeRender(v,F,G,$,k,fe),C.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,C.matrixWorld),C.normalMatrix.getNormalMatrix(C.modelViewMatrix),k.onBeforeRender(v,F,G,$,C,fe),!0===k.transparent&&k.side===Gs&&!1===k.forceSinglePass?(k.side=Ri,k.needsUpdate=!0,v.renderBufferDirect(G,F,$,k,C,fe),k.side=Oo,k.needsUpdate=!0,v.renderBufferDirect(G,F,$,k,C,fe),k.side=Gs):v.renderBufferDirect(G,F,$,k,C,fe),C.onAfterRender(v,F,G,$,k,fe)}function e_(C,F,G){!0!==F.isScene&&(F=Ct);const $=K.get(C),k=m.state.lights,ve=k.state.version,Fe=Ne.getParameters(C,k.state,m.state.shadowsArray,F,G),Oe=Ne.getProgramCacheKey(Fe);let lt=$.programs;$.environment=C.isMeshStandardMaterial?F.environment:null,$.fog=F.fog,$.envMap=(C.isMeshStandardMaterial?U:x).get(C.envMap||$.environment),$.envMapRotation=null!==$.environment&&null===C.envMap?F.environmentRotation:C.envMapRotation,void 0===lt&&(C.addEventListener("dispose",vt),lt=new Map,$.programs=lt);let at=lt.get(Oe);if(void 0!==at){if($.currentProgram===at&&$.lightsStateVersion===ve)return k2(C,Fe),at}else Fe.uniforms=Ne.getUniforms(C),C.onBeforeCompile(Fe,v),at=Ne.acquireProgram(Fe,Oe),lt.set(Oe,at),$.uniforms=Fe.uniforms;const Ye=$.uniforms;return(!C.isShaderMaterial&&!C.isRawShaderMaterial||!0===C.clipping)&&(Ye.clippingPlanes=pe.uniform),k2(C,Fe),$.needsLights=function Toe(C){return C.isMeshLambertMaterial||C.isMeshToonMaterial||C.isMeshPhongMaterial||C.isMeshStandardMaterial||C.isShadowMaterial||C.isShaderMaterial&&!0===C.lights}(C),$.lightsStateVersion=ve,$.needsLights&&(Ye.ambientLightColor.value=k.state.ambient,Ye.lightProbe.value=k.state.probe,Ye.directionalLights.value=k.state.directional,Ye.directionalLightShadows.value=k.state.directionalShadow,Ye.spotLights.value=k.state.spot,Ye.spotLightShadows.value=k.state.spotShadow,Ye.rectAreaLights.value=k.state.rectArea,Ye.ltc_1.value=k.state.rectAreaLTC1,Ye.ltc_2.value=k.state.rectAreaLTC2,Ye.pointLights.value=k.state.point,Ye.pointLightShadows.value=k.state.pointShadow,Ye.hemisphereLights.value=k.state.hemi,Ye.directionalShadowMap.value=k.state.directionalShadowMap,Ye.directionalShadowMatrix.value=k.state.directionalShadowMatrix,Ye.spotShadowMap.value=k.state.spotShadowMap,Ye.spotLightMatrix.value=k.state.spotLightMatrix,Ye.spotLightMap.value=k.state.spotLightMap,Ye.pointShadowMap.value=k.state.pointShadowMap,Ye.pointShadowMatrix.value=k.state.pointShadowMatrix),$.currentProgram=at,$.uniformsList=null,at}function U2(C){if(null===C.uniformsList){const F=C.currentProgram.getUniforms();C.uniformsList=Zg.seqWithValue(F.seq,C.uniforms)}return C.uniformsList}function k2(C,F){const G=K.get(C);G.outputColorSpace=F.outputColorSpace,G.batching=F.batching,G.batchingColor=F.batchingColor,G.instancing=F.instancing,G.instancingColor=F.instancingColor,G.instancingMorph=F.instancingMorph,G.skinning=F.skinning,G.morphTargets=F.morphTargets,G.morphNormals=F.morphNormals,G.morphColors=F.morphColors,G.morphTargetsCount=F.morphTargetsCount,G.numClippingPlanes=F.numClippingPlanes,G.numIntersection=F.numClipIntersection,G.vertexAlphas=F.vertexAlphas,G.vertexTangents=F.vertexTangents,G.toneMapping=F.toneMapping}il.setAnimationLoop(function so(C){Wr&&Wr(C)}),typeof self<"u"&&il.setContext(self),this.setAnimationLoop=function(C){Wr=C,Y.setAnimationLoop(C),null===C?il.stop():il.start()},Y.addEventListener("sessionstart",P2),Y.addEventListener("sessionend",N2),this.render=function(C,F){if(void 0!==F&&!0!==F.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===M)return;if(!0===C.matrixWorldAutoUpdate&&C.updateMatrixWorld(),null===F.parent&&!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),!0===Y.enabled&&!0===Y.isPresenting&&(!0===Y.cameraAutoUpdate&&Y.updateCamera(F),F=Y.getCamera()),!0===C.isScene&&C.onBeforeRender(v,C,F,I),m=Rt.get(C,y.length),m.init(F),y.push(m),Re.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),H.setFromProjectionMatrix(Re),Ae=this.localClippingEnabled,ue=pe.init(this.clippingPlanes,Ae),g=Ie.get(C,b.length),g.init(),b.push(g),!0===Y.enabled&&!0===Y.isPresenting){const fe=v.xr.getDepthSensingMesh();null!==fe&&KS(fe,F,-1/0,v.sortObjects)}KS(C,F,0,v.sortObjects),g.finish(),!0===v.sortObjects&&g.sort(ne,he),Ht=!1===Y.enabled||!1===Y.isPresenting||!1===Y.hasDepthSensing(),Ht&&tt.addToRenderList(g,C),this.info.render.frame++,!0===ue&&pe.beginShadows(),Le.render(m.state.shadowsArray,C,F),!0===ue&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset();const $=g.opaque,k=g.transmissive;if(m.setupLights(),F.isArrayCamera){const fe=F.cameras;if(k.length>0)for(let ve=0,Fe=fe.length;ve<Fe;ve++)O2($,k,C,fe[ve]);Ht&&tt.render(C);for(let ve=0,Fe=fe.length;ve<Fe;ve++){const Oe=fe[ve];L2(g,C,Oe,Oe.viewport)}}else k.length>0&&O2($,k,C,F),Ht&&tt.render(C),L2(g,C,F);null!==I&&0===A&&(T.updateMultisampleRenderTarget(I),T.updateRenderTargetMipmap(I)),!0===C.isScene&&C.onAfterRender(v,C,F),Jt.resetDefaultState(),S=-1,E=null,y.pop(),y.length>0?(m=y[y.length-1],!0===ue&&pe.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,b.pop(),g=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(C,F,G){const $=K.get(C);$.__autoAllocateDepthBuffer=!1===C.resolveDepthBuffer,!1===$.__autoAllocateDepthBuffer&&($.__useRenderToTexture=!1),K.get(C.texture).__webglTexture=F,K.get(C.depthTexture).__webglTexture=$.__autoAllocateDepthBuffer?void 0:G,$.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(C,F){const G=K.get(C);G.__webglFramebuffer=F,G.__useDefaultFramebuffer=void 0===F};const Aoe=P.createFramebuffer();this.setRenderTarget=function(C,F=0,G=0){I=C,w=F,A=G;let $=!0,k=null,fe=!1,ve=!1;if(C){const Oe=K.get(C);if(void 0!==Oe.__useDefaultFramebuffer)te.bindFramebuffer(P.FRAMEBUFFER,null),$=!1;else if(void 0===Oe.__webglFramebuffer)T.setupRenderTarget(C);else if(Oe.__hasExternalTextures)T.rebindTextures(C,K.get(C.texture).__webglTexture,K.get(C.depthTexture).__webglTexture);else if(C.depthBuffer){const Ye=C.depthTexture;if(Oe.__boundDepthTexture!==Ye){if(null!==Ye&&K.has(Ye)&&(C.width!==Ye.image.width||C.height!==Ye.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");T.setupDepthRenderbuffer(C)}}const lt=C.texture;(lt.isData3DTexture||lt.isDataArrayTexture||lt.isCompressedArrayTexture)&&(ve=!0);const at=K.get(C).__webglFramebuffer;C.isWebGLCubeRenderTarget?(k=Array.isArray(at[F])?at[F][G]:at[F],fe=!0):k=C.samples>0&&!1===T.useMultisampledRTT(C)?K.get(C).__webglMultisampledFramebuffer:Array.isArray(at)?at[G]:at,R.copy(C.viewport),z.copy(C.scissor),B=C.scissorTest}else R.copy(_e).multiplyScalar(L).floor(),z.copy(Ue).multiplyScalar(L).floor(),B=ft;if(0!==G&&(k=Aoe),te.bindFramebuffer(P.FRAMEBUFFER,k)&&$&&te.drawBuffers(C,k),te.viewport(R),te.scissor(z),te.setScissorTest(B),fe){const Oe=K.get(C.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+F,Oe.__webglTexture,G)}else if(ve){const Oe=K.get(C.texture);P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,Oe.__webglTexture,G,F)}else if(null!==C&&0!==G){const Oe=K.get(C.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Oe.__webglTexture,G)}S=-1},this.readRenderTargetPixels=function(C,F,G,$,k,fe,ve){if(!C||!C.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Fe=K.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&void 0!==ve&&(Fe=Fe[ve]),Fe){te.bindFramebuffer(P.FRAMEBUFFER,Fe);try{const Oe=C.texture,lt=Oe.format,at=Oe.type;if(!se.textureFormatReadable(lt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!se.textureTypeReadable(at))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");F>=0&&F<=C.width-$&&G>=0&&G<=C.height-k&&P.readPixels(F,G,$,k,St.convert(lt),St.convert(at),fe)}finally{const Oe=null!==I?K.get(I).__webglFramebuffer:null;te.bindFramebuffer(P.FRAMEBUFFER,Oe)}}},this.readRenderTargetPixelsAsync=function(){var C=Ox(function*(F,G,$,k,fe,ve,Fe){if(!F||!F.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Oe=K.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==Fe&&(Oe=Oe[Fe]),Oe){if(G>=0&&G<=F.width-k&&$>=0&&$<=F.height-fe){te.bindFramebuffer(P.FRAMEBUFFER,Oe);const lt=F.texture,at=lt.format,Ye=lt.type;if(!se.textureFormatReadable(at))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!se.textureTypeReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Pt=P.createBuffer();P.bindBuffer(P.PIXEL_PACK_BUFFER,Pt),P.bufferData(P.PIXEL_PACK_BUFFER,ve.byteLength,P.STREAM_READ),P.readPixels(G,$,k,fe,St.convert(at),St.convert(Ye),0);const jt=null!==I?K.get(I).__webglFramebuffer:null;te.bindFramebuffer(P.FRAMEBUFFER,jt);const hn=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);return P.flush(),yield function qQ(n,e,t){return new Promise(function(i,r){setTimeout(function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}},t)})}(P,hn,4),P.bindBuffer(P.PIXEL_PACK_BUFFER,Pt),P.getBufferSubData(P.PIXEL_PACK_BUFFER,0,ve),P.deleteBuffer(Pt),P.deleteSync(hn),ve}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(F,G,$,k,fe,ve,Fe){return C.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(C,F=null,G=0){const $=Math.pow(2,-G),k=Math.floor(C.image.width*$),fe=Math.floor(C.image.height*$),ve=null!==F?F.x:0,Fe=null!==F?F.y:0;T.setTexture2D(C,0),P.copyTexSubImage2D(P.TEXTURE_2D,G,0,0,ve,Fe,k,fe),te.unbindTexture()};const Doe=P.createFramebuffer(),Ioe=P.createFramebuffer();this.copyTextureToTexture=function(C,F,G=null,$=null,k=0,fe=null){let ve,Fe,Oe,lt,at,Ye,Pt,jt,hn;null===fe&&(0!==k?(Gm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),fe=k,k=0):fe=0);const yn=C.isCompressedTexture?C.mipmaps[fe]:C.image;if(null!==G)ve=G.max.x-G.min.x,Fe=G.max.y-G.min.y,Oe=G.isBox3?G.max.z-G.min.z:1,lt=G.min.x,at=G.min.y,Ye=G.isBox3?G.min.z:0;else{const Mr=Math.pow(2,-k);ve=Math.floor(yn.width*Mr),Fe=Math.floor(yn.height*Mr),Oe=C.isDataArrayTexture?yn.depth:C.isData3DTexture?Math.floor(yn.depth*Mr):1,lt=0,at=0,Ye=0}null!==$?(Pt=$.x,jt=$.y,hn=$.z):(Pt=0,jt=0,hn=0);const Ut=St.convert(F.format),Ke=St.convert(F.type);let Xn;F.isData3DTexture?(T.setTexture3D(F,0),Xn=P.TEXTURE_3D):F.isDataArrayTexture||F.isCompressedArrayTexture?(T.setTexture2DArray(F,0),Xn=P.TEXTURE_2D_ARRAY):(T.setTexture2D(F,0),Xn=P.TEXTURE_2D),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,F.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,F.unpackAlignment);const Gt=P.getParameter(P.UNPACK_ROW_LENGTH),jr=P.getParameter(P.UNPACK_IMAGE_HEIGHT),au=P.getParameter(P.UNPACK_SKIP_PIXELS),or=P.getParameter(P.UNPACK_SKIP_ROWS),Eh=P.getParameter(P.UNPACK_SKIP_IMAGES);P.pixelStorei(P.UNPACK_ROW_LENGTH,yn.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,yn.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,lt),P.pixelStorei(P.UNPACK_SKIP_ROWS,at),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Ye);const sn=C.isDataArrayTexture||C.isData3DTexture,wr=F.isDataArrayTexture||F.isData3DTexture;if(C.isDepthTexture){const Mr=K.get(C),Ei=K.get(F),Ui=K.get(Mr.__renderTarget),ZS=K.get(Ei.__renderTarget);te.bindFramebuffer(P.READ_FRAMEBUFFER,Ui.__webglFramebuffer),te.bindFramebuffer(P.DRAW_FRAMEBUFFER,ZS.__webglFramebuffer);for(let rl=0;rl<Oe;rl++)sn&&(P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,K.get(C).__webglTexture,k,Ye+rl),P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,K.get(F).__webglTexture,fe,hn+rl)),P.blitFramebuffer(lt,at,ve,Fe,Pt,jt,ve,Fe,P.DEPTH_BUFFER_BIT,P.NEAREST);te.bindFramebuffer(P.READ_FRAMEBUFFER,null),te.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else if(0!==k||C.isRenderTargetTexture||K.has(C)){const Mr=K.get(C),Ei=K.get(F);te.bindFramebuffer(P.READ_FRAMEBUFFER,Doe),te.bindFramebuffer(P.DRAW_FRAMEBUFFER,Ioe);for(let Ui=0;Ui<Oe;Ui++)sn?P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Mr.__webglTexture,k,Ye+Ui):P.framebufferTexture2D(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Mr.__webglTexture,k),wr?P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Ei.__webglTexture,fe,hn+Ui):P.framebufferTexture2D(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Ei.__webglTexture,fe),0!==k?P.blitFramebuffer(lt,at,ve,Fe,Pt,jt,ve,Fe,P.COLOR_BUFFER_BIT,P.NEAREST):wr?P.copyTexSubImage3D(Xn,fe,Pt,jt,hn+Ui,lt,at,ve,Fe):P.copyTexSubImage2D(Xn,fe,Pt,jt,lt,at,ve,Fe);te.bindFramebuffer(P.READ_FRAMEBUFFER,null),te.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else wr?C.isDataTexture||C.isData3DTexture?P.texSubImage3D(Xn,fe,Pt,jt,hn,ve,Fe,Oe,Ut,Ke,yn.data):F.isCompressedArrayTexture?P.compressedTexSubImage3D(Xn,fe,Pt,jt,hn,ve,Fe,Oe,Ut,yn.data):P.texSubImage3D(Xn,fe,Pt,jt,hn,ve,Fe,Oe,Ut,Ke,yn):C.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,fe,Pt,jt,ve,Fe,Ut,Ke,yn.data):C.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,fe,Pt,jt,yn.width,yn.height,Ut,yn.data):P.texSubImage2D(P.TEXTURE_2D,fe,Pt,jt,ve,Fe,Ut,Ke,yn);P.pixelStorei(P.UNPACK_ROW_LENGTH,Gt),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,jr),P.pixelStorei(P.UNPACK_SKIP_PIXELS,au),P.pixelStorei(P.UNPACK_SKIP_ROWS,or),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Eh),0===fe&&F.generateMipmaps&&P.generateMipmap(Xn),te.unbindTexture()},this.copyTextureToTexture3D=function(C,F,G=null,$=null,k=0){return Gm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(C,F,G,$,k)},this.initRenderTarget=function(C){void 0===K.get(C).__webglFramebuffer&&T.setupRenderTarget(C)},this.initTexture=function(C){C.isCubeTexture?T.setTextureCube(C,0):C.isData3DTexture?T.setTexture3D(C,0):C.isDataArrayTexture||C.isCompressedArrayTexture?T.setTexture2DArray(C,0):T.setTexture2D(C,0),te.unbindTexture()},this.resetState=function(){w=0,A=0,I=null,te.reset(),Jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ds}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Ot._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ot._getUnpackColorSpace()}}const voe=["canvasContainer"],boe=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:JZ},{path:"dashboard",component:aJ},{path:"meeting",component:kJ},{path:"class-room",component:(()=>{const e=class{constructor(){this.tables=[],this.membersCount=6,this.keys={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1},this.animate=()=>{requestAnimationFrame(this.animate),this.moveCharacter(),this.renderer.render(this.scene,this.camera)}}ngOnInit(){this.initScene(),this.addLights(),this.createClassroom(),this.createTablesAndChairs(),this.createCharacter(),this.animate()}initScene(){this.scene=new OO,this.scene.background=new we(10526880),this.camera=new qn(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,8,12),this.camera.lookAt(0,0,0),this.renderer=new yoe({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.canvasContainer.nativeElement.appendChild(this.renderer.domElement)}addLights(){const i=new NF(16777215,1);i.position.set(10,10,10),this.scene.add(i);const r=new LF(4210752);this.scene.add(r)}createClassroom(){this.classroom=new qo;const i=new tu(20,20),r=new ja({color:8421504}),s=new un(i,r);s.rotation.x=-Math.PI/2,this.classroom.add(s);const o=new ja({color:16777215}),a=new hs(20,10,.5),l=new un(a,o);l.position.set(0,5,-10),this.classroom.add(l);const c=new un(a,o);c.rotation.y=Math.PI/2,c.position.set(-10,5,0),this.classroom.add(c);const u=new un(a,o);u.rotation.y=Math.PI/2,u.position.set(10,5,0),this.classroom.add(u),this.scene.add(this.classroom)}createTablesAndChairs(){const i=new ja({color:9127187}),r=new ja({color:5597999}),s=Math.ceil(this.membersCount/2);let o=0;for(let a=0;a<s;a++){const l=new qo,c=new hs(2,.2,1),u=new un(c,i);u.position.set(0,1,0),l.add(u);for(let d=0;d<2&&o<this.membersCount;d++,o++){const h=new hs(.5,1,.5),f=new un(h,r);f.position.set(0===d?-1:1,.5,0),l.add(f)}l.position.set(4*a-4,0,2*a-4),this.scene.add(l),this.tables.push(l)}}createCharacter(){this.character=new qo;const i=new hs(.8,1.5,.5),r=new ja({color:16711680}),s=new un(i,r);s.position.set(0,1,0),this.character.add(s);const o=new vh(.4),a=new ja({color:16764057}),l=new un(o,a);l.position.set(0,2,0),this.character.add(l),this.character.position.set(0,0,5),this.scene.add(this.character)}onKeyDown(i){this.keys.hasOwnProperty(i.key)&&(this.keys[i.key]=!0)}onKeyUp(i){this.keys.hasOwnProperty(i.key)&&(this.keys[i.key]=!1)}moveCharacter(){this.keys.ArrowUp&&(this.character.position.z-=.1),this.keys.ArrowDown&&(this.character.position.z+=.1),this.keys.ArrowLeft&&(this.character.position.x-=.1),this.keys.ArrowRight&&(this.character.position.x+=.1)}};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ea({type:e,selectors:[["app-class-room"]],viewQuery:function(r,s){if(1&r&&Sv(voe,7),2&r){let o;Nf(o=Lf())&&(s.canvasContainer=o.first)}},hostBindings:function(r,s){1&r&&Be("keydown",function(a){return s.onKeyDown(a)},0,ff)("keyup",function(a){return s.onKeyUp(a)},!1,ff)},decls:2,vars:0,consts:[["canvasContainer",""]],template:function(r,s){1&r&&Qe(0,"div",null,0)},styles:["canvas[_ngcontent-%COMP%]{display:block;width:100vw;height:100vh}"]}),n})()}];let xoe=(()=>{const e=class{};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Si({type:e}),e.\u0275inj=ci({imports:[HN.forRoot(boe),HN]}),n})(),Eoe=(()=>{const e=class{};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Si({type:e}),e.\u0275inj=ci({imports:[tp,Rx,Px]}),n})(),Soe=(()=>{const e=class{};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Si({type:e}),e.\u0275inj=ci({imports:[tp,Rx,Px]}),n})(),woe=(()=>{const e=class{};let n=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Si({type:e,bootstrap:[WK]}),e.\u0275inj=ci({providers:[{provide:po,useClass:p1}],imports:[tp,nI,w6,xoe,Rx,Px,Eoe,Soe]}),n})();_W().bootstrapModule(woe).catch(n=>console.error(n))}},t_=>{t_(t_.s=588)}]);